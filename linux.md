<p align="center">
    <a href="https://github.com/Lifailon/PS-Commands/blob/rsa/linux.md"><img title="Linux Commands Logo"src="Logo/linux-commands.png"></a>
</p>

<p align="center">
    –ó–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ üêß <b>Linux</b>.
</p>

---

<h2 align="left">
    –ù–∞–≤–∏–≥–∞—Ü–∏—è:
</h2>

- [bash](#bash)
- [filesystem](#filesystem)
  - [ln](#ln)
  - [zip](#zip)
  - [gpg](#gpg)
- [api](#api)
  - [curl](#curl)
  - [influxdb](#influxdb)
  - [wget](#wget)
  - [curlie](#curlie)
  - [httpie](#httpie)
- [json](#json)
  - [jq](#jq)
  - [netcheck](#netcheck)
  - [jc](#jc)
  - [brew](#brew)
  - [fx](#fx)
  - [jid](#jid)
  - [jqp](#jqp)
  - [xmllint](#xmllint)
  - [dasel](#dasel)
  - [xq](#xq)
  - [htmlq](#htmlq)
  - [yq](#yq)
  - [yamllint](#yamllint)
  - [jsonlint](#jsonlint)
  - [csv](#csv)
  - [sttr](#sttr)
- [grep](#grep)
  - [ripgrep](#ripgrep)
  - [rga](#rga)
  - [sig](#sig)
- [sed](#sed)
- [awk](#awk)
- [printf](#printf)
- [cut](#cut)
  - [rev](#rev)
- [tr](#tr)
- [man](#man)
  - [cheat sh](#cheat-sh)
  - [tldr](#tldr)
- [debug](#debug)
- [tools](#tools)
- [dust](#dust)
- [fd](#fd)
  - [fd-fzf](#fd-fzf)
- [findutils](#findutils)
  - [find](#find)
  - [exec](#exec)
  - [locate](#locate)
  - [xargs](#xargs)
- [fincore](#fincore)
  - [lspage](#lspage)
- [bashrc](#bashrc)
  - [oh-my-bash](#oh-my-bash)
- [fzf](#fzf)
  - [fzf-obc](#fzf-obc)
- [hstr](#hstr)
  - [hstr-fzf](#hstr-fzf)
  - [mcfly](#mcfly)
- [compgen](#compgen)
- [cron](#cron)
- [systemctl](#systemctl)
  - [systemctl-tui](#systemctl-tui)
  - [unit](#unit)
- [journalctl](#journalctl)
- [dmesg](#dmesg)
- [hardware](#hardware)
- [sysctl](#sysctl)
- [limits](#limits)
- [quota](#quota)
- [Bearstech](#bearstech)
  - [pussh](#pussh)
  - [quickbench](#quickbench)
- [fetch](#fetch)
- [networkmanager](#networkmanager)
- [wireless](#wireless)
- [networking](#networking)
- [netplan](#netplan)
- [ip](#ip)
  - [net-tools](#net-tools)
  - [networkd](#networkd)
- [ss](#ss)
- [dns](#dns)
  - [resolv](#resolv)
  - [resolved](#resolved)
  - [dig](#dig)
  - [mtr](#mtr)
  - [doggo](#doggo)
- [vnstat](#vnstat)
- [netcat](#netcat)
  - [socket api](#socket-api)
  - [socket proxy](#socket-proxy)
- [proxy](#proxy)
- [nmap](#nmap)
  - [masscan](#masscan)
  - [rustscan](#rustscan)
  - [tcp](#tcp)
- [tcpdump](#tcpdump)
- [tshark](#tshark)
- [ping](#ping)
  - [fping](#fping)
  - [netping](#netping)
- [firewall](#firewall)
  - [ufw](#ufw)
  - [show](#show)
  - [firewalld](#firewalld)
  - [iptables](#iptables)
  - [nftables](#nftables)
- [ssh](#ssh)
  - [keygen](#keygen)
  - [x11](#x11)
  - [scp](#scp)
  - [sshpass](#sshpass)
- [sudoers](#sudoers)
- [strace](#strace)
- [apt](#apt)
- [snap](#snap)
- [dpkg](#dpkg)
- [ntp](#ntp)
  - [time](#time)
  - [language](#language)
  - [timesyncd](#timesyncd)
  - [ntpd](#ntpd)
- [top](#top)
  - [htop](#htop)
  - [bpytop](#bpytop)
  - [atop](#atop)
  - [iftop](#iftop)
  - [iotop](#iotop)
  - [top other](#top-other)
- [ps](#ps)
  - [kill](#kill)
  - [procs](#procs)
- [jobs](#jobs)
  - [nohup](#nohup)
  - [task-spooler](#task-spooler)
- [mem](#mem)
- [lsof](#lsof)
  - [descriptor](#descriptor)
- [vmstat](#vmstat)
- [sysstat](#sysstat)
  - [iostat](#iostat)
  - [mpstat](#mpstat)
  - [pidstat](#pidstat)
- [stress](#stress)
  - [stress-ng](#stress-ng)
- [smart](#smart)
  - [smartmontools](#smartmontools)
  - [sensors](#sensors)
  - [badblocks](#badblocks)
  - [hdparm](#hdparm)
- [disk](#disk)
  - [parted](#parted)
  - [fdisk](#fdisk)
  - [sfdisk](#sfdisk)
  - [swap](#swap)
- [lvm](#lvm)
- [md](#md)
- [tgt](#tgt)
- [dd](#dd)
  - [backup](#backup)
  - [iso](#iso)
  - [rdiff](#rdiff)
- [users](#users)
  - [passwd](#passwd)
  - [chage](#chage)
  - [id](#id)
  - [usermod](#usermod)
  - [profile](#profile)
  - [bashrc](#bashrc-1)
  - [useradd](#useradd)
  - [adduser](#adduser)
- [chmod](#chmod)
  - [chown](#chown)
  - [groups](#groups)
  - [usermod](#usermod-1)
- [domain](#domain)
  - [realmd](#realmd)
  - [sssd](#sssd)
- [syslog](#syslog)
  - [server](#server)
  - [client](#client)
  - [zabbix-agent](#zabbix-agent)
  - [ommail](#ommail)
- [logrotate](#logrotate)
- [log](#log)
- [smb](#smb)
  - [cifs](#cifs)
  - [samba](#samba)
  - [client cifs](#client-cifs)
  - [client samba-client](#client-samba-client)
  - [recycle](#recycle)
- [nfs](#nfs)
  - [server](#server-1)
  - [client](#client-1)
- [ftp](#ftp)
  - [ftp client](#ftp-client)
  - [ftps](#ftps)
- [rsync](#rsync)
- [apache](#apache)
  - [api server](#api-server)
  - [status](#status)
  - [webdav](#webdav)

---

## bash

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

`text="(ip a)"` –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–µ–∫—Å—Ç \
`echo $text` \
`ipaddr=$(ip a)` –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã \
`echo $ipaddr` \
`echo '$ipaddr'` –≤ –æ–¥–∏–Ω–∞—Ä–Ω—ã—Ö –∫–∞–≤—ã—á–∫–∞—Ö –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö \
`var=$((5+5))` \
`echo $var` \
`read -p "Enter: " enter` —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
`echo $enter` \
`read -s -p "Enter password: " pass` –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è \
`echo $pass` \
`echo -e "text\ntext"` —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ \
`echo -e "# comment\nparam comment" > ~/test.txt` –∑–∞–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª \
`cat ~/test.txt | grep -v "^#"` –ø—Ä–æ—á–∏—Ç–∞—Ç—å –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏

`original_value="–≠—Ç–æ –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤."` \
`shortened_value="${original_value:0:50}"` –æ–±—Ä–µ–∑–∞–µ–º –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤

`true ; echo $?` –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ 0 (—É—Å–ø–µ—Ö) \
`false ; echo $?` –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ 1 (–æ—à–∏–±–∫–∞)

- –ú–∞—Å—Å–∏–≤—ã

`range={1..254}` —Å–æ–∑–¥–∞—Ç—å —Å—Ä–µ–∑ –æ—Ç 1 –¥–æ 254 \
`array=(1 2 3 4 5)` —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ \
`array=($(ls /))` –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `$(command)` —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª \
`echo ${array[@]}` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ–≥–æ –º–∞—Å—Å–∏–≤–∞ `@/*` \
`echo ${array[0]}` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–µ—Ä–≤—ã–π –∏–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ \
`echo ${array[-1]}` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–Ω–¥–µ–∫—Å \
`echo ${array[@]:1:3}` –≤—ã–≤–µ—Å—Ç–∏ 3 —ç–ª–µ–º–µ–Ω—Ç–∞ (—Å—Ä–µ–∑) \
`echo ${#array[@]}` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–ª-–≤–æ (`#`) —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ \
`echo ${#array[0]}` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–ª–∏–Ω–Ω—É (`#`) –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å—Å–∏–≤–µ \
`array[1]="22"` –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –Ω–æ–º–µ—Ä—É –∏–Ω–¥–µ–∫—Å–∞
```bash
declare -A dict=(
    ["key 1"]=1
    ["key 2"]="text"
)
echo ${dict[key 1]}
echo ${dict[key 2]}
```
- –¶–∏–∫–ª for
```bash
for ((i=1; i <= 10; i++)); do
    echo $i
done

array=($(ls /))
for arr in ${array[@]}; do
    echo $arr
done
```
`break` –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ü–∏–∫–ª \
`continue` –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∏–Ω—Ç–µ—Ä–∞—Ü–∏—é –≤ —Ü–∏–∫–ª–µ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π
```bash
array=(1 2 3 4 5)
for var in ${array[@]}; do
    if [ $var -gt 4 ]; then
        break
    elif [ $var -gt 3 ]; then
        echo "Last number: $var"
        continue
    fi
    echo "Number: $var"
done
```
- –¶–∏–∫–ª while
```bash
p=1
while [ $p -le 101 ]; do
    # –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ, –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ü–∏–∫–ª –≤ –±–ª–æ–∫–µ do, –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç –ª–æ–∂–Ω—ã–º
    echo "–ó–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π: $p"
    # ((p++)) # —É–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ +1
    # p=$(($p+10)) # –ø—Ä–∏–±–∞–≤–ª—è—Ç—å +10
    p+=0 # –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ –∫–æ–Ω–µ—Ü –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
done
```
- –ü–æ—Å—Ç—Ä–æ—á–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ pipe
```bash
num=0
ps | sed 1d | while read line; do
    ((num++)) # ((num+=1))
    echo "Line $num : $line"
done
```
- –£—Å–ª–æ–≤–∏—è

`if []`   –µ—Å–ª–∏ \
`then`    —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ \
`elif []` –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ \
`then`    –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ \
`else`    —É—Å–ª–æ–≤–∏–µ –ª–æ–∂–Ω–æ \
`fi`      –±–æ–ª—å—à–µ –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π

`-z`          —Å—Ç—Ä–æ–∫–∞ –ø—É—Å—Ç–∞ \
`-n`          —Å—Ç—Ä–æ–∫–∞ –Ω–µ –ø—É—Å—Ç–∞ \
`=, (==)`     —Å—Ç—Ä–æ–∫–∏ —Ä–∞–≤–Ω—ã \
`!=`          —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ä–∞–≤–Ω—ã \
`-eq`         —Ä–∞–≤–Ω–æ \
`-ne`         –Ω–µ—Ä–∞–≤–Ω–æ \
`-lt, (<)`    –º–µ–Ω—å—à–µ \
`-le, (<=)`   –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ \
`-gt, (>)`    –±–æ–ª—å—à–µ \
`-ge, (>=)`   –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ \
`!`           –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è \
`-a, (&&)`    –ª–æ–≥–∏—á–µ—Å–∫–æ–µ ¬´–∏¬ª (–ø–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –≤—Ç–æ—Ä–∞—è ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π) \
`-o, (||)`    –ª–æ–≥–∏—á–µ—Å–∫–æ–µ ¬´–∏–ª–∏¬ª (–ø–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –≤—Ç–æ—Ä–∞—è ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π)
```bash
if [[ -z "$variable" ]]; then
    echo "–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—É—Å—Ç–∞—è"
else
    echo "–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –ø—É—Å—Ç–∞—è"
fi
```
- –§—É–Ω–∫—Ü–∏–∏
```bash
function calc {
    if [ $2 = "+" ]
        then
        echo $(( $1 + $3 ))
    elif [ $2 = "-" ]
        then
        echo $(( $1 - $3 ))
    fi
}
```
`calc 3 + 2` \
`calc 3 - 2`

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

`nano script.sh`
```bash
#!/bin/bash
if [ -n "$1" -a "$2" ]; then
    echo –ò–º—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞: $0
    echo –ü–µ—Ä–≤—ã–π –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä: $1
    echo –í—Ç–æ—Ä–æ–π –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä $2
    echo –ö–æ–ª-–≤–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: $#
    echo –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: ${!#}
    echo –ú–∞—Å—Å–∏–≤: $@
else
    echo "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –∑–∞–¥–∞–Ω—ã"
fi
```
`chmod +x script.sh` —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º \
`bash script.sh 1 2 3 4 5` –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å–∫—Ä–∏–ø—Ç

`-e file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª \
`-d file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∏ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π \
`-f file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∏ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω —Ñ–∞–π–ª–æ–º \
`-r file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –æ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è \
`-w file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –æ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏ \
`-x file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∏ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º \
`-s file` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω –ø—É—Å—Ç—ã–º
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
path="/etc/*"
for folder in $path; do
    echo "$folder:"
    for file in $folder/*; do
        if [ -x $file ]; then
            echo "- $file"
        fi
    done
done
```
- case
```bash
read -rsn1 key
case $key in
  "1")
    echo –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –µ—Å–ª–∏ $key —Ä–∞–≤–Ω–æ 1 ;;
  "2")
    echo –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –µ—Å–ª–∏ $key —Ä–∞–≤–Ω–æ 2 ;;
  *)
    echo –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ $key –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∏ –æ–¥–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é
  ;;
esac
```
## filesystem

`file Console-Performance.sh` —É–∑–Ω–∞—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞ (—Ç–µ–∫—Å—Ç–æ–≤—ã–π, –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, –∞—Ä—Ö–∏–≤ –∏–ª–∏ –¥—Ä—É–≥–æ–π) \
`stat Console-Performance.sh` —É–∑–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤, –∑–∞–Ω—è—Ç—ã—Ö —Ñ–∞–π–ª–æ–º –Ω–∞ –¥–∏—Å–∫–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–µ—Å—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏  \
`pwd` —Ç–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è \
`ls -lh *` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ \
`ls -lhaF` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (-a) —Å —Ç–æ—á–∫–æ–π –∏ –≤—ã–¥–µ–ª–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (/) \
`which top` —É–∑–Ω–∞—Ç—å –ø—É—Ç—å –¥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ \
`stat $(which top)` —É–∑–Ω–∞—Ç—å –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É  \
`cat -n /etc/passwd` –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–æ–∫ \
`mkdir` —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é \
`mktemp -d` —Å–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª/–∫–∞—Ç–∞–ª–æ–≥ (-d) \
`touch -t 202106222200.15 test.file` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∏ —É–∫–∞–∑–∞—Ç—å –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è \
`cp test.file test.file2` –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–∞/–∫–∞—Ç–∞–ª–æ–≥ \
`mv test.file2 test.file3` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å/–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª/–∫–∞—Ç–∞–ª–æ–≥ \
`rm -r test.file` —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∞–π–ª–∞–º–∏ (-r)

### ln

`echo "test" > testfile` \
`ln /test/testfile /test/testlink` —Å–æ–∑–¥–∞—Ç—å –∂–µ—Å—Ç–∫—É (hard) —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ inode, —Ç.–µ. –æ–Ω–∏ –¥–µ–ª—è—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫–µ \
`rm testfile` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –∏–∑ —Ñ–∞–π–ª–æ–≤ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–¥–∞–ª–µ–Ω–∏—é —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∂–µ—Å—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞ \
`ln -s /test/testfile /test/testlink` —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é (-s - soft) —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä–∞—è —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ñ–∞–π–ª testfile \
`echo "test" >> testfile` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ testlink \
`rm testfile` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —É —Å—Å—ã–ª–∫–∏ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ (No such file or directory)

### zip

`rar a test.rar filename filename2` —Å–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤ test.rar –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç—É–¥–∞ –¥–≤–∞ —Ñ–∞–π–ª–∞ (—Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤) \
`unrar x test.rar` —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å \
`zip -r test.zip filename` –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (—Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤) \
`unzip test.zip` —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å \
`bzip2 filename` –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ filename.bz2 (—Ñ–∞–π–ª—ã –ø–µ—Ä–µ–ø–µ—â–∞—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤) \
`bunzip2 filename.bz2` —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å \
`gzip filename` –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ filename.gz (—Ñ–∞–π–ª—ã –ø–µ—Ä–µ–ø–µ—â–∞—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤) \
`tar --totals -cvf archive.tar file1 file2 file3` –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏ —Ñ–∞–π–ª–∞ \
`wget https://github.com/librespeed/speedtest-cli/releases/download/v1.0.10/librespeed-cli_1.0.10_linux_amd64.tar.gz` –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ö–∏–≤ \
`gunzip librespeed-cli_1.0.10_linux_amd64.tar.gz` –∏–∑–≤–ª–µ—á—å –∏–∑ gz –≤ tar \
`tar -tf librespeed-cli_1.0.10_linux_amd64.tar` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞ \
`tar -xvf librespeed-cli_1.0.10_linux_amd64.tar` —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å \
`./librespeed-cli --help` \
`./librespeed-cli --json`

### gpg

`gpg -c filename` –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ \
`gpg filename.gpg` —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ \
`gpg --gen-key` —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–∞—Ä—É –∫–ª—é—á–µ–π (–ø—É–±–ª–∏—á–Ω—ã–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á–∏) \
`gpg --export -a 'User Name' > publickey.asc` —ç–∫—Å–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ \
`gpg --import publickey.asc` –∏–º–ø–æ—Ä—Ç –Ω–∞ –≤—Ç–æ—Ä–æ–π —Å—Ç–æ—Ä–æ–Ω–µ \
`gpg --encrypt --recipient 'Recipient Name' filename` –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ —Å–º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ \
`gpg --decrypt encryptedfile.gpg` —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ \
`gpg --sign filename` –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏—Ö –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ \
`gpg --verify signedfile.gpg` –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

## api

### curl

`curl ifconfig.me` —É–∑–Ω–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π ip \
`curl -v telnet://192.168.3.100:22` –ø—Ä–≤–æ–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–º—É –æ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç \
`curl -s -o /dev/null http://google.com` –ø–æ–¥–∞–≤–∏—Ç—å –≤–µ—Å—å –≤—ã–≤–æ–¥ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É --silent –∏ --output) \
`curl -s -o /dev/null --show-error --fail http://google.com` –æ—Å—Ç–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫ \
`curl http://192.168.3.101:8081/api/ --connect-timeout 5` –∑–∞–¥–∞—Ç—å timeout –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö \
`curl -IL https://github.com/Lifailon/hwstat/archive/refs/tags/hwstat-0.0.8.zip` –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ –ø–µ—Ä–µ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º (--head/--location) \
`curl -O https://raw.githubusercontent.com/Lifailon/hwstat/rsa/hwstat.sh` —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª \
`curl -o /tmp/hwstat.sh https://raw.githubusercontent.com/Lifailon/hwstat/rsa/hwstat.sh` —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å \
`curl -Ik https://192.168.3.104:9443/` –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ SSL (--insecure) \
`curl -u <user:password> https://test.com/endpoint` –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è \
`curl -x "http://Proxy:Proxy@192.168.3.100:9090" "https://kinozal.tv/rss.xml"` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Proxy-—Å–µ—Ä–≤–µ—Ä \
`curl --insecure --ssl-reqd "smtps://smtp.yandex.ru" --mail-from "src@yandex.ru" --mail-rcpt "dst@yandex.ru" --user "src@yandex.ru" --upload-file out.txt` –æ—Ç–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ SMTPS (SMTP over SSL/TLS) —Å–µ—Ä–≤–µ—Ä 

### influxdb
```bash
ip="192.168.3.104"
db="dbash"
table="icmp_metrics_table"
server="google.com"
host=$(hostname)
date=$(echo $EPOCHREALTIME | sed -E "s/\..+//")"000000000"
ping=$(ping $server -c 1)
loss=$(printf "%s\n" "${ping[@]}" | grep -Eo "[0-9]+%" | sed "s/%//")
if (( $(echo "$loss != 100" | bc) )); then
    status="true"
    rtt=$(printf "%s\n" "${ping[@]}" | grep rtt | awk -F"/" '{print $5}')
else
    status="false"
    rtt="0"
fi
curl -i -XPOST "http://$ip:8086/write?db=$db" --data-binary "$table,host=$host,server=$server status=$status,rtt=$rtt $date"
```
### wget

`wget --spider https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å (--spider) —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å URL –∏ —É–∑–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (Length) \
`wget -O nextcloud.tar.bz2 https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2` —Å–∫–∞—á–∞—Ç—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º (-O)  \
`wget -P /tmp https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2` —Å–∫–∞—á–∞—Ç—å –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (-P) \
`wget -b -o ~/wget.log https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2` –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (-b) –∏ –∑–∞–ø–∏—Å–∞—Ç—å –≤—ã–≤–æ–¥ –≤ –ª–æ–≥-—Ñ–∞–π–ª (-o)

### curlie

`curl -sS https://webinstall.dev/curlie | bash` –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ curl –∏ httpie (https://github.com/rs/curlie) \
`curlie get https://jsonplaceholder.typicode.com/posts` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∏ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ JSON \
`curlie get https://jsonplaceholder.typicode.com/posts/1` \
`curlie get https://jsonplaceholder.typicode.com/posts -H "Authorization: Bearer YOUR_TOKEN"` \
`curlie post https://jsonplaceholder.typicode.com/posts -d '{"title": "foo", "body": "bar", "userId": 1}'`

### httpie

`sudo snap install httpie` HTTP-–∫–ª–∏–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (https://github.com/httpie/cli) \
`https httpie.io/hello` \
`https POST pie.dev/post X-API-Token:123 name=John`

## json

### jq

`apt install jq` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jq (https://github.com/jqlang/jq) \
`nodes=$(curl -s -H "Accept: application/json" https://check-host.net/nodes/ips)` –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ node \
`echo $nodes | jq` –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–æ–π jq (–≤—ã–≤–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∞ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ü–≤–µ—Ç–æ–º) \
`echo $nodes | jq '.nodes | length'` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—á–µ—Ä–Ω–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –±–ª–æ–∫–µ node[] \
`echo $nodes | jq -r .nodes[1]` –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º–∞—Å—Å–∏–≤–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ raw string (not JSON) \
`echo $nodes | jq -r .nodes[-1]` –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º–∞—Å—Å–∏–≤–∞ \
`hosts=$(curl -s -H "Accept: application/json" https://check-host.net/nodes/hosts)` –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤ \
`echo $hosts | jq -r '.nodes | to_entries[].key'` –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π (–∞–¥—Ä–µ—Å–∞ —Ö–æ—Å—Ç–æ–≤) –∏–∑ –æ–±—ä–µ–∫–∞ (–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º) \
`echo $hosts | jq -r '.nodes | to_entries[].value'` –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –≤–ª–æ–∂–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π \
`echo $hosts | jq '.nodes."bg1.node.check-host.net"'` –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –∫–ª—é—á–∞ nodes –ø–æ –∏–º–µ–Ω–∏ \
`echo $hosts | jq '.nodes | [.[]] | last'` –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ nodes –≤ –º–∞—Å—Å–∏–≤, –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é last –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ \
`echo $hosts | jq '.nodes | to_entries[].value.location[0] == "ru"'` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ–±—ä–µ–∫—Ç–∞ –≤ —É—Å–ª–æ–≤–∏–∏ –Ω–∞ true/false (–≤–µ—Ä–Ω–µ—Ç –º–∞—Å—Å–∏–≤) \
`echo $hosts | jq '.nodes | to_entries[] | {Host: .key, Country: .value.location[1], City: .value.location[2]}'` –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ key-value –∏–∑ –æ–±—ä–µ–∫—Ç–∞ nodes –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∫–ª—é—á–µ–π \
`echo $hosts | jq -r '.nodes | to_entries[] | "\(.key) (\(.value.location[1]), \(.value.location[2]))"'` —Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫–∏ –∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–ª—é—á–µ–π \
`var="-" && echo $hosts | jq --arg v "$var" -r '.nodes | to_entries[] | "\(.key) \($v) \(.value.location[1]) \($v) \(.value.location[2])"'` –ø–µ—Ä–µ–¥–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞ \
`echo $hosts | jq -r '.nodes | to_entries[] | select(.value.location[0] == "ru") | .key'` –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (select), —á—Ç–æ –±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã \
`echo $hosts | jq '.nodes | to_entries[] | select(.value.location[0] != "ru") | .key'` –≤—ã–≤–µ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–∞–≤–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—é \
`echo $hosts | jq '.nodes | length'` –≤—ã–≤–µ—Å—Ç–∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ \
`echo $hosts | jq '.nodes | to_entries | map(select(.value.location[0] != "ru")) | length'` —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ñ—É–Ω–∫—Ü–∏–µ–π map() (–æ–±—ä–µ–¥–µ–Ω—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã {}{} –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤ [{},{}]) —Ç–æ–ª—å–∫–æ –∏–∑ —Ç–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —É—Å–ª–æ–≤–∏—é select() –∏ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ \
`echo $hosts | jq -r '.nodes | to_entries[] | select(.value.location[0] == "ru" or .value.location[0] == "tr") | .key'` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–≤–∞ —É—Å–ª–æ–≤–∏—è —á–µ—Ä–µ–∑ or –∏–ª–∏ and (–¥–ª—è –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö int –∫–∞–≤—ã—á–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è) \
`echo $hosts | jq -r '.nodes | to_entries[] | select(.key | index("jp")) | .key'` –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ö–æ—Å—Ç–æ–≤ —Ä–µ–≥–∏–æ–Ω–∞ Japan, –∫–æ—Ç–æ—Ä—ã–µ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–ª—é—á–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ jp (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏)
```bash
host="yandex.ru"
protocol="ping"
host="yandex.ru:443"
protocol="tcp" # udp/http/dns
# –ó–∞–±—Ä–∞—Ç—å id –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
check_id=$(curl -s -H "Accept: application/json" "https://check-host.net/check-$protocol?host=$host&max_nodes=3" | jq -r .request_id)
# –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ id
function check-result {
    curl -s -H "Accept: application/json" https://check-host.net/check-result/$1 | jq .
}
# –ü–æ–ª—É—á–∏—Ç—å —Å—É–º–º–∞—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–æ—Å—Ç–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞
hosts_length=$(check-result $check_id | jq length)
while true; do
    check_result=$(check-result $check_id)
    # –ó–∞–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø—Ä–æ–≤–µ—Ä–µ–º, —á—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–µ —Ä–∞–≤–Ω—ã null
    check_values_not_null=$(echo $check_result | jq -e 'to_entries | map(select(.value != null)) | length')
    if [[ $check_values_not_null == $hosts_length ]]; then
        echo $check_result | jq
        break
    fi
    sleep 1
done
```
`echo '{"iso": [{"name": "Ubuntu", "size": 4253212899}, {"name": "Debian", "size": 3221225472}]}' | jq '.iso[] | {name: .name, size: (.size / 1024 / 1024 / 1024 | tonumber * 100 | floor / 100 | tostring + " GB")}'` –ø–æ–ª—É—á–∏—Ç—å –ì–ë –∏–∑ –±–∞–π—Ç –∏ –æ–∫—Ä—É–≥–ª–∏—Ç—å –≤—ã–≤–æ–¥ –¥–æ 2 —Å–∏–º–≤–æ–ª–æ–º –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π \
`echo '{"iso": [{"name": "Ubuntu", "progress": 0.333}]}' | jq '.iso[] | {name: .name, progress: (.progress * 100 | floor / 100 * 100 | tostring + " %")}'` –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏ (33%) \
`echo '[{"name": "Ubuntu", "added_on": 1625072400}, {"name": "Debian", "added_on": 1625158800}]' | jq '.[] | {name: .name, date: (.added_on + 3 * 3600 | strftime("%H:%M:%S %d.%m.%Y"))}'` –ø–æ–ª—É—á–∏—Ç—å –¥–∞—Ç—É

### netcheck
```bash
sudo curl -s https://raw.githubusercontent.com/Lifailon/Check-Host/rsa/netcheck/netcheck.sh -o /usr/bin/netcheck
sudo chmod +x /usr/bin/netcheck
```
`netcheck -t ping yandex.ru` \
`netcheck -n` \
`netcheck -t ping yandex.ru ru1.node.check-host.net` \
`netcheck -t dns yandex.ru` \
`netcheck -t http yandex.ru:443 5` \
`netcheck -t tcp yandex.ru:443`

### jc

`apt install jc` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jc (https://github.com/kellyjonbrazil/jc) –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—ã–≤–æ–¥–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ –∏ –æ–±—â–∏—Ö —Å—Ç—Ä–æ–∫ –≤ JSON, YAML –∏–ª–∏ —Å–ª–æ–≤–∞—Ä–∏ Python, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—ã–≤–æ–¥ –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ jq \
`dig google.com | jc --dig` \
`dig example.com | jc --dig | jq -r '.[].answer[].data'` \
`jc --pretty /proc/meminfo` \
`systemctl list-units --all --plain --no-legend --no-pager | jc --systemctl -p`

### brew
```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
echo 'eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"' >> ~/.profile`
source ~/.profile
brew --version
```
### fx

`brew install fx || snap install fx` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fx (https://github.com/antonmedv/fx) TUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è JSON –Ω–∞ GoLang \
`hosts=$(curl -s -H "Accept: application/json" https://check-host.net/nodes/hosts)` \
`echo $hosts | fx` –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º –±–ª–æ–∫–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è jq \
`source <(fx --comp bash)` –¥–æ–±–∞–≤–∏—Ç—å autocomplete –≤ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä bash \
`echo $hosts > hosts.json` \
`fx hosts.json .nodes .\[\"ru1.node.check-host.net\"\] .ip` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –∫–ª—é—á–µ–π –∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞

### jid

`brew install jid` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jid (https://github.com/simeji/jid) –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ JSON –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞ GoLang \
`echo '{"info":{"date":"2016-10-23","version":1.0},"users":[{"name":"simeji","uri":"https://github.com/simeji","id":1},{"name":"simeji2","uri":"https://example.com/simeji","id":2},{"name":"simeji3","uri":"https://example.com/simeji3","id":3}],"userCount":3}}' | jid` .users[1].uri

### jqp

`brew install noahgorstein/tap/jqp` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jqp (https://github.com/noahgorstein/jqp) TUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è jq –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ GoLang \
`curl -s https://api.github.com/repos/Lifailon/PS-Commands/contents | jqp` —Å–ª–µ–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª, —Å–ø—Ä–∞–≤–∞ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ \
`curl -s https://check-host.net/nodes/hosts | jqp` # –ø—Ä–∏–º–µ—Ä –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: `.nodes | to_entries[] | select(.value.location[0] == "ru") | .key`

### xmllint

`apt-get install libxml2-utils || snap install libxml2 || brew install libxml2` \
`curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xmllint --xpath '//rss/channel/item/link/text()' -` \
`curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xmllint --xpath '//rss/channel/item[1]/link/text()' -`

### dasel

`brew install dasel` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dasel (https://github.com/TomWright/dasel) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON, YAML, TOML, XML –∏ CSV (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏) –Ω–∞ GoLang \
`echo '{"name": "Tom"}' | dasel -r json 'name'` \
`echo '{"name": "Tom"}' | dasel -r json -w yaml` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å json –≤ yaml \
`echo '{"name": "Tom"}' | dasel -r json -w xml` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å json –≤ xml \
`echo '{"name": "Tom"}' | dasel put -r json -t string -v 'contact@tomwright.me' 'email'` –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ \
`echo '{"email": "contact@tomwright.me","name": "Tom"}' | dasel delete -r json '.email'` —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ
```json
tee users.json <<EOF
{
    "users": [
      {
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "email": "ivan.ivanov@example.com"
      },
      {
        "name": "–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞",
        "email": "maria.petrova@example.com"
      }
    ]
}
EOF
```
`dasel -f users.json -r json ".users.[0].email"`
```yaml
tee users.yaml <<EOF
users:
  - name: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
    email: ivan.ivanov@example.com
  - name: –ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞
    email: maria.petrova@example.com
EOF
```
`dasel -f users.yaml -r yaml ".users.[1].email"`
```toml
tee users.toml <<EOF
[[users]]
name = "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
email = "ivan.ivanov@example.com"
[[users]]
name = "–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞"
email = "maria.petrova@example.com"
EOF
```
`dasel -f users.toml -r toml ".users.[1].email"`
```xml
tee users.xml <<EOF
<users>
  <user>
    <name>–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</name>
    <email>ivan.ivanov@example.com</email>
  </user>
  <user>
    <name>–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞</name>
    <email>maria.petrova@example.com</email>
  </user>
</users>
EOF
```
`dasel -f users.xml -r xml ".users.user.[0].email"`

### xq

`apt-get install xq || brew install xq` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å xq (https://github.com/sibprogrammer/xq) –¥–ª—è XML –∏ HTML –Ω–∞ GoLang \
`curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xq -nx /rss/channel/item` –≤—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ–≥–∞–º–∏ \
`curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xq -x /rss/channel/item/link` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–º–∞—Å—Å–∏–≤ —Å—Å—ã–ª–æ–∫) \
`curl -s https://kinozal.tv -x kinozal:proxy@192.168.3.100:9090 | xq -nq "head"` –≤—ã–≤–µ—Å—Ç–∏ –±–ª–æ–∫ head —Ü–µ–ª–∏–∫–æ–º (—Å —Ç–µ–≥–∞–º–∏) \
`curl -s https://kinozal.tv -x kinozal:proxy@192.168.3.100:9090 | xq -q "head"` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞ (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ title) \
`curl -s https://kinozal.tv/browse.php?s=the+rookie -x kinozal:proxy@192.168.3.100:9090 | xq -nq "body > div > div > div > div > table > tbody > tr > td"` \
`curl -s -X POST -u "Login:Password" "http://localhost:9091/transmission/rpc" | xq -q a -a href` –∑–∞–±—Ä–∞—Ç—å X-Transmission-Session-Id –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç—ç–≥—É a –∏ –∞—Ç—Ä–∏–±—É—Ç—É href)

### htmlq

`brew install htmlq` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å htmlq (https://github.com/mgdm/htmlq) like jq for HTML \
`curl -s https://kinozal.tv/browse.php?s=the+rookie -x kinozal:proxy@192.168.3.100:9090 | htmlq table tr td a -t` –ø–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–ª–∏—Ü—ã (–≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ) \
`curl -s https://kinozal.tv/browse.php?s=the+rookie -x kinozal:proxy@192.168.3.100:9090 | htmlq table tr td a -a href` –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏ \
`curl -s -X POST -u "Login:Password" "http://localhost:9091/transmission/rpc" | htmlq a -a href` –∑–∞–±—Ä–∞—Ç—å X-Transmission-Session-Id –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç—ç–≥—É a –∏ –∞—Ç—Ä–∏–±—É—Ç—É href)

### yq

`snap install yq` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å yq (https://github.com/mikefarah/yq) –¥–ª—è YAML, JSON, XML, CSV –∏ TOML \
`cat /etc/netplan/*.yaml | yq .network.ethernets` —Å–ø–∏—Å–æ–∫ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ netplan \
`cat /etc/netplan/*.yaml | yq .network.ethernets.eth0.nameservers.addresses[]` –≤—ã–≤–µ—Å—Ç–∏ –º–∞—Å—Å–∏–≤ dns –∞–¥—Ä–µ—Å–æ–≤, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –Ω–∞ –∞–¥–∞–ø—Ç–µ—Ä–µ \
`curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | yq -p xml .rss.channel.item[1].link` –≤—ã–≤–µ—Å—Ç–∏ —Å—Å—ã–ª–∫—É –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ \
`curl -s https://raw.githubusercontent.com/JingWangTW/dark-theme-editor/main/hugo.toml | yq -p toml .params.footer.socialLink` –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Hugo

### yamllint

`apt install yamllint` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å yamllint (https://github.com/adrienverge/yamllint) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∏ YAML-—Ñ–∞–π–ª–∞ \
`yamllint /etc/netplan/*.yaml`

### jsonlint

`apt-get install -y nodejs` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js \
`npm install jsonlint -g` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jsonlint (https://github.com/zaach/jsonlint) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ JSON \
`echo '{"name":"example","value":"test",}' | jsonlint` \
`echo '{"name":"example","value":"test"}' | jsonlint`

### csv

`brew install csvlens` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å csvlens (https://github.com/YS-L/csvlens) –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ—Å—Ç–∏—è –≤ csv —á–µ—Ä–µ–∑ TUR –Ω–∞ Rust \
`pwsh -Command "Get-Process | ConvertTo-Csv | Out-File process.csv"` \
`csvlens process.csv`

### sttr

`snap install sttr` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å sttr (https://github.com/abhimanyu003/sttr) –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—ã –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ GoLang \
`curl -s curl -s -H "Accept: application/json" https://check-host.net/nodes/hosts | sttr json-yaml` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å JSON –≤ YAML \
`cat /etc/netplan/*.yaml | sttr yaml-json | jq` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å YAML –≤ JSON \
`curl -s https://raw.githubusercontent.com/Lifailon/hwstat/rsa/README.md | sttr markdown-html` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Markdown –≤ HTML \
`echo "test" | sttr hex-encode` –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤ HEX —Ñ–æ—Ä–º–∞—Ç \
`echo "74657374" | sttr hex-decode` –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å HEX \
`echo "Test" | sttr upper` –ø–æ–¥–Ω—è—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (TEST) \
`echo "Test" | sttr lower` –æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (test) \
`echo -e "test1\ntest1\ntest2" | sttr unique-lines` –ø–æ–ª—É—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ \
`echo -e "a\nz\nb" | sttr sort-lines` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É \
`echo -e "test1 \ntest2" | sttr remove-newlines` —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ \
`echo -e "test1\ntest2" | sttr count-chars` –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ \
`echo -e "test1\ntest2" | sttr count-lines` –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫

## grep

`cat /var/log/auth.log | grep sshd` –ª–æ–≥–∏ –≤—Å–µ—Ö SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π \
`cat /etc/passwd | grep -w sys` –ø–æ–∏—Å–∫ —Ü–µ–ª–æ–≥–æ —Å–ª–æ–≤–∞, –æ–∫—Ä—É–∂–µ–Ω–Ω–æ–µ –ø—Ä–æ–±–µ–ª–∞–º–∏ (`-w`) \
`cat /etc/ssh/sshd_config | grep -win port` –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (`-i`) –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ (`-n`) \
`ss -n | grep -P ":22|:80|:443|:8080"` –∏—Å–∫–∞—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —à–∞–±–ª–æ–Ω–∞–º, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Regex (`-E`) \
`ss -n | grep -Pc ":22|:80"` –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª-–≤–æ (`--count`) —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π \
`ss -n | grep "192.168.3...:"` –ø–æ–∏—Å–∫ –ª—é–±—ã—Ö –¥–≤—É—Ö —Å–∏–º–≤–æ–ª–æ–≤ (`.`) \
`ss -n | grep "192.168.3.*:"` –ø–æ–∏—Å–∫ –ª—é–±–æ–≥–æ –∫–æ–ª-–≤–∞ (`*`) \
`cat /etc/ssh/sshd_config | grep -v "#"` –≤—ã–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞ (`-v`) \
`cat /etc/zabbix/zabbix_agentd.conf | grep -v "^#"` –æ—Ç—Å–µ–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ (`^`) \
`cat /etc/zabbix/zabbix_agentd.conf | grep "=$"` –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—á–∞—é—Ç—Å—è `$` –Ω–∞ —Å–∏–º–≤–æ–ª `=` (–ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã) \
`cat /etc/zabbix/zabbix_agentd.conf | grep -Pv "^$|^#"` —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ `^$` –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (`^#`) \
`cat /etc/zabbix/zabbix_agentd.conf | grep -E "#+{5}"` —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ (`-E`), –≥–¥–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª `#` –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 5 –∏–ª–∏ –±–æ–ª–µ–µ —Ä–∞–∑ \
`echo -e "Test\ntest\n123-45" | grep -E "[a-zA-Z\-]"` –∏—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç (–≥–¥–µ –µ—Å—Ç—å –±—É–∫–≤—ã –∏ —Ç–∏—Ä–µ) \
`echo 'test<version>1.2.3</version>test' | grep -P -o "(?<=<version>).*(?=</version>)"` –Ω–∞–π—Ç–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (`.*`) –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∏ –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–µ (`-o`) \
`echo "test<version>3.6.4</version>test" | grep -Eo '[0-9.]+'` –Ω–∞–π—Ç–∏ –ª—é–±—É—é —Ü–∏—Ñ—Ä—É –∏ —Ç–æ—á–∫—É –Ω–∞ –∫–æ–Ω—Ü–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –ª—é–±–æ–µ –∫–æ–ª-–≤–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ \
`echo $(lshw -class bus) | grep -P -o "(?<=Motherboard product: ).*(?=serial)"` —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (`-P`) \
`zabbix_path=$(systemctl status zabbix-agent | grep -Po "(?<=-c ).*(?=.conf)" | sed "s/$/.conf/")` –∑–∞–±—Ä–∞—Ç—å –ø—É—Ç—å –¥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ Zabbix –∞–≥–µ–Ω—Ç–∞ \
`cat $zabbix_path | grep -E "^Server=|^ServerActive="` –Ω–∞–π—Ç–∏ –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ \
`cat $zabbix_path | grep -Po "(?<=^Server=).+"` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ \
`resolvectl | grep "DNS Servers" -m 1` –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (`-m int`) \
`networkctl status | grep -A 3 "DNS:"` –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ—Å–ª–µ –Ω–µ–µ (`-A`) \
`networkctl status | grep -B 3 "DNS:"` –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ –¥–æ –Ω–µ–µ (`-B`) \
`networkctl status | grep -C 1 "DNS:"` –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫–∏ –¥–æ –Ω–µ–µ –∏ –æ–¥–Ω—É –ø–æ—Å–ª–µ (`-C`) \
`resolvectl | grep -Ex ".+DNS Servers:.+"` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏ —Å —Ç–æ—á–Ω—ã–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (`-x/like`), —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —Å—Ç—Ä–æ–∫–∏ \
`if echo "GET" | grep -Eq "^GET"; then echo da; else echo net; fi` –ø–æ–¥–∞–≤–ª—è—Ç—å –≤—ã–≤–æ–¥ (`-q`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏—è \
`curl https://api.github.com/repos/PowerShell/PowerShell/releases/latest | grep -Eom 1 "https://.+.deb"` –∑–∞–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–æ–¥ –ø–æ–∏—Å–∫

### ripgrep

`apt-get install ripgrep` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [ripgrep](https://github.com/BurntSushi/ripgrep), –∞–Ω–∞–ª–æ–≥ grep –Ω–∞ Rust \
`cat /var/log/auth.log | rg sshd` –≤—ã–≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª –ª–æ–≥–æ–≤ –∞—É–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é \
`cat /var/log/auth.log | rg "Accepted password for \w+ from \d+\.\d+\.\d+\.\d+"` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ —É–∫–∞–∑–∞–Ω–æ `Accepted password for`, –¥–∞–ª–µ–µ –ª—é–±–æ–µ —Å–ª–æ–≤–æ (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) –∏ IP-–∞–¥—Ä–µ—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ x.x.x.x \
`cat /var/log/auth.log | rg "user \w+\(uid=\d+\)"` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏ —Å —Ç–µ–∫—Å—Ç–æ–º user, –∑–∞—Ç–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª—é–±–æ–µ —Å–ª–æ–≤–æ), –∏ –¥–∞–ª–µ–µ `uid` —Å —á–∏—Å–ª–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤ —Å–∫–æ–±–∫–∞—Ö \
`cat /var/log/auth.log | rg "192\.168\.\d+\.\d+"` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –ø–µ—Ä–≤—ã–µ –¥–≤–∞ –æ–∫—Ç–µ—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç `192.168` \
`cat /var/log/auth.log | rg "sshd\[\d+\]: .* port \d+"` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ sshd —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ—Ü–µ—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sshd[4188420]`), –∞ –∑–∞—Ç–µ–º —Ç–µ–∫—Å—Ç `port` –∏ –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ \
`cat /var/log/auth.log | rg "\b12:\d{2}:\d{2}\b"` —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 —á–∞—Å–æ–≤ (–≤—Ä–µ–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `12:`, –∑–∞—Ç–µ–º –¥–≤–µ —Ü–∏—Ñ—Ä—ã –¥–ª—è –º–∏–Ω—É—Ç –∏ –¥–≤–µ –¥–ª—è —Å–µ–∫—É–Ω–¥)

### rga

`apt install ripgrep fzf pandoc ffmpeg poppler-utils` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ \
`brew install rga` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [ripgrep-all](https://github.com/phiresky/ripgrep-all) –∏ `rga-fzf` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ —Ñ–∞–π–ª–∞—Ö –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É \
`rga-fzf token` –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `token` –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö 
`rga "fatal" /var/log/syslog*` –ø–æ–∏—Å–∫ —Å—Ç—Ä–æ–∫ –ø–æ —Å–ª–æ–≤—É `fatal` –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö syslog (–≤–∫–ª—é—á–∞—è –∞—Ä—Ö–∏–≤–Ω—ã–µ)

### sig

`brew install ynqa/tap/sigrs` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [sig](https://github.com/ynqa/sig) –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π `grep` –Ω–∞ Rust \
`curl -s https://raw.githubusercontent.com/Lifailon/hwstat/rsa/README.md > README.md` \
`cat README.md |& sig -a`

## sed

`cat /etc/passwd | sed -n "1,5p"` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å –ø–µ—Ä–≤–æ–π –ø–æ –ø—è—Ç—É—é —Å—Ç—Ä–æ–∫—É (`p`) \
`cat /etc/passwd | sed "$ d"` —É–¥–∞–ª–∏—Ç—å (`d`) –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–æ–∫—É \
`cat /etc/passwd | sed "1,3d"` —É–¥–∞–ª–∏—Ç—å c –ø–µ—Ä–≤–æ–π –ø–æ —Ç—Ä–µ—Ç—å—é —Å—Ç—Ä–æ–∫—É (`2,3d`) \
`echo "One 1" | sed "s/One/Two/; s/1/2/"` –∑–∞–º–µ–Ω–∏—Ç—å One –Ω–∞ Two –∏ 1 –Ω–∞ 2 \
`cat /etc/zabbix/zabbix_agentd.conf | sed "s/127.0.0.1/192.168.3.102/" #  > /etc/zabbix/zabbix_agentd.conf` –∑–∞–º–µ–Ω–∏—Ç—å (`s`) ip-–∞–¥—Ä–µ—Å \
`cat /etc/zabbix/zabbix_agentd.conf | sed "/^#\|^$/d"` —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ `^$` –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ `^#` \
`timedatectl | grep zone | sed -E "s/.+zone: //"` —É–¥–∞–ª–∏—Ç—å –ª—é–±–æ–µ –∫–æ–ª-–≤–æ –ª–∏–º–≤–æ–ª–æ–≤ –¥–æ —Å–ª–æ–≤–∞ "zone: " –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è Regex (`-E/-r`) \
`echo -e "test\ntest" | sed "2s/test/test2/"` –∑–∞–º–µ–Ω–∏—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–µ (`2s`) \
`echo -e "test\ntest\ntest\ntest" | sed "2,3s/test/test2/"` –∑–∞–º–µ–Ω–∏—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π –∏ —Ç—Ä–µ—Ç–µ–π —Å—Ç—Ä–æ–∫–µ (`2,3s`) \
`echo -e "test\ntest\ntest\ntest" | sed "2ctest2"` –∑–∞–º–µ–Ω–∏—Ç—å –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ–∫—É (`2c`) \
`echo "The test and test" | sed "s/test/test2/g"` –∑–∞–º–µ–Ω–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (`/global`) \
`echo "The test and test" | sed "s/test/test2/2"` –∑–∞–º–µ–Ω–∏—Ç—å –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (`/2`) \
`echo "line2" | sed "i\line1"` –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –Ω–∞—á–∞–ª–æ (`i`) \
`echo "line1" | sed "a\line2"` –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–Ω–µ—Ü (`a`) –∏–ª–∏ –≤ –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (`2a`) \
`echo "11 22 33 34" | sed "y/123/234/"` –∑–∞–º–µ–Ω–∏—Ç—å 1 –Ω–∞ 2, 2 –Ω–∞ 3, 3 –Ω–∞ 4 (`y`) \
`ls -R | grep ':' | sed "s/:$//; s/[^\/]*\// - /g"` —É–¥–∞–ª–∏—Ç—å `:` –≤ –∫–æ–Ω—Ü–µ –∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤–Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ `"/–ª—é–±–æ–µ –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –º–µ–∂–¥—É/"` –Ω–∞ `" - "` –¥–ª—è –≤—Å–µ—Ö (`/g` global) \
`echo "test<version>3.6.4</version>test" | sed -r 's/[^<]*<(.*)>.*/\1/;s/<.*//;s/.*>//'` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å regex (`-r`) \
`ps aux | grep -E "^zabbix .+ -c" | sed -E "s/^zabbix.+-c //"` –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å zabbix —Å –∫–ª—é—á–µ–º `-c` –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Ç—å `conf` \
`echo "MPEG-H HEVC, 88.5 –ú–±–∏—Ç/—Å, 3840x2160, 23.976 –∫–∞–¥—Ä/—Å, 10 –±–∏—Ç" | sed -nr 's/.* ([0-9]+x[0-9]+).*/\1/p'` –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (`-n`) —Å –∑–∞–º–µ–Ω–æ–π (`s/`), –∏—â–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã `[0-9]` –≥–¥–µ –æ–¥–Ω–æ –∏–ª–∏ –±–æ–ª–µ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–π (`+`) –∏ –º–µ–∂–¥—É –Ω–∏–º–∏ `x`, –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É –ø–æ–∏—Å–∫–∞ (—Ç–æ, —á—Ç–æ –≤ —Å–∫–æ–±–∫–∞—Ö) –Ω–∞ –ø–µ—á–∞—Ç—å (`/p`)

## awk

`cat /etc/passwd | awk -F: '{print "name: " $1 " \t Dir: " $NF}'` –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ `$NF` —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å—Ç—Ä–æ–∫–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ":" –∏ —Ç–∞–±—É–ª—è—Ü–∏—é (\t) \
`echo 'one two three four' | awk '{print $(NF-1)}'` –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–µ–ø–æ–¥—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ \
`echo 'one two three four five' | awk '{print $((NF/2)+1)}'` –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —Å–µ—Ä–µ–¥–∏–Ω—ã \
`echo "One Two Three" | awk '{$3="Four"; print $0}'` –∑–∞–º–µ–Ω–∏—Ç—å —Ç—Ä–µ—Ç—å–µ –∑–Ω–∞—á–µ–Ω–∏–µ/–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ —Å—Ç—Ä–æ–∫–µ \
`cat /etc/passwd | awk 'BEGIN{FS=":"; OFS=" - "} {print $1,$7}'` —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ—Å–ª–µ–π (—ç–ª–µ–º–µ–Ω—Ç–æ–≤) –Ω–∞ –≤—Ö–æ–¥ (`FS`) –∏ –∑–∞–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ (`OFS`) \
`uptime | awk 'BEGIN{RS=" "; ORS="\n"} {print $0}'` —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –∑–∞–ø–∏—Å–µ–π (—Å—Ç—Ä–æ–∫) –Ω–∞ –≤—Ö–æ–¥–µ (`RS`) –∏ –∑–∞–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ (`ORS`) \
`echo -e "12345\n54321" | awk 'BEGIN{FIELDWIDTHS="2 3"}{print $1,$2}'` —É–∫–∞–∑–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è \
`lsof | awk '{if($7=="REG")print $0}'` —É—Å–ª–æ–≤–∏–µ –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –ø–æ —Å—Ç–æ–ª–±—Ü—É \
`cat /etc/ssh/sshd_config | awk '/Port / {print $2}'` —É—Å–ª–æ–≤–∏–µ –ø–æ–∏—Å–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ \
`cat /etc/ssh/sshd_config | awk 'length $0 > 1'` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–ª–∏–Ω–Ω–µ–µ, —á–µ–º 1 —Å–∏–º–≤–æ–ª (—É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏) \
`cat /var/log/syslog | grep "$date" | awk '{print length($6)}'` –≤—ã–≤–µ—Å—Ç–∏ –¥–ª–∏–Ω–Ω—É –∑–Ω–∞—á–µ–Ω–∏—è \
`awk 'BEGIN{x = "low"; print toupper(x)}'` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –≤–≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä \
`awk 'BEGIN{x = "LOW"; print tolower(x)}'` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä \
`echo "1 2 3 4:5:6" | awk '{item=$4; split(item,array,":"); print array[2]}'` —Ä–∞–∑–±–∏—Ç—å 4 –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –º–∞—Å—Å–∏–≤ (–∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `split`) –∏ –∑–∞–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ 2-–º—É –∏–Ω–¥–µ–∫—Å—É \
`free | awk '{if (NR == 2) print $0}'` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ–∫—É \
`free | awk '{if (NR >= 2) print $0}'` –≤—ã–≤–µ—Å—Ç–∏ –≤—Ç—Ä–æ—É—é –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ \
`free | awk '{if (NF >= 5) print $0}'` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ 5 –∏–ª–∏ –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–π \
`cat /etc/passwd | awk '{ if (NR >= 10 && NR <= 20) print $0}'` –≤—ã–≤–µ—Å—Ç–∏ —Å 10 –ø–æ 20 —Å—Ç—Ä–æ–∫–∏ \
`last | sed -n 1p | awk '$2=" ",$4=" "{print $0}'` –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ, –∫—Ä–æ–º–µ 2 –∏ 4 –∑–Ω–∞—á–µ–Ω–∏—è (–∑–∞–º–µ–Ω–∏—Ç—å) \
`ps -A | awk '{sum=""; for(i=1;i<=NF;i++) { if (i != 2) {sum=sum" "$i} } print sum}'` –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ, –∫—Ä–æ–º–µ 2-–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

`cut -d',' -f2,4 file.csv` –≤–∑—è—Ç—å –≤—Ç–æ—Ä–æ–π –∏ —á–µ—Ç–≤–µ—Ä—Ç—ã–π —Å—Ç–æ–ª–±—Ü—ã \
`awk -F',' '{if (NF >= 4) print $2, $4}' file.csv`

`grep "Error" logs.txt` \
`awk '/Error/' logs.txt` \
`awk '/^Error [0-9]{3}:/' logs.txt`

`grep -c "Success" logs.txt` –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π \
`awk '/Success/ {count++} END {print count}' logs.txt`

`sed 's/Error/Success/g' file.txt` –∑–∞–º–µ–Ω–∞ —Å–ª–æ–≤ \
`awk '{gsub(/Error/, "Success"); print}' file.txt`

`sort file.txt | uniq` \
`awk '!seen[$0]++' file.txt` –∑–∞–ø–æ–ª–Ω—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫

`wc -w file.txt` –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –≤ —Ñ–∞–π–ª–µ \
`awk '{count += NF} END {print count}' file.txt`

`sed -n '10,20p' file.txt` –≤—ã–≤–µ—Å—Ç–∏ —Å 10 –ø–æ 20 —Å—Ç—Ä–æ–∫—É \
`awk 'NR>=10 && NR<=20' file.txt`

`awk '{sum += $1} END {print sum/NR}' numbers.txt` –ø–æ–ª—É—á–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–µ–ª –≤ –ø–µ—Ä–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ \
`awk '{ if ($2 > 50000) print $1, "> 50K"; else print $1, "< 50K" }' data.txt` –≤—ã–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –≤—ã—à–µ –∏–ª–∏ –Ω–∏–∂–µ 50 —Ç—ã—Å—è—á \
`awk '{ sum = 0; for (i = 1; i <= NF; i++) sum += $i; print "—Å—É–º–º–∞:", sum }' data.txt` –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É —á–∏—Å–ª–µ –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ \
`awk '{ for (i = 1; i <= NF; i++) sum[i] += $i } END { for (i in sum) print "–°—Ç–æ–ª–±–µ—Ü", i, "—Å—É–º–º–∞:", sum[i] }' data.txt` –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É —á–∏—Å–ª–µ –≤ –∫–∞–∂–¥–æ–º —Å—Ç–æ–ª–±—Ü–µ

## printf

`top=$(top -bn1)` \
`printf "%s\n" "${top[@]}"` –≤—ã–≤–µ—Å—Ç–∏ –≤—ã–≤–æ–¥ –º–∞—Å—Å–∏–≤–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ \
`printf "%.2f \n" 1.1111` –æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ 2 —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π \
`printf "%.0f \n" 1.6` —É–¥–∞–ª–∏—Ç—å –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å (–æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ 2) \
`printf "Arg1: %s\nArg2: %s\n" "10" "20"` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã (%s) –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏

## cut

`echo "1 2 3" | cut -c 1,5` –≤—ã–≤–µ—Å—Ç–∏ –ø–µ—Ä–≤—ã–π –∏ –ø—è—Ç—ã–π —Å–∏–º–æ–≤ (`--bytes`/`--characters`) \
`echo "1 2 3" | cut -c 1-3` –≤—ã–≤–µ—Å—Ç–∏ —Å –ø–µ—Ä–≤–æ–π –ø–æ —Ç—Ä–µ—Ç–∏–π —Å–∏–º–≤–æ–ª \
`echo "1 2 3" | cut -c3-` —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤—ã–µ 2 —Å–∏–º–≤–æ–ª–∞ \
`echo -e "test1,test2,test3\ntest1,test2,test3" | cut -d , -f 2-100` —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π/—Å—Ç–æ–ª–±—Ü–æ–≤ (`--delimiter`) –∏ –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –≤—ã–≤–µ—Å—Ç–∏ (`--fields`) —Å 2 –ø–æ 100 \
`echo -e "test1,test2,test3\ntest1,test2,test3" | cut -d , -f 1,3 | sed "s/,/ /"` –≤—ã–≤–µ—Å—Ç–∏ 1 –∏ 3 \
`echo -e "test1,test2,test3\ntest1 test2 test3" | cut -d , -f 1,3 -s` –ø–µ—á–∞—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (`-s`)

### rev

`echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | rev | cut -d \\ -f 1 | rev` –∑–∞–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤ –ø—É—Ç–∏ (–≤–Ω–∞—á–∞–ª–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É, –∑–∞–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –æ–±—Ä–∞—Ç–Ω–æ) \
`echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | sed -r 's/.+\\//'` —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ª–µ—à–∞ \
`echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | sed 's/.*\\\(.*\)/\1/'` —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ª–µ—à–∞ –∏ –∑–∞–±–∏—Ä–∞–µ—Ç –æ–¥–Ω—É –≥—Ä—É–ø–ø—É –∑–∞—Ö–≤–∞—Ç–∞, —á—Ç–æ –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è, –∏ –∑–∞–º–µ–Ω—è–µ—Ç –≤—ã–≤–æ–¥ –Ω–∞ –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É (1) \
`echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | awk -F '\\' '{print $NF}'` –∑–∞–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ (NF)

## tr

`echo "10 20 100 200" | tr 1 2` translate –∑–∞–º–µ–Ω—è–µ—Ç 1 –Ω–∞ 2 –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–æ–º–≤–æ–ª–æ–≤ (20 20 200 200) \
`echo "1 2 3" | tr " " ","` –∑–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã –Ω–∞ –∑–∞–ø—è—Ç—ã–µ (1,2,3) \
`echo "1 2 3" | tr -d " "` —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã (123)

## man

### cheat sh

`curl cheat.sh/curl` \
`curl cheat.sh/grep` \
`curl cheat.sh/sed` \
`curl cheat.sh/awk` \
`curl cheat.sh/jq` \
`curl cheat.sh/iptables` \
`curl cheat.sh/find`

### tldr

`pip3 install tldr` —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç man —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è \
`tldr curl` –≤–µ–±-–≤–µ—Ä—Å–∏—è: https://manned.org/man/curl

## debug

`trap 'echo "$BASH_COMMAND"' DEBUG` –ø–æ—Å—Ç—Ä–æ—á–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ bash, –∫–æ–º–∞–Ω–¥–∞ trap –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª DEBUG, –ø–æ—Å—ã–ª–∞–µ–º—ã–π –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã –∏ –≤—ã–≤–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ —ç–∫—Ä–∞–Ω \
`trap 'echo "$BASH_COMMAND";read' DEBUG` read –æ–∂–∏–¥–∞–µ—Ç –≤–≤–æ–¥–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (Enter –∏–ª–∏ Ctrl+C) –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–æ–π \
`bash -x script.sh` –æ—Ç–ª–∞–¥–∫–∞ (–ø–µ—á–∞—Ç—å –∫–æ–º–∞–Ω–¥ –∏ –∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–æ –º–µ—Ä–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è) \
`bash -x -c "ls -l" | grep *.sh | awk '{print $5,$NF}'` –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä bash –∏ –≤—ã–≤–æ–¥ –æ—Ç–ª–∞–¥–∫–∏ \
`bash --debug script.sh` –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ \
`apt-get install shellcheck` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å shellcheck \
`shellcheck -S error hwstat.sh` error/warning/info/style \
`pip3 install thefuck` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å thefuck \
`bas hwstat.sh` –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —Å –æ—à–∏–±–∫–æ–π \
`fuck` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—à–∏–±–æ—á–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ (up/down)

## tools

`pip install toolong` \
`tl /var/log/auth.log` –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π \
`tl access.log* --merge` –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

`apt install bat` –∞–Ω–∞–ª–æ–≥ cat (https://github.com/sharkdp/bat) —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
`bat /etc/netplan/*.yaml`

`tree /var/log/` –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤

`cargo install --locked broot` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å broot (https://github.com/Canop/broot), –∞–Ω–∞–ª–æ–≥ tree \
`broot kinozal-bot/`

`echo 'deb http://cz.archive.ubuntu.com/ubuntu jammy main universe' >> /etc/apt/sources.list && apt update` \
`apt install exa` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–Ω–∞–ª–æ–≥ ls (https://github.com/ogham/exa) \
`exa $(pwd) -l --icons` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–∫–æ–Ω–∫–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ 

`cargo install eza` –∞–Ω–∞–ª–æ–≥ ls (https://github.com/eza-community/eza) –Ω–∞ –±–∞–∑–µ exa \
`eza -l --icons` \
`eza --tree kinozal-bot/`

`cargo install lsd` –∞–Ω–∞–ª–æ–≥ ls (https://github.com/lsd-rs/lsd) \
`lsd -l kinozal-bot/`

`column /etc/passwd -t -s ":"` \
`netcheck -t ping yandex.ru us1.node.check-host.net | sed -r 's/"//g; s/,$//; s/\{|\}|\[|\]//' | column -t -s ":"` —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON –∏ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø (—Ç–∞–±—É–ª—è—Ü–∏—é) –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫

`ls /home | wc -l` word count –≤—ã–≤–æ–¥–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (`--line`) \
`ls /home | wc -w` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ (`--words`) \
`ls /home | wc -m` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–º (`--chars`) \
`ls /home | wc -c` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤/–±–∞–π—Ç (`--bytes`)

`echo "(5.5-2.2)" | bc` –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è \
`echo "(5.5-2.2)" | bc | sed -E "s/\..+//"` —É–¥–∞–ª–∏—Ç—å –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å \
`echo "1 < 2" | bc` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (1 - –¥–∞ –∏–ª–∏ 0 - –Ω–µ—Ç) \
`echo "1 > 2" | bc` false (0) \
`icmp_ignore=$(cat /proc/sys/net/ipv4/icmp_echo_ignore_all)` –∑–∞–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ \
`if (( $(echo "$icmp_ignore == 1" | bc) )); then echo "true"; else echo "false"; fi` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —É—Å–ª–æ–≤–∏–∏ –∞—Ä–µ—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 - `false` –∏–ª–∏ 1 - `true`)

`a=1` \
`b=0.55` \
`echo $(bc <<< "scale=2; $a+$b")` \
`echo "print $a+$b" | perl` \
`echo "print($a+$b)" | python3` \
`echo "print($a+$b)" | lua` \
`echo "puts $a+$b" | ruby` \
`pwsh -Command $a+$b`

`echo -e "key1\nkey2\nkey3" > 1.txt` \
`echo -e "value1\nvalue2\nvalue3" > 2.txt` \
`paste 1.txt 2.txt -d :` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–∞ —Ñ–∞–π–ª–∞ –≤ –æ–¥–∏–Ω –º–Ω–æ–≥–æ–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ \
`cat /etc/passwd | paste -s -d +` –æ–±—ä–µ–¥–µ–Ω–∏—Ç—å (join) –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É—è —É–∫–∞–∑–∞–Ω–Ω—ã–π delimiter

`echo -e "test1\ntest2" > 1.txt \
`echo -e "test\ntest2\ntest3" > 2.txt \
`diff 1.txt 2.txt -c` ! –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, + –µ—Å—Ç—å –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ \
`diff 1.txt 2.txt -yi` —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏ (| –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, + –µ—Å—Ç—å –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞) –∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (-i) \
`diff 1.txt 2.txt -u` –æ–±—ä–µ–¥–µ–Ω—è–µ—Ç –¥–≤–∞ —Ñ–∞–π–ª–∞ –≤ –æ–¥–∏–Ω –≤—ã–≤–æ–¥ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π (+/) \
`diff 1.txt 2.txt -ibBEt` –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã (-b) –∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ (-B), –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±—É–ª—è—Ü–∏—è—Ö (-E) –∏ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–∞–±—É–ª—è—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–±–µ–ª—ã –≤ –≤—ã–≤–æ–¥–µ (-t) \
`diff -c <(echo "$predu") <(echo "$du")` —Å—Ä–∞–≤–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

`snap install diff-so-fancy` \
`diff -u file-1.txt file-2.txt | diff-so-fancy`

`apt install jdupes` \
`jdupes .` –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

`cat /etc/passwd | sort -r` –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –ø–æ –∞–ª—Ñ–æ–≤–∏—Ç—É –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (-r) \
`du -h ~ | sort -n` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é (-n) —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π \
`ls -l | sed 1d | sort -nk5` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—è—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ (-k) \
`cat $tmp | sort -t "." -nk4` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —á–µ—Ç–≤–µ—Ä—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (-t) —Ç–æ—á–∫—É

`echo -e "1 2\n1 2\n2 1\n1 2" | uniq` —É–¥–∞–ª—è–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ \
`echo -e "1 2\n1 2\n2 1\n1 2" | sort | uniq` —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã \
`echo -e "1 2\n1 2\n2 1\n1 2" | sort | uniq -c` –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –Ω–∞—á–∞–ª–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–ª-–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π \
`echo -e "1 2\n1 2\n2 1\n1 2" | sort | uniq -u` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –±–µ–∑ —Å—Ç—Ä–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏

`ls -l | fold -w 50` –∑–∞–¥–∞—Ç—å —à–∏—Ä–∏–Ω—É –≤—ã–≤–æ–¥–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –≤—ã–ø–∞–¥–∞—é—â–µ–µ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–µ–ª –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É \
`ls -l | fold -w 50 -s` —Ä–∞–∑–±–∏–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–∏–º–≤–æ–ª–∞—Ö –ø—Ä–æ–±–µ–ª–∞ (--space)

`cat /var/log/syslog | head -n 5` –≤—ã–≤–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ —Ñ–∞–π–ª–∞

`cat /var/log/syslog | tail -n 5 ` –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Å—Ç—Ä–æ–∫ —Ñ–∞–π–ª–∞ \
`tail -f /var/log/syslog` –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

`apt install multitail` \
`multitail -f /var/log/auth.log -f /var/log/kern.log` \
`multitail -l "journalctl -fu ssh" -l "journalctl -fu cron"`

`less /var/log/dmesg` –≤—ã–≤–µ—Å—Ç–∏ –ª–æ–≥ —è–¥—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è

`watch df -h` –≤—ã–≤–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã

`echo "line1" | tee test.txt` –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª (>) \
`ls > /dev/null` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –≤ null \
`echo "line2" | tee -a test.txt` –¥–æ–±–∞–≤–∏—Ç—å (>>) —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–π–æ–∫–π –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ \
`echo -e "line3\nline4" >> test.txt` –¥–æ–±–∞–≤–∏—Ç—å –¥–≤–µ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏

`split -l 100 input_file.txt output_prefix` —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ 100 —Å—Ç—Ä–æ–∫ –≤ –∫–∞–∂–¥–æ–π \
`split -b 10M input_file.txt output_prefix` —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10MB)

`yes` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ —Å–∏–º–≤–æ–ª–∞, –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ (–¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã), –ª–∏–±–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö

## dust

`snap install dust` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [dust](https://github.com/bootandy/dust) - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `du` –Ω–∞ Rust \
`dust /home/lifailon` –≤—ã–≤–æ–¥–∏—Ç –≥—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º –∏ —Ñ–∞–π–ª–∞–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–Ω—è—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ \
`dust -s` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞, –∞ –Ω–µ –æ–±—ä–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∏–º –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ \
`dust -n 30` –≤—ã–≤–æ–¥–∏—Ç 30 –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –≤—ã—Å–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞) \
`dust -d 3` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 —É—Ä–æ–≤–Ω—è –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–æ–≤ \
`dust -D` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ \
`dust -F` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã \
`dust -f` —Å—á–∏—Ç–∞–π—Ç–µ —Ñ–∞–π–ª—ã –≤–º–µ—Å—Ç–æ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ \
`dust -i` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã \
`dust -z 10M` –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –≤–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã —Ä–∞–∑–º–µ—Ä–æ–º –±–æ–ª–µ–µ 10 –ú–ë \
`dust -z 40000/30MB/20kib` –∏—Å–∫–ª—é—á–∏—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã/–∫–∞—Ç–∞–ª–æ–≥–∏ —Ä–∞–∑–º–µ—Ä–æ–º –º–µ–Ω–µ–µ 40 000 –±–∞–π—Ç/30 –ú–ë/20 –ö–ë \
`dust -o si/b/kb/kib/mb/mib/gb/gib` —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ \
`dust -e "\.png$"` –≤–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã `png`) \
`dust -v "\.png$"` —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º `png` \
`dust -j  | jq` –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON` \
`dust -P` –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

## fd

`apt install fd-find` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [fd](https://github.com/sharkdp/fd)  –±—ã—Å—Ç—Ä–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `find` –Ω–∞ Rust \
`fdfind` –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∑–∞–º–µ–Ω—è–µ—Ç `ls -R` –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ \
`fdfind log /var` –∏—â–µ—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é \
`fdfind -tf "\.yaml$" / | fzf` –∏—â–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã (`--type file` –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `--type directory`) —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.yaml` —Å –∫–æ—Ä–Ω—è —Å –≤—ã–≤–æ–¥–æ–≤ –≤ `fzf` \
`fdfind --type file -H pre-commit` –ø–æ–∏—Å–∫ —Å–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ \
`fdfind --type f -e pdf . $HOME | rofi -keep-right -dmenu -i -p FILES -multi-select | xargs -I {} xdg-open {}` –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å rofi (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é) \
`fd -e zip -x unzip` —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ zip-–∞—Ä—Ö–∏–≤—ã –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏—Ö

### fd-fzf
```bash
# fdfind over fzf
if command -v fzf > /dev/null; then
    function fd-fzf(){
        if [ -z "$1" ]; then
            # Current path by default
            fdfind . ${pwd} | fzf
        else
            # Specified path
            fdfind . $1 | fzf
        fi
    }
    # Alt+F for fd-fzf
    bind '"\ef": "fd-fzf\n"'
    # Alt+Shift+F for rga-fzf
    if command -v rga-fzf > /dev/null; then
        bind '"\eF": "rga-fzf\n"'
    fi
fi
```
## findutils

### find

`find / -name "*.sql"` –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã, –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ —Å –∫–æ—Ä–Ω—è (/) \
`find / -iname "mysql"` –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä (-i) \
`find ~ -name "test.*" -not -name "*.conf"` –Ω–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ test, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ª—é–±–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º (-not) —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è .conf \
`find ~ -amin -10` –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á—Ç–µ–Ω–∏—è (-amin) –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏—Å—å (cat/nano) –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç \
`find ~ -type f -mmin -10` –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã (-type f), –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç (-nmin) \
`find ~ -type f -mtime +1 -mtime -7` –Ω–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É 1 –∏ 7 –¥–Ω—è–º–∏ –Ω–∞–∑–∞–¥ \
`find ~ -type d -mtime +1 -mtime -7` –ø–æ–∏—Å–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π \
`find ~ -size +50M -size -100M` –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –≤ Linux –ø–æ –∏—Ö —Ä–∞–∑–º–µ—Ä—É, –æ—Ç 50 –¥–æ 100 –º–µ–≥–∞–±–∞–π—Ç \
`find / -perm 444` –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ —Ä–µ–∂–∏–º—É –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö) \
`find /home/lifailon/ -user root` –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü—É \
`find /home/lifailon/ -group root` –ø–æ–∏—Å–∫ –ø–æ –≥—Ä—É–ø–ø–µ \
`find /root/ -empty` –ø–æ–∏—Å–∫ –ø—É—Å—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### exec

`touch -t 202306222200.15 /tmp/test.txt` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π —Å–æ–∑–¥–∞–Ω–∏—è \
`find /tmp -type f -mtime +30 -exec rm -f {} \;` —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—ã—Ä–µ –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å –±–æ–ª—å—à–µ 30 –¥–Ω–µ–π \
`find /tmp -type f -name "*.txt" -exec rm -f {} \;` —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tmp \
`dd if=/dev/zero of=/var/log/test.log count=11 bs=1M` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ \
`find /var/log -type f -name "*.log" -size +10M -exec rm -f {} \;` —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ª–æ–≥-—Ñ–∞–π–ª—ã, –æ–±—ä—ë–º–æ–º –±–æ–ª—å—à–µ 10 –ú–±–∞–π—Ç

### locate

`apt install plocate` –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `mlocate` —Å –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–º –∏ –º–µ–Ω—å—à–∏–º –ø–æ —Ä–∞–∑–º–µ—Ä—É –∏–Ω–¥–µ–∫—Å–æ–º \
`updatedb` –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö \
`ls -lh /var/lib/[mp]locate/*.db` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö \
`locate .torrent` –Ω–∞–π—Ç–∏ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –≤ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é \
`locate .torrent -c` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ \
`locate -n 10 .torrent` –≤—ã–≤–µ—Å—Ç–∏ 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ \
`locate -i Kinozal-Bot` –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä \
`locate -r "\.log$"` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
```bash
sudo curl -s https://github.com/pr4k/locate/releases/download/v0.1.1/locate-linux -o /usr/bin/locate -o /usr/bin/locate
sudo chmod +x /usr/bin/locate
```
`locate-linux -p /home/lifailon/ -q /qbittorrent` \
`locate-linux -p /home/lifailon/.bash_history -q /qbittorrent`

### xargs

`echo {1..10} | xargs -n1 -P4 bash -c 'echo Start task $1 && sleep $1 && echo Complate task $1' _` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 1 –∞—Ä–≥—É–º–µ–Ω—Ç –∏ –∑–∞–ø—É—Å–∫–∞—Ç –¥–æ 4-—Ö –ø–æ—Ç–æ–∫–æ–≤ –∑–∞ —Ä–∞–∑

`du -a /var/log | awk '{print $2}' | xargs fincore` –ø–µ—Ä–µ–¥–∞—Ç—å –≤—ã–≤–æ–¥ –ø–µ—Ä–≤–æ–π –∫–æ–º–∞–Ω–¥—ã (–ø–æ—Å—Ç—Ä–æ—á–Ω–æ) –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—â–µ–π

## fincore

`sudo apt install util-linux-extra` \
`fincore /var/log/*` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫—ç—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (page cache) \
`fincore /var/log/syslog` 4.3M (–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–∞–º—è—Ç–∏) 1100 (–∫–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–∞–º—è—Ç–∏ PageCache) 199.7M (—Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞) \
`fincore /var/log/syslog -J` –≤—ã–≤–æ–¥ –≤ JSON (--raw –≤—ã–≤–æ–¥ –±–µ–∑ —Ç–∞–±—É–ª–∏—è—Ü–∏–∏, --noheadings –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, --byte —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö) \
`apt install vmtouch` \
`vmtouch /var/log/syslog` —É–∑–Ω–∞—Ç—å –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–º –∫–µ—à–µ (Resident Pages: 1100/51119  4M/199M  2.15%)

### lspage
```bash
fc=$(du -a $1 2> /dev/null | awk '{print $2}' | xargs fincore 2> /dev/null)
echo -e "PAGE\tSIZE\tPATH"
printf "%s\n" "${fc[@]}" | grep -wvE "0B|SIZE" | awk 'BEGIN {OFS="\t"}; {print $1,$3,$4}'
```
## bashrc

`nano ~/.bashrc`
```bash
# –ü—Å–µ–≤–¥–æ–Ω–∏–º—ã –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –Ω–∞–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥ —Å —Ñ–ª–∞–≥–∞–º–∏ –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –≤–≤–æ–¥–∞ 
alias tspin=tailspin
alias ts=tailspin

# –ó–∞–±–∏–Ω–¥–∏—Ç—å –æ—á–∏—Å—Ç–∫—É –≤–≤–æ–¥–∞ –Ω–∞ Ctrl+L
bind '"\C-l": "^\C-u\C-mclear\C-m"'

# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–æ—Å—Ç—É–ø–Ω—É—é –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –ø—Ä–æ–±–µ–ª–∞
export HISTCONTROL=ignorespace

# –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –≤–≤–µ–¥–µ–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥ –ø—Ä–∏ –∏—Å–ø–æ—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä–µ–ª–æ—á–µ–∫ –≤–≤–µ—Ä—Ö –∏ –≤–Ω–∏–∑
if [[ "$-" == *i* ]]; then
    bind '"\e[A": history-search-backward'
    bind '"\e[B": history-search-forward'
fi
```
`source ~/.bashrc` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ (–ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å)

### oh-my-bash

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `oh-my-bash` (–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å, –¥–µ–ª–∞—è —Ä—è–¥–æ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å—Ç–∞—Ä–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ `.bashrc.omb-TIMESTAMP`):

`bash -c "$(curl -fsSL https://raw.githubusercontent.com/ohmybash/oh-my-bash/master/tools/install.sh)"`

`ls ~/.oh-my-bash/themes/` —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º \
`sed -iE "s/^OSH_THEME=.*/OSH_THEME=powerline/" ~/.bashrc && source $HOME/.bashrc` –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å:
```bash
function sysStat() {
    top=$(top -bn1)
    cpu=$(echo "$top" | grep "%Cpu(s)" | awk '{printf "%.0f%%", 100-$8}')
    # sys=$(echo "$top" | grep "%Cpu(s)" | awk '{printf "%.0f%%", $4}')
    # usr=$(echo "$top" | grep "%Cpu(s)" | awk '{printf "%.0f%%", $2}')
    avg=$(echo "$top" | grep "load average" | awk -F ': ' '{print $2}' | awk -F ', ' '{print $1"/"$2"/"$3}')
    mem=$(echo "$top" | grep "MiB Mem" | awk '{printf "%.1fG/%.1fG", ($8)/1024, $4/1024}')
    disk=$(df -h | awk '$NF=="/"{print $3"/"$2}')
    echo "üìä $cpu ($avg) $mem üíæ $disk"
}

function gitStatus() {
    status=$(git status --porcelain 2>/dev/null)
    if [ -z "$status" ]; then
        echo ""
        return
    fi
    branch=$(git rev-parse --abbrev-ref HEAD)
    result="üî∏ ($branch) "
    added=$(echo "$status" | grep -c '^?')
    modified=$(echo "$status" | grep -c '^ M')
    deleted=$(echo "$status" | grep -c '^ D')
    [ "$added" -gt 0 ] && result+="\e[32m+${added} \e[0m"
    [ "$modified" -gt 0 ] && result+="\e[33m~${modified} \e[0m"
    [ "$deleted" -gt 0 ] && result+="\e[31m-${deleted} \e[0m"
    echo "$result"
}

export PROMPT_COMMAND+='
    SYSSTAT=$(sysStat);
    GITSTATUS=$(gitStatus);
'

PS1='\[\e[34m\]$SYSSTAT \[\e[0m\]'
PS1+='\[\e[32m\]üë§ \u \[\e[0m\]'
PS1+='\[\e[33m\]üìÅ \w \[\e[0m\]'
PS1+='$(echo -e "$GITSTATUS")'
PS1+='\[\e[34m\]> \[\e[0m\]'
```
## fzf

`apt install fzf` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [fzf](https://github.com/junegunn/fzf) \
`history | fzf` –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π \
`eval $(history | fzf | awk '{print $2}')` –≤—ã–ø–æ–ª–Ω–∏—Ç—å (eval) –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ —Å–ø–∏—Å–∫–∞ (–¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞–∫—Ä–æ—Å) \
`find / -name "*.yaml" | fzf | xargs cat` –Ω–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –≤—Å–µ —Ñ–∞–π–ª—ã `yaml`, –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ –Ω–∏–º –ø–æ–∏—Å–∫ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤ `cat` –¥–ª—è —á—Ç–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

–ü–æ–∏—Å–∫, —á—Ç–µ–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Docker —á–µ—Ä–µ–∑ `fzf` —Å –ø–æ–∫—Ä–∞—Å–∫–æ–π –≤—ã–≤–æ–¥–∞ –≤ `tailspin`:
```bash
alias ts=tailspin
# docker logs over fzf
function logd() {
    contaner_name=$(docker ps --format "{{.Names}}" | fzf --exact --height 20 --reverse)
    if [ -n "$contaner_name" ]; then
        docker logs $contaner_name | ts | fzf --ansi --exact
    fi
}
# varlog over fzf (including including archives)
function log() {
    file_name=$(ls -p /var/log/ | grep -v / | fzf --exact --height 20 --reverse)
    if [ -n "$file_name" ]; then
        if [ "$file_name" == *.gz ]; then
            zcat "/var/log/$file_name" | tac | ts | fzf --ansi --exact
        else
            tac "/var/log/$file_name" | ts | fzf --ansi --exact
        fi
    fi
}
# all file logs over fzf
function logs() {
    if command -v fdfind > /dev/null; then
        file_name=$(fdfind ".log$" / | fzf --exact --height 20 --reverse)
    else
        file_name=$(find / -name "*.log" 2> /dev/null | fzf --exact --height 20 --reverse)
    fi
    if [ -n "$file_name" ]; then
        if [ "$file_name" == *.gz ]; then
            zcat "/var/log/$file_name" | tac | ts | fzf --ansi --exact
        else
            tac "/var/log/$file_name" | ts | fzf --ansi --exact
        fi
    fi
}
```
### fzf-obc

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [fzf over bash complete](https://github.com/rockandska/fzf-obc) (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥) –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª—å `bash`:
```bash
git clone https://github.com/rockandska/fzf-obc $HOME/.local/opt/fzf-obc
echo "source $HOME/.local/opt/fzf-obc/bin/fzf-obc.bash" >> $HOME/.bashrc
```
## hstr

`sudo apt install hstr` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å hstr (https://github.com/dvorka/hstr) \
`hstr -f` –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (Ctrl+F –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ) \
`hstr -n bash log` –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é
```bash
if command -v hstr > /dev/null; then
    bind -x '"\C-r": hstr'
fi
```
### hstr-fzf

–ü–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `hstr` –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º–∞ `h` –∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `Ctrl+R` —á–µ—Ä–µ–∑ `fzf`:
```bash
# History search over fzf
if command -v fzf > /dev/null; then
    function hstr() {
        local current_input="$READLINE_LINE"
        command=$(tac $HOME/.bash_history | sed '/^#/d' | awk '!seen[$0]++' |  fzf --exact --no-sort --height 20 --reverse --query="$current_input")
        if [[ -n "$command" ]]; then
            READLINE_LINE="$command"
            READLINE_POINT=${#READLINE_LINE}
        fi
    }
    alias h=hstr
    bind -x '"\C-r": h'
fi
```
### mcfly

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [homebrew](https://brew.sh) –∏ [mcfly](https://github.com/cantino/mcfly), –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ `Ctrl-R` –Ω–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é –ø–æ–∏—Å–∫–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ–¥–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:
```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
echo 'eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"' >> ~/.bashrc
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
source ~/.bashrc
brew install mcfly
echo 'eval "$(mcfly init bash)"' >> ~/.bashrc
source ~/.bashrc
```
## compgen

`compgen -c` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ \
`compgen -a` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∞–ª–∏–∞—Å—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ \
`compgen -b` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Bash \
`compgen -k` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ Bash \
`compgen -v` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ \
`compgen -A export` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ \
`compgen -A function` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ \
`compgen -A arrayvar` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –º–∞—Å—Å–∏–≤—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ (echo ${BASH_ALIASES[@]}) \
`compgen -A hostname` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ö–æ—Å—Ç—ã \
`compgen -A job` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (ping ya.ru > /dev/null &) \
`compgen -A service` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Å–ª—É–∂–±—ã (–¥–ª—è —Å–∏—Å—Ç–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Å–ª—É–∂–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ systemd) \
`compgen -d` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ \
`compgen -f` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ \
`compgen -u` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã \
`compgen -g` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –≥—Ä—É–ø–ø—ã —Å–∏—Å—Ç–µ–º—ã \
`compgen -W "start stop status restart" st` –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –∏–∑ wordlist, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å prefix "st"

## cron

`ls /etc/cron.d/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (atop, sysstat) \
`ls -l /etc/cron.hourly && ls -l /etc/cron.daily && ls -l /etc/cron.weekly && ls -l /etc/cron.monthly` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑ –≤ —á–∞—Å, –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é –∏ –º–µ—Å—è—Ü \
`crontab -l` –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á \
`crontab -l | grep -Pv "^$|^#"` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è \
`crontab -u lifailon -l` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root \
`crontab -e` —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`sudo crontab -u root -e` —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root \
`crontab -r` –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏

`cat /etc/crontab`
```
#### # .---------------- –º–∏–Ω—É—Ç–∞ (0 - 59)
#### # |  .------------- —á–∞—Å (0 - 23)
#### # |  |  .---------- –º–µ–Ω—å –º–µ—Å—è—Ü–∞ (1 - 31)
#### # |  |  |  .------- –º–µ—Å—è—Ü (1 - 12) –∏–ª–∏ jan,feb,mar,apr...
#### # |  |  |  |  .---- –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0 - 6) (–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å 0 –∏–ª–∏ 7) –∏–ª–∏ sun,mon,tue,wed,thu,fri,sat
#### # |  |  |  |  |
#### # *  *  *  *  * user-name command to be executed
####  17  *  *  *  *   root    cd / && run-parts --report /etc/cron.hourly
####  25  6  *  *  *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
####  47  6  *  *  7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
####  52  6  1  *  *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )
```
`0,14,29,44 * * * *` –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç \
`*/15 * * * *` –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç

`00 23 * * * systemctl restart zabbix-agent && echo $(date): Reboot Zabbix Agent use cron >> /var/log/reboot.log` –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:00 –∏ –ø–∏—Å–∞—Ç—å –≤ –ª–æ–≥ \
`00 03 * * 6 echo $(date): Reboot Operating System use cron >> /var/log/reboot.log && /sbin/reboot` –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å–∏—Å—Ç–µ–º—ã –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Å—É–±–±–æ—Ç—É –≤ 3 —á–∞—Å–∞ –Ω–æ—á–∏ \
`@reboot date >> ~/date-reboot.log` –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

`journalctl -eu cron` \
`cat /var/log/syslog | grep -i cron`
```bash
#!/bin/bash
addr="google.com"
path="/var/log/icmp-test.log"
date=$(date | awk '{print $3,$2,$4}')
loss=$(ping -c 2 $addr | grep -Ewo "[0-9]+%")
if [ $loss = "100%" ]; then
    echo "$date: $addr - unavailable" >> $path
else
    echo "$date: $addr - available" >> $path
fi
```
`echo "*/1 * * * * bash /root/google-icmp-test.sh" >> /var/spool/cron/crontabs/root` –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—â–∏–∫ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

`cp /etc/hosts /etc/hosts.bak` backup —Ñ–∞–π–ª–∞ \
`echo "11.11.11.11 google.com" >> /etc/hosts` –∏–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–∞ \
`cp /etc/hosts.bak /etc/hosts` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª \
`cat /var/log/icmp-test.log | grep unavailable` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–æ–≥ –ø–æ unavailable

## systemctl

`systemctl reload ssh` –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ —Ñ–∞–π–ª–∞ —é–Ω–∏—Ç–∞ (–µ—Å–ª–∏ —É —é–Ω–∏—Ç–∞ –µ—Å—Ç—å —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è) \
`systemctl status ssh` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã, —é–Ω–∏—Ç–æ–≤ (–≤ —Ç–æ–º —á–∏—Å–ª–µ Failed) –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π \
`systemctl status sshd | grep -P "Active.+;" | sed -r "s/.+; | ago//g"` –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–ª—É–∂–±—ã \
`systemctl start ssh` –∑–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) \
`systemctl stop ssh` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —é–Ω–∏—Ç (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) \
`systemctl restart ssh` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å \
`systemctl enable ssh` –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É \
`systemctl disable ssh` —É–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏ \
`systemctl mask ssh` –≤—ã–∫–ª—é—á–∏—Ç—å —é–Ω–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (—Å–æ–∑–¥–∞–µ—Ç —Å–∏–º–ª–∏–Ω–∫ –Ω–∞ /dev/null) \
`systemctl unmask ssh` –≤–∫–ª—é—á–∏—Ç—å —é–Ω–∏—Ç (—É–¥–∞–ª–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫) \
`systemctl daemon-reload` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç systemd \
`systemctl cat ssh` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—É—Ç—å –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ unit-—Ñ–∞–π–ª–∞ \
`systemctl edit --full ssh` –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª —é–Ω–∏—Ç–∞ \
`systemctl list-dependencies ssh` –¥–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π \
`systemctl list-dependencies ssh --reverse` –∑–∞–≤–∏—Å—è—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —é–Ω–∏—Ç–∞ \
`systemctl list-units --type service --all` –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ \
`systemctl list-unit-files | sed "1d;$ d" | sed "$ d" | wc` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–ª-–≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ \
`systemctl list-unit-files | grep zabbix` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ \
`systemctl list-unit-files --type=service` —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ \
`systemctl list-unit-files --type=service --state=enabled` —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É \
`systemctl list-units --all --type=service --plain --no-legend --no-pager --output=json` \
`--all` –≤—ã–≤–æ–¥–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã —é–Ω–∏—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –∞–∫—Ç–∏–≤–Ω—ã–µ, –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ \
`--type=service` –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–ª—É–∂–±—ã —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ systemd (–Ω–µ –∫–ª—é—á–∞–µ—Ç –≤ –≤—ã–≤–æ–¥ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —é–Ω–∏—Ç–æ–≤, —Ç–∞–∫–∏–µ –∫–∞–∫ socket –∏–ª–∏ device) \
`--plain` –≤—ã–≤–æ–¥ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è \
`--no-legend` –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—ã–≤–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤ \
`--no-pager` –æ—Ç–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ (less) \
`ls /usr/lib/systemd/system` —é–Ω–∏—Ç—ã –ø–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –≤–º–µ—Å—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ \
`ls /run/systemd/system` —é–Ω–∏—Ç—ã —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ runtime \
`ls /etc/systemd/system` —é–Ω–∏—Ç—ã —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### systemctl-tui

`cargo install systemctl-tui --locked` –±—ã—Å—Ç—Ä—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π TUI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–ª—É–∂–±–∞–º–∏ –∏ –∂—É—Ä–Ω–∞–ª–∞–º–∏ systemd –Ω–∞ Rust (https://github.com/rgwood/systemctl-tui), –æ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª—è NuShell \
`systemctl-tui`

### unit
```bash
#!/bin/bash
while true; do
    addr="google.com"
    path="/var/log/icmp-test.log"
    date=$(date | awk '{print $3,$2,$4}')
    loss=$(ping -c 2 $addr | grep -Ewo "[0-9]+%")
    if [ $loss = "100%" ]; then
        echo "$date: $addr - unavailable" >> $path
    else
        echo "$date: $addr - available" >> $path
        tail -n 1 $path
    fi
    sleep 5
done
```
`nano /etc/systemd/system/icmp-test-log.service`
```conf
[Unit]
Description=icmp test output to log
After=network.target

[Service]
ExecStart=/bin/bash "/root/google-icmp-test.sh"
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=on-failure
Type=simple

[Install]
WantedBy=multi-user.target
```
`systemctl daemon-reload` \
`systemctl enable icmp-test-log.service` \
`systemctl start icmp-test-log` \
`systemctl status icmp-test-log` \
`tail -f /var/log/icmp-test.log`

## journalctl

`journalctl --system` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –∂—É—Ä–Ω–∞–ª \
`journalctl --user` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∂—É—Ä–Ω–∞–ª —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`journalctl -m` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∑–∞–ø–∏—Å–∏ –∏–∑ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∂—É—Ä–Ω–∞–ª–æ–≤ (--merge) \
`journalctl -ek` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —è–¥—Ä–∞ (kernel, --dmesg) –∏–∑ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ \
`journalctl -t systemd` –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø–∏—Å–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞ \
`journalctl _PID=3972315` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ PID –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`journalctl -eu ssh` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–Ω—Ü–∞ (--pager-end) –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (--unit)

`g` –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—á–∞–ª–æ –ª–∏—Å—Ç–∏–Ω–≥–∞ \
`G` –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ–Ω–µ—Ü

`journalctl -fu ssh` –≤—ã–≤–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (-f/--follow) \
`journalctl -fu ssh` –≤—ã–≤–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (-f/--follow) \
`journalctl -ru ssh` –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–Ω—Ü–∞ (—Å–≤–µ—Ä—Ö—É –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏, --reverse) \
`journalctl -n 100 -u ssh --no-pager` –≤—ã–≤–µ—Å—Ç–∏ 100 —Å—Ç—Ä–æ–∫ (--lines) –∏–∑ –∂—É—Ä–Ω–∞–ª–∞ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—ã–≤–æ–¥ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ \
`journalctl -p 3` –≤—ã–≤–µ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –≤—ã—à–µ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏: –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å(0), alerts(1), critical(2), errors(3), warning(4), notice(5), info(6), debug(7) \
`journalctl -S "2023-09-01 12:00:00" -U "2023-09-01 15:00:00"` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç (--since) 1 —Å–µ–Ω—Ç—è–±—Ä—è c 12:00:00 –ø–æ (--until) 15:00:00 \
`journalctl --since today` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è \
`journalctl -b` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã (boot) \
`journalctl --list-boots` –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫ —Å–∏—Å—Ç–µ–º—ã \
`journalctl -b ba6b2292a0e84d83a81cedfaa221926f` –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–æ–º–µ–Ω—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã (--boot) \
`journalctl --quiet` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è—Ö \
`journalctl --no-hostname` –ø–æ–¥–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –ø–æ–ª—è –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞ \
`journalctl -n 1 --no-pager --output=json-pretty` –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON (json-sse, json-seq) \
`journalctl -n 1 --no-pager --output=json-pretty --output-fields=PRIORITY,MESSAGE` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥

`journalctl --fields` –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π (UNIT, USER_UNIT, _SYSTEMD_UNIT, _SYSTEMD_USER_UNIT –∏ —Ç.–¥.)

`journalctl --field=UNIT > system_units.log` –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —é–Ω–∏—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ \
`journalctl --field=USER_UNIT > user_units.log` –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —é–Ω–∏—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ \
`comm -12 <(sort system_units.log) <(sort user_units.log)` –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–æ —Å–ø–∏—Å–∫–æ–º –∂—É—Ä–Ω–∞–ª–æ–≤ –±–µ–∑ –≤—ã–≤–æ–¥–∞ –æ–±—â–∏—Ö —Å—Ç—Ä–æ–∫ –≤ 1 –∏ 2 —Ñ–∞–π–ª–∞—Ö (-12)

`journalctl --disk-usage` –≤—ã–≤–µ—Å—Ç–∏ –æ–±—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∂—É—Ä–Ω–∞–ª–∞ (Archived and active journals take up 2.3G in the file system) \
`journalctl --flush` –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∂—É—Ä–Ω–∞–ª–∞ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π /run –≤ /var \
`journalctl --vacuum-time=1month` —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã –∂—É—Ä–Ω–∞–ª–∞, —Å—Ç–∞—Ä—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (1-–≥–æ –º–µ—Å—è—Ü–∞) \
`journalctl --vacuum-size=100M` –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É \
`journalctl --vacuum-files=100` –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ \
`journalctl --rotate` –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é —Ä–æ—Ç–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ \
`journalctl --sync` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞ –Ω–∞ –¥–∏—Å–∫ \
`journalctl --relinquish-var` –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å –Ω–∞ –¥–∏—Å–∫, –≤–æ–π—Ç–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É \
`journalctl --verify` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞

`journalctl --header` –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –∂—É—Ä–Ω–∞–ª–æ–≤ \
**File path** - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∂—É—Ä–Ω–∞–ª–∞ –Ω–∞ –¥–∏—Å–∫–µ \
**Incompatible flags** - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ñ–ª–∞–≥–∏ —Å —ç—Ç–∏–º –∂—É—Ä–Ω–∞–ª–æ–º \
**Rotate suggested** - –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ª–∏ —Ä–æ—Ç–∞—Ü–∏—è –∫ –∂—É—Ä–Ω–∞–ª—É \
**Tail sequential number** - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –¥–ª—è –∫–æ–Ω—Ü–∞ –∂—É—Ä–Ω–∞–ª–∞ (—É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ –≤ –∂—É—Ä–Ω–∞–ª–µ) \
**Head realtime timestamp** - –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤ –∂—É—Ä–Ω–∞–ª–µ \
**Tail realtime timestamp** - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤ –∂—É—Ä–Ω–∞–ª–µ \
**Objects** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –∂—É—Ä–Ω–∞–ª–µ (—Ç–∞–∫–∏—Ö –∫–∞–∫ –∑–∞–ø–∏—Å–∏, –∏ –Ω–µ —Ç–æ–ª—å–∫–æ) \
**Entry objects** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∑–∞–ø–∏—Å–∏ –≤ –∂—É—Ä–Ω–∞–ª–µ \
**Data objects** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ –∂—É—Ä–Ω–∞–ª–µ \
**Field objects** - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–ª–µ–π (—Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ --fields) \
**Disk usage** - –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –Ω–∞ –¥–∏—Å–∫–µ –¥–ª—è —ç—Ç–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞

`nano /etc/systemd/journald.conf`
```conf
Storage=auto # –∂—É—Ä–Ω–∞–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ /var/log/journal –Ω–∞ –¥–∏—Å–∫–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞), –∏–ª–∏ –≤ –ø–∞–º—è—Ç–∏ (/run/log/journal) –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
Storage=persistent # –∂—É—Ä–Ω–∞–ª—ã –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ
Storage=volatile # –∂—É—Ä–Ω–∞–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫)
Storage=none # –∂—É—Ä–Ω–∞–ª—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
Seal=yes # –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏—Ö —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏. –≠—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ü–∏—Ñ—Ä–æ–≤—É—é –ø–æ–¥–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª—ã, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –∏—Ö –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
SyncIntervalSec=5m # –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è–º–∏ –∂—É—Ä–Ω–∞–ª–∞ —Å –¥–∏—Å–∫–æ–º (5 –º–∏–Ω—É—Ç)
RateLimitIntervalSec=30s # –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –∂—É—Ä–Ω–∞–ª–∞, –µ—Å–ª–∏ –æ–Ω–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
RateLimitBurst=10000 # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –∂—É—Ä–Ω–∞–ª –∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª RateLimitIntervalSec
SystemMaxUse=500M # –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∂—É—Ä–Ω–∞–ª—ã, –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —ç—Ç–æ—Ç –ª–∏–º–∏—Ç, —Å—Ç–∞—Ä—ã–µ –∂—É—Ä–Ω–∞–ª—ã –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è
SystemKeepFree=1G # –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á, –µ—Å–ª–∏ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ, —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–Ω–µ—Ç —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –∂—É—Ä–Ω–∞–ª—ã
SystemMaxFileSize= # –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞ –Ω–∞ –¥–∏—Å–∫–µ. –ï—Å–ª–∏ —Ñ–∞–π–ª –ø—Ä–µ–≤—ã—à–∞–µ—Ç —ç—Ç–æ—Ç —Ä–∞–∑–º–µ—Ä, –æ–Ω –±—É–¥–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω
SystemMaxFiles=100 # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∂—É—Ä–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã, —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ –¥–ª—è –Ω–æ–≤—ã—Ö
MaxRetentionSec=1month # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∂—É—Ä–Ω–∞–ª—ã –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–µ –±–æ–ª–µ–µ –º–µ—Å—è—Ü–∞)
ForwardToSyslog=yes # –¥–æ–ª–∂–Ω—ã –ª–∏ –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∂—É—Ä–Ω–∞–ª (syslog), —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∂—É—Ä–Ω–∞–ª –≤ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, rsyslog
orwardToKMsg=no # –¥–æ–ª–∂–Ω—ã –ª–∏ –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ –±—É—Ñ–µ—Ä —è–¥—Ä–∞ (KMsg)
ForwardToConsole=no # –¥–æ–ª–∂–Ω—ã –ª–∏ –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ TTY (–Ω–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
ForwardToWall=yes # –¥–æ–ª–∂–Ω—ã –ª–∏ –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –≤ —Å–∏—Å—Ç–µ–º–µ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É wall)
MaxLevelStore=debug # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∂—É—Ä–Ω–∞–ª–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø–∏—Å–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è (emerg, alert, crit, error, warning, notice, info, debug)
MaxLevelSyslog=debug # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∂—É—Ä–Ω–∞–ª–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø–∏—Å–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ syslog
MaxLevelWall=emerg # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∂—É—Ä–Ω–∞–ª–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø–∏—Å–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É wall
LineMax=48K # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –∂—É—Ä–Ω–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 48 –ö–ë)
Audit=no # –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∞—É–¥–∏—Ç–∞ (—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É, –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤—ã—Ö –ø—Ä–∞–≤, –ó–∞–ø—É—Å–∫ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ç.–ø.)
```
`sudo systemctl restart systemd-journald`

## dmesg

`dmesg -Tx` –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–≥–∏ –±—É—Ñ–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —è–¥—Ä–∞ (/var/log/dmesg), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ–∫–∞ —Å–µ—Ä–≤–∏—Å Syslog –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω \
`dmesg -Tx -l crit,err` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ \
`dmesg -E` –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–≤–æ–∞–Ω–∏–µ —è–¥—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª—å (--console-on) \
`dmesg -D` –æ—Ç–∫–ª—é—á–∏—Ç—å (--console-off)  \
`dmesg -n 1` –∏–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–µ—á–∞—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å \
`dmesg -u` –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—ã–≤–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`dmesg -w` –≤—ã–≤–æ–¥–∏—Ç—å –∂—É—Ä–Ω–∞–ª –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∂–¥–∞—Ç—å –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)

## hardware

`systemd-analyze` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –û–° (Kernel - –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —è–¥—Ä–∞) –∏ userspace \
`systemd-analyze blame` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ \
`systemd-analyze blame | grep zabbix` \
`systemd-analyze plot > graph.svg` —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Scalable Vector Graphics –æ–ø–∏—Å–∞–Ω–Ω—ã–π XML

`history` –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ \
`history -c` –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

`who -b` –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è \
`last` –∏—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ \
`last -n 5 reboot` –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ \
`last shutdown` –∏—Å—Ç–æ—Ä–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∏–π

`arch` –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã \
`lsb_release -a` –≤–µ—Ä—Å–∏—è –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ \
`uname -srv` –≤–µ—Ä—Å–∏—è —è–¥—Ä–∞ \
`cat /proc/version` –≤–µ—Ä—Å–∏—è —è–¥—Ä–∞ –∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ \
`cat /etc/os-release` –æ–ø–∏—Å–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ –∏ –≤–µ—Ä—Å–∏—è –û–° \
`hostnamectl` –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (Operating System, Kernel, Architecture, Hardware Vendor/Model)

`uptime` –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã, –∫–æ–ª-–≤–æ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, Load average - —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1, 5 –∏ 15 –º–∏–Ω—É—Ç (2.00 - —ç—Ç–æ 100% –Ω–∞ –¥–≤–∞ —è–¥—Ä–∞) \
`dmidecode -t bios` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ (system/baseboard/processor/memory) \
`dmidecode -s bios-vendor` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ (bios-version/bios-release-date/baseboard-manufacturer/system-manufacturer/processor-version) \
`dmidecode -t baseboard` –≤–µ—Ä—Å–∏—è –º–∞—Ç–µ—Ä–∏–Ω—Å–∫–æ–π –ø–ª–∞—Ç—ã, Video –∏ Sound –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å

`nproc` –∫–æ–ª-–≤–æ —è–¥–µ—Ä \
`lscpu` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ \
`cat /proc/cpuinfo` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ \
`cat /proc/cpuinfo | grep "core id" | wc -l` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —è–¥–µ—Ä (–±–µ–∑ —É—á–µ—Ç–∞ –ø–æ—Ç–æ–∫–æ–≤) \
`cat /proc/partitions` –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ä–∞–∑–¥–µ–ª—ã –Ω–∞ —ç—Ç–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è \
`cat /proc/asound/cards` Audio PCI \
`cat /proc/cmdline` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è —Ñ–∞–π–ª–∞ –æ–±—Ä–∞–∑–∞ —è–¥—Ä–∞ –∏ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ GRUB (–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤–≤–µ–¥–µ–Ω—ã –≤—Ä—É—á–Ω—É—é) \
`cat /etc/default/grub` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥–∞ update-grub –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞ /boot/grub/grub.cfg \
`cat /boot/grub/grub.cfg` –∫–æ–º–∞–Ω–¥–∞ update-grub –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ —Ñ–∞–π–ª–µ /etc/default/grub \
`cat /proc/loadavg` —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–ª–∏ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –∂–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1, 5 –∏ 15 –º–∏–Ω—É—Ç. 4-–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç/–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ. –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —ç—Ç–æ PID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

`lspci` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫ –º–∞—Ç–µ—Ä–∏–Ω—Å–∫–æ–π –ø–ª–∞—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –ø–æ —à–∏–Ω–µ PCIe \
`lspci | grep -i vga` —É–∑–Ω–∞—Ç—å –∫–∞–∫–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ (VGA controller) \
`lspci | grep -i audio` Audio controller \
`lspci | grep -i ethernet` Ethernet controller \
`lspci | grep -i scsi` SCSI storage controller \
`lspci | grep -i sata` SATA storage controller \
`lspci | grep "USB controller"` \
`lspci | grep 02:00.0` —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —Å–ª–æ—Ç—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ \
`lspci -vv | grep -iE "driver"` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤ —è–¥—Ä–∞ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ \
`lsusb -vt` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ USB —É—Å—Ç–æ–π—Å—Ç–≤–∞—Ö (–ø—Ä–∏–Ω—Ç–µ—Ä—ã, Bluetooth –∞–¥–∞–ø—Ç–µ—Ä, –º—ã—à–∫–∞, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)

`lshw -short` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫–∞–∂–¥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É \
`lshw -class bus` Motherboard/USB \
`lshw -class display` VGA controller \
`lshw -class network` \
`lshw -class disk` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∂–µ—Å—Ç–∫–æ–º –¥–∏—Å–∫–µ (product, vendor, size, capabilities: 7200rpm) \
`lshw | grep product`

`ls /sys/class/net` —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ \
`cat /proc/net/dev` —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (bytes, packets, errs, drop) –¥–ª—è Receive (–ü—Ä–∏–µ–º) –∏ Transmit (–ü–µ—Ä–µ–¥–∞—á–∞) \
`ethtool -S ens33` —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–¥–ª—è —Å–±—Ä–æ—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω—É–∂–Ω–æ ip down –∏ –≤—ã–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª—å —è–¥—Ä–∞ —Å –¥—Ä–∞–π–≤–µ—Ä–æ–≤ modprobe -r module –∏ –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ) \
`ethtool ens33 | grep -Ei "wake-on|speed"` –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Wake-on-Lan –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ \
`ethtool -i ens33` –¥—Ä–∞–π–≤–µ—Ä —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç—ã \
`ethtool ens33 -p 100` –≤–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –Ω–∞ —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç–µ –Ω–∞ 100 —Å–µ–∫—É–Ω–¥

`cat /sys/block/sda/stat` —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞ sda \
`lsmod` —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞ –≤–º–µ—Å—Ç–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ \
`/proc/modules` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞ \
`modinfo ip_tables` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –º–æ–¥—É–ª–µ \
`ls /etc/*modprobe*` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞ \
`cat /etc/modprobe.d/mdadm.conf \
`/etc/modules-load.d/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã

`ls -l /var/lib/apt/periodic/update-success-stamp` –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è apt update \
`ls -l /var/cache/apt/pkgcache.bin` –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫—ç—à–∞ –ø–∞–∫–µ—Ç–æ–≤ apt \
`HISTTIMEFORMAT="%d/%m/%y %T " history | grep "apt update"` –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å —Ç–æ—á–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏

`cat /etc/hostname` –∏–º—è —Ö–æ—Å—Ç–∞ \
`cat /etc/services | grep -iE "ntp|zabbix"` —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏–º –ø–æ—Ä—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ \
`cat /etc/mime.types | grep -Ew "json|csv"` —Å–ø–∏—Å–æ–∫ —Å–æ–ø–æ—Å—Ç–∞–ª–≤–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ

`cat /etc/hosts` –ª–æ–∫–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏ ip –≤ –∏–º—è \
`cat /etc/hosts.allow && cat /etc/hosts.deny` –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º \
`cat /etc/hosts.{allow,deny} | grep -Pv "^$|^#"` \
`echo "in.telnetd: 192.168.3., .domain.ru" >> /etc/hosts.allow` —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–æ–¥—Å–µ—Ç–∏ –∏ –¥–æ–º–µ–Ω–∞

`ls -l /dev | grep sd` –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏—Å–∫–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ \
`ls -l /dev | grep -wo sd.` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –¥–∏—Å–∫–æ–≤ \
`cat /proc/diskstats` —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–æ–≤ \
`cat /proc/stat` cpu user/nice/system/idle/iowait/irq/softirq/steal_time, ctxt - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö, btime - –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö —Å –Ω–∞—á–∞–ª–∞ —ç–ø–æ—Ö–∏ unix, processes -  —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø–æ—Ç–æ–∫–æ–≤, –≤–∫–ª—é—á–∞—è (–Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è—Å—å –∏–º–∏) —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞–Ω—ã –≤—ã–∑–æ–≤–∞–º–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ fork() –∏ clone(), procs_blocked - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ \
`stat -f /dev/sda` \
`cat /proc/buddyinfo` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏ –≤ —è–¥—Ä–µ Linux, —Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π –ø–∞–º—è—Ç–∏ \
`cat /proc/cgroups` —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ cgroups, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ª—é–±—ã–º —Ä–µ—Å—É—Ä—Å–∞–º –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞, –∞ —Ç–∞–∫–∂–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ

## sysctl

`sysctl -a` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —è–¥—Ä–∞ Linux (Kernel), –≥–¥–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –≤–∏–¥–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø—É—Ç–∏ —Ñ–∞–π–ª–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /proc/sys (–≤–º–µ—Å—Ç–æ —Å–ª–µ—à–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—á–∫–∞) \
`sysctl net.ipv6.conf.all` \
`sysctl net.ipv6.conf.all.disable_ipv6=1` –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª IPv6 (> /proc/sys/net/ipv6/conf/ens33/disable_ipv6) \
`sysctl net.ipv6.conf.ens33.disable_ipv6=1` –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ens33 \
`sysctl --system` –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–æ–≤/–≤–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –≤ —Ñ–∞–π–ª–∞—Ö (—É–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ sysctl) \
`sysctl -w net.ipv6.conf.ens33.disable_ipv6=1` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (-w –∑–∞–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª) \
`sysctl fs.file-nr` –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è \
`sysctl -a | grep fs.file-max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ (–¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞ –û–° \
`nano /proc/sys/fs/file-max` –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª-–≤–∞ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ \
`echo "fs.file-max=500000" >> /etc/sysctl.conf` –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é sysctl.conf \
`sysctl -p` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ \
`sysctl fs.nr_open` –ª–∏–º–∏—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ \
`ls /proc/1/fd/ | wc -l` —É–∑–Ω–∞—Ç—å –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ —É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Å PID 1 \
`sysctl fs.aio-nr` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –≤ –º–∞—Å—à—Ç–∞–±–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã (Asynchronous IO number requests) \
`sysctl fs.aio-max-nr` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è fs.aio-max-nr ‚Äî 1048576, –Ω–æ –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ ASE —Å–æ –º–Ω–æ–≥–∏–º–∏ —è–¥—Ä–∞–º–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ \
`sysctl fs.inotify.max_queued_events` –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ —è–¥—Ä–∞ inotify –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ \
`sysctl fs.inotify.max_user_watches` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç inotify \
`sysctl fs.inotify.max_user_instances` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ inotify, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
`sysctl fs.mqueue.queues_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—á–µ—Ä–µ–¥–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π POSIX, —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞–º (–∏ –∏—Ö –ø–æ—Ç–æ–∫–∞–º) –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ mq_open) \
`sysctl fs.mqueue.msg_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–∏ \
`sysctl fs.mqueue.msgsize_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è \
`sysctl vm.min_free_kbytes` –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å \
`sysctl vm.swappiness` –ø—Ä–æ—Ü–µ–Ω—Ç —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏, –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ SWAP —Ä–∞–∑–¥–µ–ª \
`sysctl -w vm.swappiness=80` –ø—Ä–∏ 80% —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ (—Å–≤—ã—à–µ 20% –∑–∞–Ω—è—Ç–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏) –Ω–∞—á–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è SWAP, –≤ –∫–æ—Ç–æ—ã–π –ø–æ–º–µ—â—è—é—Ç—Å—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–º—è—Ç–∏ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —ç—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø—Ä–æ—Ü–µ—Å—Å –∏—Ö –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∏—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–¥–∫–∞—á–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å (–¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å –¥–∏—Å–∫–∞ –≤ –ø–∞–º—è—Ç—å) \
`sysctl -w vm.swappiness=10` —Ñ–∞–π–ª –ø–æ–¥–∫–∞—á–∫–∏ (–≤—ã–≥—Ä—É–∑–∫–∞ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å) –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —Å–≤–æ–±–æ–¥–Ω–æ 10% –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ \
`sysctl vm.vfs_cache_pressure` —Å–∫–æ—Ä–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è dentry –∏ inode –∏–∑ –∫—ç—à–∞ (100 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`sysctl vm.dirty_background_ratio` –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –æ–±—â–µ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω —Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º –∫—ç—à–µ–º, –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–π –¥–µ–º–æ–Ω pdflush (dirty page flush) –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ –¥–∏—Å–∫. –ö–æ–≥–¥–∞ –æ–±—ä–µ–º —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞, —è–¥—Ä–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é wakeup_bdflush() –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ pdflush, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –ø–∞–º—è—Ç–∏ background_writeout() –Ω–∞ –¥–∏—Å–∫, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –¥–∏—Å–∫. \
`sysctl -w vm.dirty_background_ratio=5` \
`sysctl vm.dirty_ratio` –≤–µ—Ä–Ω—Ö–Ω–∏–π –ø—Ä–µ–¥–µ–ª –æ–±—ä–µ–º–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç free Available –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–¥–µ–ª–µ–Ω –ø–æ–¥ PageCache –¥–æ –∏—Ö –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫, –Ω–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ –≤—Å–µ –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–∞ –¥–∏—Å–∫ –Ω–µ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –≥—Ä—è–∑–Ω—ã–µ (Dirty) —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã—à–µ —á–µ–º dirty_background_ratio \
`sysctl vm.dirty_expire_centisecs` –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä—è–∑–Ω—ã—Ö (Dirty) —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫—ç—à–µ –≤ —Å–æ—Ç—ã—Ö –¥–æ–ª—è—Ö —Å–µ–∫—É–Ω–¥ (3000 = 30 —Å–µ–∫—É–Ω–¥) –¥–ª—è –∏—Ö –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫ —Å —Ü–µ–ª—å—é. –§—É–Ω–∫—Ü–∏—è wb_kupdate() –¥–µ–º–æ–Ω–∞ pdflush –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –±–æ–ª–µ–µ —á–µ–º dirty_expire_centisecs –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫—ç—à–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ –¥–∏—Å–∫–µ, —Ç.–∫. –ø—Ä–∏ —Å–±–æ–µ, —Ç.–∫. —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. \
`sysctl vm.dirty_writeback_centisecs` –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ª–µ–∂–∞—Ç –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫ (500 - 5 —Å–µ–∫—É–Ω–¥) \
`sysctl abi.vsyscall32` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ 32 –±–∏—Ç–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ 64 –±–∏—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç) \
`sysctl kernel.hostname` –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ \
`sysctl kernel.printk` —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è \
`sysctl -w kernel.printk="2 4 1 7"` \
`sysctl net.ipv4.ip_default_ttl` –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤–µ–ª–∏—á–∏–Ω—ã Time To Live –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏ –ø–∞–∫–µ—Ç–∞ –≤ Internet - –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –ø–∞–∫–µ—Ç –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–π —Ä–æ—É—Ç–µ—Ä, –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä –∏ —Ç.–ø. –≤–µ–ª–∏—á–∏–Ω–∞ TTL –ø–∞–∫–µ—Ç–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1) \
`sysctl net.ipv4.ip_no_pmtu_disc` –∑–∞–ø—Ä–µ—â–∞–µ—Ç –ø–æ–∏—Å–∫ Path Maximum Transfer Unit (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏, —ç—Ç–æ –Ω–µ MTU), –∫–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é, –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π —Ö–æ—Å—Ç \
`sysctl net.ipv4.tcp_mem` –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (–º–∏–Ω–∏–º—É–º, —Ä–µ–∂–∏–º –Ω–∞–≥—Ä—É–∑–∫–∏, –º–∞–∫—Å–∏–º—É–º), –∫–æ—Ç–æ—Ä–∞—è c–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ TCP, –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (–æ–±—ã—á–Ω–æ 4–ö–±), –∞ –Ω–µ –±–∞–π—Ç–∞—Ö. –ü–æ–∫–∞ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏ –¥–ª—è —Ü–µ–ª–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ TCP –Ω–∏–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —Å –ø–∞–º—è—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ TCP —Å–æ–∫–µ—Ç–∞–º–∏, –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–≥—Ä—É–∑–∫–∏ TCP –Ω–∞—á–∏–Ω–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –ø–∞–º—è—Ç—å, –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π - –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω—É–∂–¥ TCP –∏ –ø—Ä–∏ –µ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏, –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤. \
`sysctl net.ipv4.tcp_rmem` –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞ —Å–æ–∫–µ—Ç–æ–≤ TCP –¥–ª—è –ø—Ä–∏–µ–º–∞. –ö–∞–∂–¥—ã–π —Å–æ–∫–µ—Ç TCP –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å –ø–æ —Ñ–∞–∫—Ç—É —Å–≤–æ–µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äì 4096 –±–∞–π—Ç, 4 –ö–±) –∏ –µ–≥–æ –Ω–µ —Å—Ç–æ–∏—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å, —Ç.–∫. –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –∑–∞–π–º—É—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤–∑–∞–º–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ rmem_default (–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏), –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç —É–¥–≤–æ–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, 87380 * 2 bytes, –∏–ª–∏ 174760 –±–∞–π—Ç (170 –ö–±). –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–µ–º–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞, —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç –º–∞–∫—Å–∏–º—É–º–∞, –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤ rmem_max \
`sysctl net.ipv4.tcp_wmem` –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞ —Å–æ–∫–µ—Ç–æ–≤ TCP –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ \
`sysctl net.core.rmem_default` –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏–º–µ–µ—Ç –Ω–∏–∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —á–µ–º tcp_rmem) \
`sysctl net.core.wmem_default` –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é \
`sysctl net.core.rmem_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –Ω–∞ —Å–æ–∫–µ—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–π—Ç–∞—Ö (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –∏–º–µ–µ—Ç –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —á–µ–º tcp_rmem) \
`sysctl net.core.wmem_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –Ω–∞ —Å–æ–∫–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–π—Ç–∞—Ö \
`sysctl net.core.optmem_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –ø–∞–º—è—Ç–∏ \
`sysctl -w net.core.rmem_max=26214400 && sysctl -w net.core.rmem_default=26214400` —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 25 –ú–ë–∞–π—Ç \
`sysctl -w net.core.wmem_max=26214400 && sysctl -w net.core.wmem_default=26214400` —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 25 –ú–ë–∞–π—Ç \
`sysctl net.ipv4.tcp_no_metrics_save` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (0) TCP —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ (1) TCP –Ω–µ –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π \
`sysctl net.ipv4.icmp_echo_ignore_all` –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —è–¥—Ä–æ –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ icmp –∑–∞–ø—Ä–æ—Å—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DOS –∞—Ç–∞–∫) \
`sysctl net.ipv4.icmp_echo_ignore_broadcasts` –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã ICMP ECHO, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ \
`sysctl net.ipv4.icmp_ignore_bogus_error_responses` –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–æ—á–Ω—ã–µ ICMP –∑–∞–ø—Ä–æ—Å—ã \
`sysctl net.ipv4.conf.all.accept_source_route` —Ä–∞–∑—Ä–µ—à–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç—å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –ø–∞–∫–µ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –ø–æ —Å–µ—Ç–∏ Internet, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å –ø—É–Ω–∫—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ç–∏, –Ω–æ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–º–µ–Ω—ã –∞–¥—Ä–µ—Å–æ–≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –∏ –º–æ–∂–µ—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥—Å—É–Ω—É—Ç—å –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Å—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç (–∞—Ç–∞–∫–∞ Man In The Middle). \
`sysctl net.ipv4.conf.all.accept_redirects` –∑–∞–ø—Ä–µ—Ç–∏—Ç—å(0)/—Ä–∞–∑—Ä–µ—à–∏—Ç—å(1) –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å ICMP –ø–∞–∫–µ—Ç—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è \
`sysctl net.ipv4.conf.all.send_redirects` \
`sysctl net.ipv4.conf.all.secure_redirects` \
`sysctl net.ipv4.ip_forward` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç (1) –∏–ª–∏ –∑–∞–ø—Ä–µ—â–∞–µ—Ç (0) –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ç–µ–∫—É—â–∏–π —Ö–æ—Å—Ç \
`sysctl net.ipv4.conf.default.forwarding` –≤–∫–ª—é—á–∏—Ç—å —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥ –ø–∞–∫–µ—Ç–æ–≤ - —Ä–∞–∑—Ä–µ—à–∏—Ç—å —è–¥—Ä—É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Å—É—â–µ—Ç—Å–≤–ª—è—Ç—å –ø—Ä–æ–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞ —Å –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ –¥—Ä—É–≥–æ–π \
`sysctl net.ipv4.ip_local_port_range` –¥–∏–∞–ø–∞–∑–æ–Ω –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (—Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–∫–µ—Ç–æ–≤) \
`sysctl net.ipv4.tcp_max_tw_buckets` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Å–æ–∫–µ—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ TIME-WAIT –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–µ–π—à–∏—Ö —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–µ–π DoS-–∞—Ç–∞–∫ \
`sysctl net.ipv4.tcp_tw_recycle` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç/–∑–∞–ø—Ä–µ—â–∞–µ—Ç –±—ã—Å—Ç—Ä—É—é —É—Ç–∏–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ TIME-WAIT \
`sysctl net.ipv4.tcp_tw_reuse` –ø–æ–∑–≤–æ–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TIME-WAIT —Å–æ–∫–µ—Ç–æ–≤ –≤ —Å–ª—É—á–∞—è—Ö, –µ—Å–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å—á–∏—Ç–∞–µ—Ç —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º \
`sysctl net.ipv4.tcp_rfc1337` –∑–∞—â–∏—Ç–∞ –æ—Ç TIME-WAIT –∞—Ç–∞–∫ \
`sysctl net.ipv4.tcp_max_orphans` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ "–æ—Å–∏—Ä–æ—Ç–µ–≤—à–∏—Ö" TCP —Å–æ–∫–µ—Ç–æ–≤, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–∞–∫–∏–º-–ª–∏–±–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–∞–π–ª–∞ (user file handle), –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è. –≠—Ç–æ—Ç –ø–æ—Ä–æ–≥ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∞—Ç–∞–∫–∏ DoS –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –û–ó–£, –∫–∞–∂–¥–æ–µ orphan-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–≥–ª–æ—â–∞–µ—Ç –æ–∫–æ–ª–æ 64 –ö–±–∞–π—Ç –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º–æ–π –Ω–∞ –¥–∏—Å–∫ (unswappable) –ø–∞–º—è—Ç–∏ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–±—Ä–æ—à–µ–Ω–∞ –≤ SWAP. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —ç—Ç–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º ‚Äì –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∂—É—Ä–Ω–∞–ª –±—É–¥–µ—Ç –ø–æ–¥–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: TCP: too many of orphaned sockets, –∏ —ç—Ç–æ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –ø–æ–≤–æ–¥–æ–º –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è tcp_fin_timeout –∏–ª–∏ tcp_orphan_retries. \
`sysctl -w net.ipv4.tcp_max_orphans=65536` \
`sysctl net.ipv4.tcp_orphan_retries` —á–∏—Å–ª–æ –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ–Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∑–∞–∫—Ä—ã—Ç–æ–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ 7, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–∏–æ–¥—É –æ—Ç 50 —Å–µ–∫—É–Ω–¥ –¥–æ 16 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç RTO (Retransmission Timeout). \
`sysctl net.ipv4.tcp_fin_timeout` –∑–∞–¥–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è —Å–æ–∫–µ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ FIN-WAIT-2 –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –∑–∞–∫—Ä—ã–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–æ —Å–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω—ã. –ö–∞–∂–¥—ã–π —Å–æ–∫–µ—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –≤ –ø–∞–º—è—Ç–∏ 1.5 –ö–±, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö. \
`sysctl net.ipv4.tcp_syncookies` –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç –∞—Ç–∞–∫ SYN flood, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è net.ipv4.tcp_max_syn_backlog, –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SYN –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–±–∏–≤–∞–µ—Ç –≤—Å—é –æ—á–µ—Ä–µ–¥—å, –≤–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º Syn cookies. SYN cookies –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—á–µ—Ä–µ–¥—å SYN, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —è–¥—Ä–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥—ã–π SYN –ø–∞–∫–µ—Ç, –∫–∞–∫ –æ–±—ã—á–Ω–æ SYN/ACK, –Ω–æ —Ç—É–¥–∞ –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ IP –∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ—Ä—Ç–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å—ã–ª–∫–∏ –ø–∞–∫–µ—Ç–∞. –ê—Ç–∞–∫—É—é—â–∏–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç —ç—Ç–∏ –ø–∞–∫–µ—Ç—ã, –∞ –ø–æ—ç—Ç–æ–º—É –∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ –Ω–∏—Ö. –ü—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏, –±—É–¥–µ—Ç –ø–æ—Å–ª–∞–Ω —Ç—Ä–µ—Ç–∏–π –ø–∞–∫–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —á–∏—Å–ª–æ, –∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –±—ã–ª –ª–∏ —ç—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ SYN cookie –∏, –µ—Å–ª–∏ –¥–∞, —Ç–æ —Ä–∞–∑—Ä–µ—à–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–∂–µ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ SYN –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏. \
`sysctl net.ipv4.tcp_fastopen` –ø–æ–º–æ–≥–∞–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Å–µ—Ç–∏, –ø–æ–∑–≤–æ–ª—è—è –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–ª–∏–µ–Ω—Ç–æ–º –ø–µ—Ä–≤–æ–≥–æ TCP SYN (3 - –≤–∫–ª—é—á–∞–µ—Ç –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö) \
`sysctl net.ipv4.tcp_max_syn_backlog` —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ) –∑–∞–ø–æ–º–∏–Ω–∞–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ø—ã—Ç–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (SYN-–ø–∞–∫–µ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Waiting Acknowledgment) –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–º TCP SYN –ø–∞–∫–µ—Ç–∞, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ –ø–æ–ª—É—á–µ–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π) \
`sysctl -w net.ipv4.tcp_max_syn_backlog=4096` —É–≤–µ–ª–∏—á–∏—Ç—å, –µ—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ \
`sysctl net.core.somaxconn` —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ) –ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–æ–∫–µ—Ç–æ–≤) –æ–∂–∏–¥–∞—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ï—Å–ª–∏ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ SYN-–ø–∞–∫–µ—Ç–∞ (synchronize) –∫–ª–∏–µ–Ω—Ç–æ–º –±—ã–ª –ø–æ–ª—É—á–µ–Ω –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø–∞–∫–µ—Ç SYN-ACK (acknowledges), —Å–µ—Ä–≤–µ—Ä –æ–∂–∏–¥–∞–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ ACK –ø–∞–∫–µ—Ç–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. \
`sysctl net.ipv4.tcp_syn_retries` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–¥–∞—á–∏ SYN-–ø–∞–∫–µ—Ç–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –Ω–∞ –∫–∞–∂–¥—É—é –ø–æ–ø—ã—Ç–∫—É –æ—Ç–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ 30-40 —Å–µ–∫—É–Ω–¥. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é 5 = 180 —Å–µ–∫—É–Ω–¥–∞–º. \
`sysctl net.ipv4.tcp_synack_retries` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–¥–∞—á–∏ SYN-ACK-–ø–∞–∫–µ—Ç–∞ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ SYN-–∑–∞–ø—Ä–æ—Å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥—Ä—É–≥–∏–º —Ö–æ—Å—Ç–æ–º, –µ—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ –æ–¥–Ω–æ–≥–æ, –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 9 —Å–µ–∫—É–Ω–¥ \
`sysctl net.core.netdev_max_backlog` —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –ø–∞–∫–µ—Ç–æ–≤ –º–µ–∂–¥—É —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç–æ–π –∏ —è–¥—Ä–æ–º, –µ—Å–ª–∏ —è–¥—Ä–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã (–µ—Å–ª–∏ —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —è–¥—Ä–æ –º–æ–∂–µ—Ç –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å) –∏ –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Ç–æ –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –º–æ–∂–Ω–æ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –ø–∏–∫–æ–≤—ã–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏ \
`sysctl -a | grep net.ipv4.tcp_keepalive` –ø–æ—Å–ª–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ–∫–µ—Ç–∞ –ø–æ—Å—ã–ª–∞–µ—Ç –ø–∞–∫–µ—Ç keepalive –Ω–∞ –≤—Ç–æ—Ä–æ—É—é —Å—Ç–æ—Ä–æ–Ω—É, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –Ω—É–ª–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–µ—Ä–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ tcp_keepalive_time –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–µ tcp_keepalive_intvl —Å–µ–∫—É–Ω–¥ tcp_keepalive_probes —Ä–∞–∑, –µ—Å–ª–∏ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, —Å–æ–∫–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è \
`tcp_keepalive=$(sysctl -a | grep net.ipv4.tcp_keepalive | grep -Po "(?<=\=\s)[0-9]+")` –∑–∞–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π \
`echo $tcp_keepalive | awk '{print $3+($1*$2)}'` 7200+(75*7) \
`sysctl net.ipv4.conf.all.rp_filter` 1 - —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ 2 - —Å–≤–æ–±–æ–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–∫–ª—é—á–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ (reverse path filter) –∏–ª–∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–º–µ–Ω—ã –∞–¥—Ä–µ—Å–æ–≤ (—Å–ø—É—Ñ–∏–Ω–≥–∞), –≤—Å–µ —á—Ç–æ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∞–¥—Ä–µ—Å–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Ç–∞–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π, –µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã–π –ø–∞–∫–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä, –∞ –∏—Å—Ö–æ–¥—è—â–∏–π —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π, –º–æ–≥—É—Ç —Ç–µ—Ä—è—Ç—å—Å—è –ø–∞–∫–µ—Ç—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –∑–∞–¥–∞–Ω —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. \
`sysctl -w net.ipv4.conf.ens33.rp_filter=1` –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ens33 \
`sysctl net.ipv4.conf.all.log_martians` –≤–∫–ª—é—á–∞–µ—Ç/–æ—Ç–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ \
`sysctl net.ipv4.tcp_window_scaling` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç/–∑–∞–ø—Ä–µ—â–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ TCP-–æ–∫–Ω–∞, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ RFC 1323. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ TCP-–ø–∞–∫–µ—Ç–æ–≤ –ø–æ —Ç–æ–ª—Å—Ç—ã–º –∫–∞–Ω–∞–ª–∞–º –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ TCP-–æ–∫–Ω–∞. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –æ–∫–Ω–æ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–º–µ—Ä –±–æ–ª—å—à–µ, —á–µ–º 216 –±–∞–π—Ç (65 –ö–±). –†–∞–∑—Ä–µ—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ TCP-–æ–∫–Ω–∞ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –µ–≥–æ —Ä–∞–∑–º–µ—Ä –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. \
`sysctl net.ipv4.tcp_retries2` \
`sysctl net.ipv4.tcp_abort_on_overflow` –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —è–¥—Ä–æ –æ—Ç–≤–µ—Ä–≥–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –∏—Ö –ø–æ—Å—Ç—É–ø–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—à–µ, —Å —á–µ–º —Å–∏—Å—Ç–µ–º–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è \
`sysctl net.ipv4.ip_nonlocal_bind` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –ª–æ–∫–∞–ª—å–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º –≤—ã—Å—Ç—É–ø–∞—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –≤–Ω–µ—à–Ω–µ–≥–æ (—á—É–∂–æ–≥–æ) IP –∞–¥—Ä–µ—Å–∞, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ IP –∞–¥—Ä–µ—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–Ω–∏—Ñ—Ñ–∏–Ω–≥ —á—É–∂–æ–≥–æ —Ç—Ä–∞—Ñ—Ñ–∏–∫–∞ \
`net.ipv4.ipfrag_low_thresh` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –≤—ã–¥–µ–ª—è–µ–º—ã–π –ø–æ–¥ –æ—á–µ—Ä–µ–¥—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 2147483647, –∫–æ–≥–¥–∞ –¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞, —Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ä–≥–∞—Ç—å –≤—Å–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –ø–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω—ã —É–∑–ª–æ–º-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º. \
`sysctl net.ipv4.netfilter.ip_conntrack_max` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–µ—Ö–∞–Ω–∏–∑–º–∞ connection tracking (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ iptables)

## limits

`cat /etc/security/limits.conf | grep -Ev "^$|^#"`
```
<user/@group>  <soft/hard>  <core/rss/as/nproc/cpu>  <value>
@zabbix           soft              nofile          65535 # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å soft –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ (nofile) –¥–ª—è –≥—Ä—É–ø–ø—ã zabbix (–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ –ª—é–±—É—é —Å—Ç–æ—Ä–æ–Ω—É, –ø–æ–∫–∞ –æ–Ω–æ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç hard)
@zabbix           hard              nofile          65535 # –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ hard –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –≤ –º–µ–Ω—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É –æ—Ç –∏–º–µ–Ω–∏ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
*                 soft              nofile          2048 # –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (-n)
*                 hard              nofile          8192
zabbix            soft              as              100 # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –ö–ë (-m)
zabbix            hard              as              100
*                 soft              msgqueue        unlimited # —Å–Ω—è—Ç–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–∞–º—è—Ç–∏ (-q)
*                 hard              msgqueue        unlimited
*                 soft              nproc           unlimited # –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (-u)
*                 hard              nproc           unlimited
user              hard              maxlogins       1 # –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SSH-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π/—Å–µ—Å—Å–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∞–Ω—Å–æ–≤ SSH –ø–æ–¥ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
*                 hard              maxsyslogins    1 # –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∞–Ω—Å–æ–≤/–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π SSH (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º root)
```
`ulimit -a` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```
core file size              (blocks, -c) 0
data seg size               (kbytes, -d) unlimited
scheduling priority                 (-e) 0
file size                   (blocks, -f) unlimited
pending signals                     (-i) 15052
max locked memory           (kbytes, -l) 496180
max memory size             (kbytes, -m) unlimited
open files                          (-n) 1024
pipe size                (512 bytes, -p) 8
POSIX message queues         (bytes, -q) 819200
real-time priority                  (-r) 0
stack size                  (kbytes, -s) 8192
cpu time                   (seconds, -t) unlimited
max user processes                  (-u) 15052
virtual memory              (kbytes, -v) unlimited
file locks                          (-x) unlimited
```
`ulimit -Sn` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Soft (-S) –¥–ª—è nofile (-n) \
`ulimit -Hn` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Hard (-H) \
`ulimit -n 3000` –∏–∑–º–µ–Ω–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) \
`ulimit -Sm 1500000` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ soft (-S) –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (-m) –≤ 1500 –ú–± –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`ulimit -u 5000` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (-u) \
`ulimit -s` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (stack size) –∫–æ–º–∞–Ω–¥—ã/—Å–∫—Ä–∏–ø—Ç–∞ (bash: /usr/bin/diff: Argument list too long) \
`ulimit -m` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ \
`ulimit -v` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ \
`ulimit -f` –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ \
`ulimit -t` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

`systemctl edit rsyslog` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Unit –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
```
[Service]
LimitNOFILE=1617596
LimitNOFILESoft=1617596
```
`systemctl restart rsyslog` \
`pid=$(ps -A | grep rsyslogd | awk '{print $1}')` –ø–æ–ª—É—á–∏—Ç—å pid –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`cat /proc/$pid/limits` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

## quota

`nano /etc/fstab` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–≤–æ—Ç—É —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
```
/dev/sda  /  ext4  defaults,usrquota,grpquota  0 0
```
`mount -o remount,rw /` –ø–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –≤ —Ä–µ–∂–∏–º–µ read and write \
`mount | grep quota` \
`quotacheck -favugm` –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞–ª–∏—á–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ aquota.user –∏ aquota.group ‚Äî –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç, –∫–æ–º–∞–Ω–¥–∞ –∏—Ö —Å–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ \
`quotaon -avug` –≤–∫–ª—é—á–∏—Ç—å –∫–≤–æ—Ç—É \
`edquota -u lifailon` —Å–æ–∑–¥–∞—Ç—å –∫–≤–æ—Ç—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã (-g) –Ω–∞ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–ª-–≤–æ —Ñ–∞–π–ª–æ–≤
```
Disk quotas for user lifailon (uid 1000):
  Filesystem                            blocks       soft       hard     inodes     soft     hard
  /dev/mapper/ubuntu--vg-ubuntu--lv     397112       400M       500M      3004       0        0
```
`edquota -p lifailon user` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–≤–æ—Ç—É –Ω–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`edquota -t` –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –æ—Ç—Å—Ä–æ—á–∫–∏ soft –∫–≤–æ—Ç—ã –¥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç hard (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7 –¥–Ω–µ–π) \
`quota lifailon -s` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–≤–æ—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`repquota -us /` –æ—Ç—á–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø (-u/-g), —Ç–µ–∫—É—â–∏–π used –∏ soft/hard –¥–ª—è Space limits –∏ File limits, +-/-+/++ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥–µ–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º–∞
```
lifailon  --     388M     400M     500M     3004     0     0
```
`su lifailon` \
`dd if=/dev/zero of=/tmp/test.file bs=1024000 count=400` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º 400MB
```
dd: error writing '/tmp/test.file': Disk quota exceeded
117645312 bytes (118 MB, 112 MiB) copied, 0.158031 s, 744 MB/s
```
`ls -lh /tmp/test.file`
```
-rw-rw-r-- 1 lifailon lifailon 113M Sep 26 14:37 /tmp/test.file
```
## Bearstech

### pussh

[Pussh](https://github.com/bearstech/pussh) ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ SSH –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ö–æ—Å—Ç–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –≤—ã–≤–æ–¥—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏ –∫–∞–∂–¥–æ–≥–æ —Ö–æ—Å—Ç–∞. –ë—ã–ª –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º Bearstech (—Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ –ü–∞—Ä–∏–∂–µ, –§—Ä–∞–Ω—Ü–∏—è) –ø—Ä–∏–º–µ—Ä–Ω–æ —Å 2008 –≥–æ–¥–∞.
```bash
mkdir -p $HOME/.local/bin
sudo curl -s https://raw.githubusercontent.com/bearstech/pussh/refs/heads/master/pussh -o $HOME/.local/bin/pussh
sudo chmod +x $HOME/.local/bin/pussh

bash pussh -h root@192.168.3.102,root@192.168.3.103 uname -a

echo -e "root@192.168.3.102\nroot@192.168.3.103" > hostlist
pussh -c -f hostlist uname -a
```
### quickbench

[quickbench](https://github.com/bearstech/quickbench) - —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

```bash
curl -sSL https://raw.githubusercontent.com/bearstech/quickbench/refs/heads/main/quickbench | bash
```

## fetch

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤, –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

`curl -s https://raw.githubusercontent.com/dylanaraps/neofetch/refs/heads/master/neofetch | bash` \
`curl -s https://raw.githubusercontent.com/dylanaraps/pfetch/refs/heads/master/pfetch | bash` \
`curl -s https://raw.githubusercontent.com/KittyKatt/screenFetch/refs/heads/master/screenfetch-dev | bash` \
`curl -s https://raw.githubusercontent.com/ThatOneCalculator/NerdFetch/refs/heads/main/nerdfetch | bash` \
`curl -s https://raw.githubusercontent.com/m0zgen/system-checks/master/system-check.sh | sudo bash` \
`curl -s https://raw.githubusercontent.com/Lifailon/hwstat/refs/heads/rsa/hwstat.sh | bash`
```bash
curl -s -L "https://github.com/fastfetch-cli/fastfetch/releases/download/2.40.1/fastfetch-linux-amd64.deb" -o /tmp/fastfetch.deb
sudo dpkg -i /tmp/fastfetch.deb && rm /tmp/fastfetch.deb
fastfetch
```
## networkmanager

`apt install network-manager` \
`systemctl status NetworkManager` \
`nmcli device status` —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ \
`nmcli general status` \
`nmcli connection show` —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (ethernet, vpn –∏ WiFi-—Å–µ—Ç–µ–π) \
`nmcli device wifi list` —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Wi-Fi-—Å–µ—Ç–µ–π \
`nmcli connection show "–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 2"` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏ \
`nmcli connection up "–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 2"` –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è \
`nmcli conn down "–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 2"` –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è \
`nmcli radio wifi` —Å–æ—Å—Ç–æ—è–Ω–∏–µ Wi-Fi \
`nmcli connection add con-name "dhcp" type ethernet ifname ens33` —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞—Ç—å —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ethernet (–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ) –∏ ifname, –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ \
`nmcli conn modify "dhcp" ipv4.dns 8.8.8.8` –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (modify) \
`nmcli radio wifi on` –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å (off) Wi-Fi \
`nmcli device wifi connect "TP-Link" password 12345678 name "TP-Link Wifi"` –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Wi-Fi —Å–µ—Ç–∏ \
`nmcli networking off` –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å —á–µ—Ä–µ–∑ (–µ—Å–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Network Manager, —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –±–ª–æ–∫–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ renderer –¥–ª—è netplan) \
`nmcli networking on` –≤–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å \
`systemctl restart NetworkManager`

## wireless

`apt install wireless-tools` \
`iwconfig` \
`apt install iw` \
`iw list` \
`apt install wavemon` \
`wavemon` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –º–æ—â–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞

## networking

`nano /etc/network/interfaces`

`auto ens33` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ \
`iface ens33 inet static` —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π \
`address 192.168.1.50/24` \
`#netmask 255.255.255.0` \
`gateway 192.168.1.254` \
`dns-nameservers 8.8.8.8 1.1.1.1`

`auto ens33` \
`iface ens33 inet dhcp` –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π

`service networking restart` –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ç–∏ \
`systemctl restart networking.service`

## netplan

`netplan --debug generate` –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—à–∏–±–∫–∏ \
`netplan apply` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ç—å) \
`netplan get` –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

`nano /etc/netplan/*.yaml`

- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞):
```yaml
network:
  version: 2
  ethernets:
    ens33:
      dhcp4: yes
    ens36:
      dhcp4: yes
```
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å:
```yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    ens33:
      dhcp4: no
      addresses: [192.168.3.105/24]
      routes:
        - to: default
          via: 192.168.3.1
      nameservers:
        addresses: [192.168.3.101, 8.8.8.8, 1.1.1.1]
        search: [domain.local]
```
renderer —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–æ–º—É –ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—å—é NetworkManager (nmcli) –≤ —Å—Ä–µ–¥–∞—Ö —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏–ª–∏ networkd (networkctl)

`netplan status` –≤ —Ä–µ–ª–∏–∑–µ netplan 0.106 –æ—Ç —Ñ–µ–≤—Ä–∞–ª—è 2023 (Ubuntu 23.04) –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ renderer

- MAC –∏ MTU:
```yaml
network:
  ethernets:
    ens33:
      dhcp4: no
      match:
        macaddress: 54:43:32:21:10:09
        mtu: 1500
```
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WiFi:
```yaml
network:
  version: 2
  wifis:
    wlp33:
      dhcp4: yes
      dhcp6: no
      nameservers:
        addresses: [8.8.8.8]
      access-points:
        "wifi-ssid":
          password: "12345678"
```
- Bonding –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π:
```yaml
network:
  version: 2
  ethernets:
    ens33: {}
    ens36: {}
  bonds:
    bond0:
      dhcp4: no
        interfaces:
          - ens33
          - ens36
          parameters:
            mode: active-backup # –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤—Ç–æ—Ä–æ–π –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ª—É—á–∞–µ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–µ—Ä–≤–æ–≥–æ
            mode: broadcast # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –ø–∞–∫–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
            mode: balance-rr # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–∞–∫–µ—Ç–æ–≤
            mode: balance-tlb # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏, –ø–∞–∫–µ—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
            mode: balance-xor # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–∏—Ç–∏–∫–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
          addresses:
            - 192.168.1.150/24
          gateway4: 192.168.1.1
          mtu: 1500
          nameservers:
            addresses:
              - 8.8.8.8
```
## ip

`ip a` ip addr show \
`ip -s link` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç–∏—Ç—Å—Ç–∏–∫—É –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ \
`ip -br a show` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã –∏ ip-–∞–¥—Ä–µ—Å \
`ip link set dev ens33 up` –≤–∫–ª—é—á–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å \
`ip link set dev ens33 down` –≤—ã–∫–ª—é—á–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  \
`ip link set mtu 1550 dev ens33` –∏–∑–º–µ–Ω–∏—Ç—å mtu \
`ip link set dev ens33 address AA:BB:CC:DD:EE:FF` –∏–∑–º–µ–Ω–∏—Ç—å mac-–∞–¥—Ä–µ—Å (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) \
`ip addr add 192.168.3.106/24 broadcast 192.168.3.255 dev ens33` –¥–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å \
`ip addr del 192.168.3.106/24 dev ens33` —É–¥–∞–ª–∏—Ç—å –∞–¥—Ä–µ—Å \
`ip route show` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ \
`ip route add 192.168.4.0 via 192.168.3.100` –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç \
`ip route del 192.168.4.0 via 192.168.3.100` —É–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç \
`ip route add 192.168.4.0 dev ens33` —É–∫–∞–∑–∞—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç—ã –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø–æ–¥—Å–µ—Ç—å \
`ip neigh show` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å ARP-—Ç–∞–±–ª–∏—Ü—É \
`ip neigh add 192.168.3.110 lladdr b0:be:76:43:21:41 dev ens33` \
`ip neigh del dev end33 192.168.3.110` \
`ip neigh flush` –æ—á–∏—Å—Ç–∏—Ç—å ARP-—Ç–∞–±–ª–∏—Ü—É

### net-tools

`ifconfig ens33` up/down \
`ifdown -a` –≤—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–ø—Ä–æ–ø–∞–¥—É—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ ifconfig) –∏ –≤–∫–ª—é—á–∏—Ç—å (ifup -a) \
`ifconfig ens33 192.168.3.106 netmask 255.255.255.0 broadcast 192.168.3.255` \
`ifconfig -s || netstat -i` —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ \
`netstat -atu` ALL (-a) tcp (-t) –∏ udp (-u) \
`netstat -lntup` LISTEN (-l) dont resolve names (-n) –∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /proc –¥–ª—è –≤—ã–≤–æ–¥–∞ PID/Program name (-p) \
`arp -a` —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è ip –∏ mac –∞–¥—Ä–µ—Å–æ–≤ \
`route -e` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ \
`route add -net 192.168.4.0 netmask 255.255.255.0 gw 192.168.3.100` –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ –ø–æ–¥—Å–µ—Ç—å 192.168.4.0 —á–µ—Ä–µ–∑ —à–ª—é–∑ 192.168.3.100 \
`route del -net 192.168.4.0 netmask 255.255.255.0` —É–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç

### networkd

`systemctl status systemd-networkd` \
`networkctl list` —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤, —Ç–∏–ø –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è \
`networkctl status` —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã, Address –∏ Gateway –∞–¥–∞–ø—Ç–µ—Ä–∞, DNS-–∞–¥—Ä–µ—Å–∞ –∏ –ª–æ–≥ systemd-networkd \
`networkctl status ens33` —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∞–¥–∞–ø—Ç–µ—Ä–∞ (Network File, Driver, Vendor, Model, MTU, Speed)

## ss

`ss -a` All –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Å–æ–∫–µ—Ç—ã \
`ss -l` –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ —Å–æ–∫–µ—Ç—ã (LISTEN) \
`ss -t` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (ESTAB/ESTABLISHED) \
`ss -ua` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ UDP —Å–æ–∫–µ—Ç—ã \
`ss -da` DHCP —Å–æ–∫–µ—Ç—ã \
`ss -x` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ UNIX —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è \
`ss -r` Resolve, –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∏–º–µ–Ω–∞ –∞–¥—Ä–µ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é DNS \
`ss -p` Processes, –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Å–æ–∫–µ—Ç \
`ss -n` Numeric –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏–º–µ–Ω–∞ —Å–ª—É–∂–± (–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ –≤ —á–∏—Å–ª–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ) \
`ss -ltp | grep 8080` \
`ss -tna | grep 22`

## dns

### resolv

`cat /etc/resolv.conf | grep nameserver` \
`nano /etc/resolv.conf` —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ \
`domain domain.local` \
`search domain.local` \
`nameserver 8.8.8.8` \
`nameserver 1.1.1.1`

### resolved

`networkctl status` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ netplan (–∏–ª–∏ –¥—Ä—É–≥–æ–µ) –¥–ª—è –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ \
`resolvectl status` –≤ systemd 239 (ubuntu 22.04) systemd-resolve –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ resolvectl, –≤—ã–≤–æ–¥–∏—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è global –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Link (ens33) \
`resolvectl status | grep "Current DNS"` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ DNS-—Å–µ—Ä–≤–µ—Ä \
`systemd-resolve --status` —Å–ª—É–∂–±–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ DNS —Å–µ—Ä–≤–µ—Ä–∞ \
`resolvectl flush-caches && systemd-resolve --flush-caches` –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à DNS \
`journalctl -u systemd-resolved | grep -E "IN A|IN PTR|IN AAAA|IN PTR|IN MX"` –ª–æ–≥–∏ –∫—ç—à–∞ DNS \
`systemctl status systemd-resolved` —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã –∏ –µ–≥–æ –ª–æ–≥ \
`cat /run/systemd/resolve/stub-resolv.conf` —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω–∞ systemd-resolved, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é nameserver 127.0.0.53, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É DNS —Å–µ—Ä–≤–µ—Ä—É, –∞ –æ–Ω, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —É–∂–µ –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ

`nano /etc/systemd/resolved.conf` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤

–í–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
```
[Resolve]
DNS=8.8.8.8, 192.168.3.101
Cache=yes
```
`ln -svi /run/systemd/resolve/resolv.conf /etc/resolv.conf` —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –∞ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ DNS —Å–µ—Ä–≤–µ—Ä–∞–º –Ω–∞–ø—Ä—è–º—É—é, –ø–æ–ª—É—á–∞—è –∏—Ö –∏–∑ `/etc/resolv.conf` \
`ls -la /etc/resolv.conf`

`nano /etc/resolv.conf` –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å–ª—É–∂–±–æ–π systemd-resolved, –∞ –∏–Ω–æ–≥–¥–∞ —Å –ø–æ–º–æ—â—å—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è initscripts –∏–ª–∏ NetworkManager, –∏ –ª—é–±—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è –∏–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```
nameserver 8.8.8.8
```
`apt install resolvconf` —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∞ –∞–¥—Ä–µ—Å–æ–≤ –≤ /etc/resolv.conf (—á—Ç–æ –±—ã –æ–Ω –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª—Å—è) \
`systemctl status resolvconf`

`nano /etc/resolvconf/resolv.conf.d/head`
```
nameserver 8.8.8.8
nameserver 1.1.1.1
```
### dig

`dig` \
`dig google.com` \
`dig @1.1.1.1 google.com a` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS —Å–µ—Ä–≤–µ—Ä Cloudflare –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω–∏ \
`dig @9.9.9.9 google.com mx` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS —Å–µ—Ä–≤–µ—Ä Quad9 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è MX –∑–∞–ø–∏—Å–∏ (A, NS, TXT) \
`dig -x 8.8.8.8 @9.9.9.9` —Ä–∞–∑—Ä–µ—à–∏—Ç—å ip –≤ –∏–º—è

### mtr

`mtr google.com` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç traceroute –∏ ping –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –≤ —Ç—Ä–∞—Å—Å–µ—Ä–æ–≤–∫–µ \
`mtr -I ens33 google.com` —É–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ \
`mtr -b google.com` –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–º—è –∏ ip \
`mtr --tcp google.com` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TCP SYN-–ø–∞–∫–µ—Ç—ã –∏–ª–∏ UDP-–¥–µ–π—Ç–∞–≥—Ä–∞–º–º—ã (--udp) \
`mtr -s 1000 google.com` —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ \
`mtr -r -c 1 google.com --json` —É–∫–∞–∑–∞—Ç—å –∫–æ–ª-–≤–æ ping –ø–∞–∫–µ—Ç–æ–≤ (-c 1 –∏ -i 2 –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª) –∏ –≤—ã–≤–µ—Å—Ç–∏ –≤ –≤–∏–¥–µ –æ—Ç—á–µ—Ç–∞ (--report) –≤ —Ñ–æ—Ä–º–∞—Ç–µ json/xml/csv/raw

### doggo

`curl -sS https://raw.githubusercontent.com/mr-karan/doggo/main/install.sh | sh` DNS cli client (https://github.com/mr-karan/doggo) \
`doggo yandex.ru` –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ–º–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é \
`doggo yandex.ru MX` –∑–∞–ø—Ä–æ—Å–∏—Ç—å MX –∑–∞–ø–∏—Å–∏ –¥–æ–º–µ–Ω–∞ \
`doggo yandex.ru MX @8.8.8.8` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω DNS \
`doggo -q yandex.ru -t MX --nameserver 1.1.1.1` \
`doggo yandex.ru --aa --ad` –∑–∞–ø—Ä–æ—Å —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö \
`doggo yandex.ru --cd --do` –∑–∞–ø—Ä–æ—Å —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ `DNSSEC OK` \
`doggo yandex.ru --gp-from Germany` –ó–∞–ø—Ä–æ—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API Globalping –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏

## vnstat

`apt install vnstat` –∂—É—Ä–Ω–∞–ª —á–∞—Å–æ–≤–æ–≥–æ, –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ \
`systemctl status vnstat` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª—É–∂–±—É \
`vnstat -l` –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ \
`vnstat -h` –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø–æ—á–∞—Å–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è

## netcat

`nc -zv 192.168.3.100 5985` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –±–µ–∑ –ø–æ–ø—ã—Ç–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (-z) –≤ –ø–æ–¥—Ä–æ–±–Ω–æ–º —Ä–µ–∂–∏–º–µ (-v) \
`nc -zvn 192.168.3.100 1-1000` —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ tcp-–ø–æ—Ä—Ç–æ–≤, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ DNS (-n) \
`nc -zvn 192.168.3.100 1-1000 2>&1 | grep succeeded` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫ –≤ stdout –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ \
`nc -zvnu 192.168.3.100 5550-5560` —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ udp-–ø–æ—Ä—Ç–æ–≤ (-u) \
`nc -lp 8081` –æ—Ç–∫—Ä—ã—Ç—å —Å–æ–∫–µ—Ç (—á–∞—Ç —Å–µ—Ä–≤–µ—Ä) –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (-listen) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–æ–º–µ—Ä–∞ –ø–æ—Ä—Ç–∞ (-p) \
`nc 192.168.3.101 8081` –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–æ–∫–µ—Ç—É (—á–∞—Ç-–∫–ª–∏–µ–Ω—Ç) \
`nc -lp 8081 > out.txt` –≤—Å–µ –ø–æ—Å—Ç—É–ø–∏–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–æ–∫–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª (–≤–º–µ—Å—Ç–æ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å) \
`cat /etc/passwd | nc -N 192.168.3.101 8081` –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω—ã (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ /etc/passwd –∑–∞–ø–∏—à–µ—Ç—Å—è –≤ out.txt) –∏ –∑–∞–∫—Ä—ã—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç (-N) \
`nc -l -w 1 -p 8081` –∑–∞–¥–∞—Ç—å timeout (-w) –æ–∂–∏–¥–∞–Ω–∏—è, –≤ —Ç–µ—á–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –±—É–¥–µ—Ç 0, –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å —Å—á–∏—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ timeout –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –Ω–∏–∂–µ \
`nc -w 5 -Uvl server.sock > out.txt` —Å–æ–∑–¥–∞—Ç—å UNIX-—Å–æ–∫–µ—Ç –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª, —Å–æ–∫–µ—Ç –∑–∞–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (-w 5) –∏–ª–∏ –µ—Å–ª–∏ –±—É–¥–µ—Ç –∑–∞–¥–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä -N –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ \
`lsblk | nc -Uv server.sock` –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–æ–∫–µ—Ç—É —Å –≤—Ç–æ—Ä–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –≤ —Ñ–∞–π–ª —Å–æ–∫–µ—Ç–∞ –ø—Ä–∏–µ–º–∞ \
`while true; do echo -e "HTTP/1.1 200 OK\n\n$(systemd-analyze plot)" | nc -l -w 1 -p 8085; done` HTTP-—Å–µ—Ä–≤–µ—Ä —Å –≤—ã–≤–æ–¥–æ–º –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã

### socket api
```bash
port=8085
while true
do
    request=$(nc -l -w 1 -p $port)
    request=$(echo "$request" | head -n 1)
    method=$(echo "$request" | cut -d " " -f 1)
    endpoint=$(echo "$request" | cut -d " " -f 2)
    if [[ $endpoint == "/api/date" ]]
        then
        response="HTTP/1.1 200 OK\nContent-Type: application/text\n\n$(date)"
    elif [[ $endpoint == "/api/disk" ]]
        then
        response="HTTP/1.1 200 OK\nContent-Type: application/json\n\n$(lsblk -e7 --json)"
    else
        response="HTTP/1.1 404 Not Found\n\n404 Not Found\n"
    fi
    echo -e "$response" | nc -l -w 1 -p $port
done
```
curl -s http://192.168.3.101:8085/api/date \
curl -s http://192.168.3.101:8085/api/disk | jq .blockdevices[]

### socket proxy

`ncat -l 8080 -k --sh-exec "ncat 192.168.3.101 80"` \
`socat TCP-LISTEN:8080,fork,reuseaddr TCP:192.168.3.101:80`

## proxy
```bash
sudo apt-get install -y dotnet-runtime-8.0
arch="x64" # –∏–ª–∏ "arm64"
sudo curl -s -L "https://github.com/Lifailon/froxy/releases/download/0.4.0/froxy-0.4.0-linux-$arch" -o /usr/local/bin/froxy
sudo chmod +x /usr/local/bin/froxy
```
`froxy --socks 1080` –∑–∞–ø—É—Å—Ç–∏—Ç—å SOCKS –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 1080 \
`froxy --forward 8080` –∑–∞–ø—É—Å—Ç–∏—Ç—å HTTP/HTTPS –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 1080 \
`froxy --forward 8080 >> froxy.log &` –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª \
`froxy --local 5514 --remote 192.168.3.100:514` –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5514, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Ö–æ—Å—Ç 192.168.3.100 –∏ –ø–æ—Ä—Ç 514 (syslog) \
`froxy --local 192.168.3.100:2121 --remote 192.168.3.101:21` TCP —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è RDP \
`froxy --local 127.0.0.1:8443 --remote https://example.com` –ø—Ä–∏–Ω–∏–º–∞—Ç—å HTTPS —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç—É 8443 –∏ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤–∞—Ç—å –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è GET –∏ POST –∑–∞–ø—Ä–æ—Å—ã —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å—ã –∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å–∞–π—Ç–∞—Ö) \
`froxy --local *:8443 --remote https://example.com --user admin --pass admin` —Å–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

## nmap

`nmap localhost` —É–∑–Ω–∞—Ç—å –∫–∞–∫–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç—Å—è \
`nmap -sV localhost` –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–µ –∫–∞–∫–∞—è –û–° –∏ –ü–û —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç–∞—Ö –∏ –∏—Ö –≤–µ—Ä—Å–∏—è \
`nmap -sL 192.168.3.0/24` —Å–ø–∏—Å–æ–∫ —Ö–æ—Å—Ç–æ–≤ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∏–º–µ–Ω –±–µ–∑ –ø–∏–Ω–≥–∞ \
`nmap -sP 192.168.3.0/24` ping –º–µ—Ç–æ–¥ host discovery (TCP ACK SYN –ø–∞–∫–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ–π –≤—ã–∑–æ–≤ connect) —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è —Å–µ—Ç–µ–≤–æ–π –ø–ª–∞—Ç—ã \
`nmap -F 192.168.3.0/24` fast mode port \
`nmap -A 192.168.3.100` –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –û–° –∏ –ü–û (ssh –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É, version, ad sites, rdp-ntlm-info) \
`nmap -sA 192.168.3.100` –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–∞–∫–µ—Ç–æ–≤ fw (filtered/unfiltered) —Å –ø–æ–º–æ—â—å—é TCP ACK \
`nmap -PN 192.168.3.100` —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ –±–µ–∑ ping \
`nmap -sO 192.168.3.100` –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ IP-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∑–Ω–∞—á–∏—Ç —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è \
`nmap -PU 192.168.3.100` –æ–±–æ–π—Ç–∏ –º–µ–∂—Å–µ—Ç–µ–≤–æ–π —ç–∫—Ä–∞–Ω —Å –ø–æ–º–æ—â—å—é UDP-–ø–∏–Ω–≥–∞ \
`nmap -sS 192.168.3.100` –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (TCP SYN) –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è \
`nmap -sU 192.168.3.100` –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ UDP-–ø–æ—Ä—Ç–æ–≤

### masscan

`apt install masscan` –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã SYN) —Å–∫–∞–Ω–µ—Ä TCP –ø–æ—Ä—Ç–æ–≤ (https://github.com/robertdavidgraham/masscan) \
`masscan 192.168.3.100 -p80` \
`masscan 192.168.3.100 -p0-65535 --rate 100` \
`masscan 192.168.3.100 -p0-65535 --rate 100 --ping-timeout 1000` \
`masscan 192.168.3.1-100 -p80` \
`masscan 192.168.3.0/24 -p80,443` \
`masscan 192.168.3.100 -p80 --output-format json --output-file result.json`

### rustscan

`wget https://github.com/RustScan/RustScan/releases/download/2.0.1/rustscan_2.0.1_amd64.deb \
`snap install nmap` —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ \
`apt-get install -f` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ \
`dpkg --install rustscan_2.0.1_amd64.deb` \
`rustscan -a 127.0.0.1` \
`rustscan -a 192.168.3.100` 32400/tcp open plex

### tcp
```bash
function tcp-scan () {
  if [ "$1" == "" ]; then
      exit 1
  fi
  START_PORT=$2; [ -z "$START_PORT" ] && START_PORT=1
  END_PORT=$3; [ -z "$END_PORT" ] && END_PORT=65535
  PORT_PROTOCOL="tcp"
  scan_port(){
      PORT_NUMBER=$1
      PORT_SCAN_RESULT=`2>&1 echo "" > /dev/$PORT_PROTOCOL/$TARGET_NAME_OR_IP/$PORT_NUMBER | grep connect`
      [ "$PORT_SCAN_RESULT" == "" ] && echo -e $PORT_NUMBER\/$PORT_PROTOCOL' \t 'open' \t\t '`grep $PORT_NUMBER/$PROTOCOL /etc/services | head -n1 | awk '{print $1}'`
  }
  TARGET_NAME_OR_IP=$1
  echo -e 'PORT \t\t STATE \t\t SERVICE'
  for PORT_NUMBER in `seq $START_PORT $END_PORT`; do
      scan_port $PORT_NUMBER
  done
}
```
`tcp-scan 192.168.3.100 1024 5000`

## tcpdump

`tcpdump -D` —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ \
`tcpdump -n -i ens33 icmp` —Å–ª—É—à–∞—Ç—å icmp-–ø–∞–∫–µ—Ç—ã –æ—Ç –≤—Å–µ—Ö –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (-i) –±–µ–∑ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω (-n) \
`tcpdump -n -i ens33 udp -e` —Å–ª—É—à–∞—Ç—å udp-–ø–∞–∫–µ—Ç—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å MAC-–∞–¥—Ä–µ—Å–∞ (-e) \
`tcpdump -n -i ens33 port 8080` —Å–ª—É—à–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ 8080 –ø–æ—Ä—Ç–∞ \
`tcpdump -n -i ens33 port 80 or 443` \
`tcpdump -n -i ens33 portrange 21-80` \
`tcpdump -n -i ens33 ip src 192.168.3.99 and dst 192.168.3.103` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å ip –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ (src) ip-–∞–¥—Ä–µ—Å–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π (dst) ip-–∞–¥—Ä–µ—Å \
`tcpdump -n -i ens33 -X host 192.168.3.100 and port 32400` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–æ–≤ (-X) –¥–ª—è —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞

## tshark

`apt install tshark` \
`apt install termshark` terminal UI for tshark (https://github.com/gcla/termshark) \
`tshark -D` —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ \
`tshark -i 1` \
`disown` \
`tshark -i 1 -Y "syslog"` –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ syslog (udp.port == 514) \
`tshark -i 1 host 192.168.3.104` –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ \
`tshark -i 1 net 192.168.3.0/24` –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–æ–¥—Å–µ—Ç–∏ \
`tshark -i 1 src host 192.168.3.104` –∑–∞—Ö–≤–∞—Ç –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ \
`tshark -i 1 dst host 192.168.3.104` –∑–∞—Ö–≤–∞—Ç –≤—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ \
`tshark -i 1 dst host 192.168.3.104 and port 8086` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ö–æ–¥—è—â–µ–º—É —Ö–æ—Å—Ç—É –∏ –ø–æ—Ä—Ç—É \
`tshark -i 1 dst host 192.168.3.104 and port 8086 and src host 192.168.3.99` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏—Å—Ö–æ–¥—è—â–µ–º—É —Ö–æ—Å—Ç—É \
`tshark -i 1 -x dst host 192.168.3.104 and port 8086 and src host 192.168.3.101` –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–∞–∫–µ—Ç—ã –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (-x) \
`tshark -i 1 -O TCP dst host 192.168.3.104 and port 8086 and src host 192.168.3.101` –ø—Ä–æ—á–∏—Ç–∞—Ç—å TCP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ \
`tshark -i 1 -a duration:10 -w ~/192.168.3.0.pcap` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞—Ö–≤–∞—Ç \
`tshark -Y 'ip.addr == 192.168.3.106' -r ~/192.168.3.0.pcap` –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª –∑–∞—Ö–≤–∞—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–∞ \
`tshark -Y "(ip.addr == 192.168.3.106) or (ip.addr == 192.168.3.107)" -r ~/192.168.3.0.pcap` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–≤—É–º –∞–¥—Ä–µ—Å–∞–º (–∏–ª–∏) \
`tshark -Y "(ip.addr == 192.168.3.104) and (tcp.port == 8086)" -r ~/192.168.3.0.pcap` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–≤—É–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (–∏) \
`tshark -Y "!(ip.addr == 192.168.3.104)" -r ~/192.168.3.0.pcap` –∏—Å–∫–ª—é—á–∏—Ç—å \
`tshark -Y "not arp and not (udp.port == 53)" -r ~/192.168.3.0.pcap` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤–µ—Å—å udp-—Ç—Ä–∞—Ñ–∏–∫, –∏—Å–∫–ª—é—á–∏–≤ ping –∏ dns –ø–∞–∫–µ—Ç—ã

## ping

### fping

`fping yandex.ru google.com` –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–≤—É—Ö —Ö–æ—Å—Ç–æ–≤ \
`fping -p 5 yandex.ru google.com` 5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∫–∞–∂–¥–æ–º—É —Ö–æ—Å—Ç—É \
`fping -ag 192.168.3.0/24` icmp –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ –ø–æ–¥—Å–µ—Ç–∏ \
`fping < hosts.txt` –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ ping –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏

### netping

`sudo curl -s https://raw.githubusercontent.com/Lifailon/net-tools/rsa/netping.sh -o /usr/bin/netping` \
`sudo chmod +x /usr/bin/netping` \
`netping 192.168.3.0`

## firewall

### ufw

`systemctl status ufw` \
`ufw status` \
`ufw enable` –≤–∫–ª—é—á–∏—Ç—å ufw (Uncomplicated Firewall) \
`ufw disable` –æ—Ç–∫–ª—é—á–∏—Ç—å \
`ufw reload` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å/–ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ \
`ufw reset` —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ—Ç–∫–ª—é—á–∏—Ç—å ufw –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞) \
`ufw default deny incoming` –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã –æ—Ç–∫–ª–æ–Ω—è—Ç—å (–ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ –ø–∞–∫–µ—Ç–∞–º, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –ø–æ–¥–ø–∞–¥–∞—é—Ç –ø–æ–¥ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞) \
`ufw default allow outgoing` –≤—Å–µ –∏—Å—Ö–æ–¥—è—â–∏–µ —Ä–∞–∑—Ä–µ—à–∞—Ç—å \
`ufw allow in 22` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç 22 \
`ufw allow out 22` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç 22 \
`ufw deny in 80/tcp` –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π TCP-—Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ 80 –ø–æ—Ä—Ç \
`ufw delete deny in 80/tcp` —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ \
`ufw allow 161,10050,10051/tcp` –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ä—Ç–æ–≤ \
`ufw allow proto tcp from 0.0.0.0/24 to 192.168.3.100 port 3389` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö IP-–∞–¥—Ä–µ—Å–æ–≤ –ø–æ TCP-–ø—Ä–æ—Ç–æ–∫–æ–ª—É –∫ IP-–∞–¥—Ä–µ—Å—É –∏ –ø–æ—Ä—Ç—É 3389 \
`ufw allow from 192.168.3.0/24 to 192.168.3.110` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ–º —Å –ø–æ–¥—Å–µ—Ç–∏ 192.168.1.0 –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É 192.168.1.2 (–¥–ª—è Proxmox MGW) \
`ufw allow 25/tcp` –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è –≤—Å–µ—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π 25 –ø–æ—Ä—Ç \
`ufw limit ssh` –ª–∏–º—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É —Å –æ–¥–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ (–¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–±–æ—Ä–∞), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —à–µ—Å—Ç—å –∏ –±–æ–ª—å—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∑–∞ 30 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ iptables) \
`ufw logging on` –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ \
`ufw logging medium` –≤—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (low/medium/high) \
`cat /var/log/ufw` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤. –°–∏–Ω—Ç–∞–∫—Å–∏—Å: [UFW ALLOW/BLOCK/AUDIT] IN=–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å OUT=–∏—Ç–µ—Ä—Ñ–µ–π—Å SRC=ip_–∏—Å—Ç–æ—á–Ω–∏–∫–∞ DST=ip_–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è LEN=—Ä–∞–∑–º–µ—Ä_–ø–∞–∫–µ—Ç–∞ TOS=0x10 PREC=0x00 TTL=64 ID=728 DF PROTO=–ø—Ä–æ—Ç–æ–∫–æ–ª SPT=–ø–æ—Ä—Ç_–∏—Å—Ç–æ—á–Ω–∏–∫–∞ DPT=–ø–æ—Ä—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è LEN=—Ä–∞–∑–º–µ—Ä_–ø–∞–∫–µ—Ç–∞

### show

`ufw show listening` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –Ω–∏—Ö (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –≤ —Å–ø–∏—Å–∫–µ: [20] allow 161,10050,10051/tcp) \
`ufw show raw` –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ iptables \
`ufw show added` –Ω–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ \
`ufw show builtins` –ø—Ä–∞–≤–∏–ª–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é \
`ufw show user-rules` –ø—Ä–∞–≤–∏–ª–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º \
`ufw show before-rules` –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º –ø–∞–∫–µ—Ç–∞ \
`ufw show after-rules` –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è –ø–∞–∫–µ—Ç–∞ \
`ufw show logging-rules` –ø—Ä–∞–≤–∏–ª–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤

### firewalld

`apt install firewalld` \
`systemctl status firewalld` \
`systemctl start firewalld` \
`pkill -f firewalld` —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, –µ—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ failed \
`firewall-cmd --state` —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã \
`firewall-cmd --reload` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å) \
`firewall-cmd --list-all` —Å–ø–∏—Å–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–¥–ª—è services –∏ ports) \
`firewall-cmd --list-port` —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã \
`firewall-cmd --list-service` —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å–ª—É–∂–±—ã \
`firewall-cmd --list-all-zones` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–æ–Ω \
`firewall-cmd --get-active-zones` —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–æ–Ω \
`firewall-cmd --list-all --zone=public` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–æ–Ω–µ \
`firewall-cmd --permanent --add-port=22/tcp` –æ—Ç–∫—Ä—ã—Ç—å 22 –ø–æ—Ä—Ç \
`firewall-cmd --permanent --add-port=8000-8080/udp` –æ—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤ \
`firewall-cmd --get-services | grep ssh` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª—É–∂–± \
`firewall-cmd --permanent --add-service=ssh` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ—Ä—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ ssh \
`firewall-cmd --permanent --new-service=speedtest` –¥–æ–±–∞–≤–∏—Ç—å —Å–ª—É–∂–±—É \
`firewall-cmd --permanent --service=speedtest --add-port=80/tcp` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç –∫ —Å–ª—É–∂–±–µ \
`firewall-cmd --info-service=speedtest` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª—É–∂–±–µ \
`firewall-cmd --permanent --add-rich-rule 'rule family="ipv4" source address="192.168.3.0/24" service name="speedtest" accept'` –æ—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–¥—Å–µ—Ç–∏ \
`firewall-cmd --permanent --add-rich-rule 'rule family="ipv4" source address="192.168.3.0/24" port port="22" protocol="tcp" accept'` \
`firewall-cmd --permanent --add-rich-rule="rule family='ipv4' source address='192.168.21.0/24' reject"` –∑–∞–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–¥—Å–µ—Ç–∏ \
`firewall-cmd --list-rich-rules` —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª —Å —É—Å–ª–æ–≤–∏—è–º–∏ \
`firewall-cmd --permanent --remove-port=22/tcp` —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ

### iptables

`iptables -L -v` –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ø–æ—á–∫–∏ \
`iptables -L | grep -E "tcp|udp"` \
`if (( $(iptables -L | wc -l | bc) == 8)); then echo active; else echo inactive; fi` \
`iptables -A INPUT -p tcp --dport 22 -j ACCEPT` –æ—Ç–∫—Ä—ã—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ä—Ç ssh \
`iptables -A INPUT -p tcp -s !192.168.3.99 --dport 22 -j DROP` –∑–∞–∫—Ä—ã—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ä—Ç ssh, –∏—Å–∫–ª—é—á–∏—Ç—å 192.168.3.99 \
`iptables-save` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —á—Ç–æ –±—ã –æ–Ω–∏ –±—ã–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ \
`iptables -F` —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —Ç–µ–∫—É—â–µ–π —Ç–∞–±–ª–∏—Ü—ã

### nftables

`nft -a list ruleset` —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–∞–≤–∏–ª \
`nft list tables` —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü \
`nft flush ruleset` –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ \
`nft add table inet filter` —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É filter \
`nft add chain inet filter input { type filter hook input priority 0\; }` –¥–æ–±–∞–≤–∏—Ç—å —Ü–µ–ø–æ—á–∫—É input \
`nft add rule inet filter input ct state related,established counter accept` \
`nft add rule inet filter input iifname "lo" counter accept` \
`nft add rule inet filter input ip protocol icmp counter accept` —Ä–∞–∑—Ä–µ—à–∏—Ç—å icmp \
`nft add rule inet filter input tcp dport {80, 443} counter accept` –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã \
`nft add rule inet filter input ip saddr { 192.168.100.0/24, 1.1.1.1/32 } tcp dport 22 counter accept` –æ—Ç–∫—Ä—ã—Ç—å 22 –ø–æ—Ä—Ç –¥–ª—è –ø–æ–¥—Å–µ—Ç–µ–π \
`nft chain inet filter input { policy drop \; }` –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å \
`echo "flush ruleset" > /etc/nftables.conf` –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ \
`nft -s list ruleset >> /etc/nftables.conf` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é \
`systemctl enable nftables.service` \
`nft delete rule inet filter input handle 5` —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –ø–æ –Ω–æ–º–µ—Ä—É \
`nft add rule inet filter input position 5 tcp dport 22 counter accept` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ —Å –Ω–æ–º–µ—Ä–æ–º –≤ —Å–ø–∏—Å–∫–µ

## ssh

`w` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –∏ –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–≤—Ä–µ–º—è/–¥–∞—Ç–∞ –≤—Ö–æ–¥–∞, IDLE –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è –∫–æ–º–∞–Ω–¥–∞) \
`who` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏, –≤—Ä–µ–º—è/–¥–∞—Ç–∞ –≤—Ö–æ–¥–∞ –∏ ip —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
`last -a` –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤—Ö–æ–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º—É \
`lastlog` –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º—É \
`last reboot` –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ \
`id -G` –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ id –∫—Ä—É–ø–ø –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

`apt install xclip xsel` –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ \
`cat /etc/ssh/sshd_config | xclip` \
`xsel > sshd_config.bak` \
`nano /etc/ssh/sshd_config` \
`Port 2121` –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç \
`PermitRootLogin yes` –≤–∫–ª—é—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º root \
`PasswordAuthentication no` –æ—Ç–∫–ª—é—á–∏—Ç—å –∞—É–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –ø–∞—Ä–æ–ª—é \
`X11Forwarding yes` –≤–∫–ª—é—á–∏—Ç—å X11 \
`TCPKeepAlive yes` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—Å—Ç—ã—Ö keep-alive –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) \
`ClientAliveInterval 60` –∑–∞–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–∂–∏–¥–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π sshd –∑–∞–ø—Ä–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ \
`ClientAliveCountMax 3` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ –¥–æ –∑–∞–≤–µ—à—Ä–µ–Ω–∏—è —Å–µ–∞–Ω—Å–∞ (ClientAliveInterval * ClientAliveCountMax = 180 —Å–µ–∫—É–Ω–¥) \
`systemctl restart sshd` \
`systemctl status sshd`

### keygen

`ssh-keygen -t rsa -b 4096` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—É –∫–ª—é—á–µ–π \
`id_rsa` –ø—Ä–∏–≤–∞—Ç–Ω—ã–π/–∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –æ—Ç –∫–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–µ–∑ –ø–∞—Ä–æ–ª—è –∏–º—è —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`cat ~/.ssh/id_rsa.pub | xclip` –ø—É–±–ª–∏—á–Ω—ã–π/–æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á, –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫—É–¥–∞ –±—É–¥–µ–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è3 \
`xsel > ~/.ssh/authorized_keys` –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ (id_rsa.pub) –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫—É–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è

### x11

`apt-get install virt-manager ssh-askpass` \
`virt-manager` \
`export DISPLAY=username-VirtualBox:10.0 && firefox`

### scp

`ssh-copy-id root@192.168.3.105 -p 2121` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π), —É—Ç–∏–ª–∏—Ç–∞ –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ñ–∞–π–ª –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–ª—é—á–∞ ~/.ssh/id_rsa.pub —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ —Ñ–∞–π–ª authorized_keys \
`scp -P 2121 /home/lifailon/files/* lifailon@192.168.3.105:/home/lifailon/downaload/` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ç–∞–ª–æ–≥–∞ files –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é downaload \
`scp -P 2121 -r kup@192.168.3.105:/home/lifailon/downaload /home/lifailon/files/` —Å–∫–∞—á–∞—Ç—å (-r) –¥–∞–Ω–Ω—ã–µ —Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π

### sshpass
```bash
hosts=(192.168.3.101 192.168.3.102 192.168.3.103 192.168.3.104)
username="lifailon"
port=2121
read -s -p "–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è $username: " password
echo
for host in ${hosts[@]}; do
    sshpass -p $password ssh -p $port $username@$host "echo $(uname -n) $(free -m | grep Mem: | awk '{print $3"/"$2}')"
done
```
## sudoers

`cat /etc/sudoers` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —É—Ç–∏–ª–∏—Ç—ã sudo \
`visudo` –æ—Ç–∫—Ä—ã—Ç—å sudoers –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ \
`Defaults env_reset, timestamp_timeout=10` –∑–∞–¥–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è sudo –Ω–∞ 10 –º–∏–Ω—É—Ç \
`echo "lifailon ALL=(ALL) NOPASSWD:ALL" > /etc/sudoers.d/lifailon` —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è \
`chmod 644 /etc/sudoers.d/lifailon` \
`lifailon ALL=NOPASSWD: /usr/bin/service memcahched restart, /usr/bin/apt-get update, /usr/bin/apt-get upgrade` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã \
`%powerusers ALL=NOPASSWD: /usr/bin/service memcahched restart` –¥–æ—Å—Ç—É–ø –Ω–∞ –≥—Ä—É–ø–ø—É \
`visudo --check` –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –≤—Å–µ—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (0440) \
`sudo -l` –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º sudo)

## strace

`strace -c top -n 1 > /dev/null` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã (time - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±—â–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, call - –∫–æ–ª-–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∏ –æ—à–∏–±–∫–∏) \
`pid=$(pidof dd)` —É–∑–Ω–∞—Ç—å pid –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ –∏–º–µ–Ω–∏ \
`strace -p $pid` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ (—á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –≤—ã–∑–æ–≤–∞ read –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –¥—Ä—É–≥–æ–µ —á–µ—Ä–µ–∑ write) \
`strace -f -p $(pgrep -o sshd) -o ~/passwd.txt -v -e trace=write -s 64` —Å–ª–µ–¥–∏–º –∑–∞ –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ sshd (-f), –∏—â–µ–º –≤—Å–µ PID sshd –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (-p), —Ç—Ä–∏–≥–≥–µ—Ä —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö (-e) –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã–≤–æ–¥ 64 –±–∞–π—Ç–∞–º–∏ \
`cat ~/passwd.txt | grep "[1-32][1-32]) = [1-32][1-32]"`

## apt

`apt-mark showauto` —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ \
`apt-mark showmanual` —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é \
`echo $(($(apt-mark showauto | wc -l) + $(apt-mark showmanual | wc -l)))` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ \
`apt list --installed` —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ apt (Advanced Package Tool) \
`apt update` –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ /etc/apt/sources.list \
`cat /etc/apt/sources.list | grep -Ev "^#"` —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ \
`apt list --upgradable` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫, –¥–ª—è –∫–∞–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è \
`apt list --upgradable -a` upgradable from, installed –∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ \
`apt install --only-upgrade powershell` –æ–±–Ω–æ–≤–∏—Ç—å –æ–¥–∏–Ω –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç \
`apt --fix-broken install` –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ—à–∏–±–∫–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ \
`apt full-upgrade` –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ, –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —É–¥–∞–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º—É –∏ —É–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è \
`apt install net-tools` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç \
`apt download net-tools` —Å–∫–∞—á–∞—Ç—å –ø–∞–∫–µ—Ç –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ \
`apt install net-tools --reinstall` –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç \
`apt remove net-tools` —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ —É–¥–∞–ª–µ–Ω—ã –Ω–µ –±—É–¥—É—Ç) \
`apt purge net-tools` –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç, –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ \
`apt policy net-tools` –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞ –∏ –∫–∞–∫–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã \
`apt install net-tools=number ver.` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é \
`apt autoremove` –æ—á–∏—Å—Ç–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç \
`apt autoclean` –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø–∞–∫–µ—Ç–æ–≤

## snap

–°–æ–¥–µ—Ä–∂–∞—Ç —Å–∞–º—É –ø—Ä–æ–≥—Ä–∞–º–º—É (deb-–ø–∞–∫–µ—Ç), –∞ —Ç–∞–∫–∂–µ –≤—Å–µ –µ—ë –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –±–∏–±–ª–∏—Ç–æ—Ç–µ–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. \
`ls /snap` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–∞–∫–µ—Ç–æ–≤ \
`ls /var/lib/snapd/snaps` —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ .snap \
`snap install snap-store` —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π \
`snap find nmap` –ø–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ snap \
`snap info nmap` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ (–µ–≥–æ –Ω–∞–ª–∏—á–∏–∏, –≤–µ—Ä—Å–∏—è, –¥–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ –∏ —Ä–∞–∑–º–µ—Ä) \
`snap list` —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ –ø–∞–∫–µ—Ç–æ–≤ \
`snap list | sed 1d | wc -l` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ \
`snap list --all nmap` –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ \
`snap refresh nmap` –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ \
`snap revert nmap` –æ—Ç–∫–∞—Ç–∏—Ç—å –≤–µ—Ä—Å–∏—é –¥–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π \
`snap install nmap --stable` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é –ø–∞–∫–µ—Ç–∞ \
`snap connections nmap` –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Å–∏—Å—Ç–µ–º—ã \
`snap remove nmap` —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç

## dpkg

`dpkg -i spark.deb` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç \
`dpkg -l` —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö deb-–ø–∞–∫–µ—Ç–æ–≤ \
`dpkg -l | wc -l` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ \
`dpkg -l spark` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –ø–∞–∫–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –µ–≥–æ –≤–µ—Ä—Å–∏—é \
`dpkg -s spark` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–∞–∫–µ—Ç–∞ \
`dpkg -r spark` —É–¥–∞–ª–∏—Ç—å (--remove) .deb –ø–∞–∫–µ—Ç \
`dpkg -P spark` —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç –≤–º–µ—Å—Ç–µ —Å —Ñ–∞–∏–ª–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ \
`dpkg -L spark` –∫—É–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç (opt/Spark)

## ntp

### time

`timedatectl` —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è \
`timedatectl set-timezone 'Europe/Moscow'` –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É –Ω–∞ MSK, +0300 (–∏–∑–º–µ–Ω–∏—Ç—Å—è Local time) \
`timedatectl list-timezones` —Å–ø–∏—Å–æ–∫ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ \
`timedatectl set-ntp no` –æ—Ç–∫–ª—é—á–∏—Ç—å NTP service \
`timedatectl set-time "13:00:00"` –ø–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è NTP —É–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è –≤ —Ä—É—á–Ω—É—é \
`timedatectl set-ntp yes` –≤–∫–ª—é—á–∏—Ç—å NTP service (NTP service: active)

### language

`locale` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ \
`update-locale LANG=en_US.UTF-8` –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é \
`apt-get install language-pack-en language-pack-en-base` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π \
`nano /etc/default/locale` \
`LANG=en_US.UTF-8` \
`dpkg-reconfigure locales`

### timesyncd

`systemctl status systemd-timesyncd` \
`systemctl status systemd-timesyncd | grep "Status": | sed -E "s/^.+server //; "s/.\"//""` —É–∑–Ω–∞—Ç—å –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ \
`apt install systemd-timesyncd` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª—É–∂–±—É, –µ—Å–ª–∏ unit –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è \
`apt-get remove ntp ntpstat --purge && apt autoremove` —É–¥–∞–ª–∏—Ç—å ntpd (–µ—Å–ª–∏ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω) \
`nano /etc/systemd/timesyncd.conf` \
`NTP=192.168.3.233` DC (Domain Controller) \
`NTP=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org` \
`FallbackNTP=ntp.ubuntu.com` —Ä–µ–∑–µ—Ä–≤ \
`systemctl restart systemd-timesyncd` \
`timedatectl set-ntp true` –≤–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd-timesyncd –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ (–≤–º–µ—Å—Ç–æ ntpd) \
`timedatectl status`

### ntpd

`apt install ntp` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NTP-—Å–µ—Ä–≤–µ—Ä/–∫–ª–∏–µ–Ω—Ç, –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –ø–∞–∫–µ—Ç systemd-timesyncd \
`systemctl status ntp` \
`sntp --version` \
`ufw allow 123/udp && ufw reload` \
`timedatectl set-ntp false` –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ systemd-timesyncd –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ \
`nano /etc/ntp.conf` \
`pool 0.ubuntu.pool.ntp.org` —É–∫–∞–∑–∞—Ç—å –ø—É–ª —Å–µ—Ä–≤–µ—Ä–æ–≤ \
`server 0.ru.pool.ntp.org` —É–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ —ç—Ç–æ pool, –≤–æ–∑—å–º–µ—Ç –æ–¥–∏–Ω) \
`restrict default kod notrap nomodify nopeer noquery limited` –Ω–∞—Å—Ç—Ä–æ–π–∫–∏/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ NTP —Å–µ—Ä–≤–µ—Ä–∞ \
`systemctl restart ntp` \
`systemctl status ntp` \
`timedatectl status` \
`ntpq -p` –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ (+ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–µ—Ä–∫–∏ —á–∞—Å–æ–≤, * —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–µ–π—á–∞—Å, - –Ω–µ —Ä–µ–∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω, st - —É—Ä–æ–≤–µ–Ω—å stratum, when ‚Äî –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ —Å–≤–µ—Ä—è–ª–æ—Å—å –≤—Ä–µ–º—è, delay - –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏, offset - —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ –≤—Ä–µ–º–µ–Ω–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –æ—Ç—Å—Ç–∞—é—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —Å–ø–µ—à–∞—Ç)

## top

`top -c` –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–∞–º —Å –∫–ª—é—á–∞–º–∏, –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è \
`top -H` –≤—ã–≤–æ–¥–∏—Ç –ø–æ—Ç–æ–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ \
`top -i` –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ \
`top -o %CPU` –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ CPU \
`top -o %MEM` –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ Memory

### htop

`space` –≤—ã–¥–µ–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–º–µ–Ω–∏—Ç—å Shift+U) \
`u` –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`l` –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å \
`s` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (strace PID attached) F8 - AutoScroll, F4 - Filter, F9 - Stop/Start Tracing \
`F4` —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, cron) \
`F5` –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ \
`F6` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (PERCENT_CPU/PERCENT_MEM/USER/PRIORITY/TIME) \
`F7` –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–∏–æ—Ä—Ç–∏—Ç–µ (–¥–æ -20), —á–µ–º –º–µ–Ω—å—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Ç–µ–º –±–æ–ª—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å—É \
`F8` –ø–æ–Ω–∏–∑–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–¥–æ 19) \
`F9/K` –¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º (—Å–∏–≥–Ω–∞–ª—ã), –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞: 15, 2, 3, 9 –∏–ª–∏ 19 \
`S (STATE)` —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`R` [running or runnable] –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∏–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –∑–∞–ø—É—Å–∫ \
`S` [interruptible sleep] –ø—Ä–µ—Ä—ã–≤–∞–µ–º—ã–π —Å–æ–Ω (–Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –∏ –∂–¥–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞) \
`D` [uninterruptible sleep] –Ω–µ–ø—Ä–µ—Ä—ã–≤–∞–µ–º—ã–π —Å–æ–Ω (–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª–æ–º, —Ç.–∫. –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –º–æ–∂–µ—Ç –Ω–∞ –Ω–µ–≥–æ –æ—Ç–≤–µ—Ç–∏—Ç—å) \
`Z` [zombie] –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –æ–∂–∏–¥–∞—é—â–∏–π –ø–æ–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–º–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç \
`T` –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª–æ–º SIGSTOP (-19/CTRL+Z) \
`X` –º–µ—Ä—Ç–≤—ã–π (–Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è)

### bpytop

`sudo apt install bpytop` \
`pip3 list | grep psutil` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–∫–µ—Ç \
`pip3 install psutil --break-system-packages` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –≤ –æ–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π \
`python3 -m venv myenv` —Å–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ \
`source myenv/bin/activate` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ \
`pip install psutil` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ \
`bpytop` \
`deactivate`

### atop

`apt install atop` \
`nano /etc/default/atop` \
`LOGINTERVAL=10` \
`systemctl restart atop` \
`atop -g` –ø–æ–∫–∞–∑–∞—Ç—å –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`atop -m` –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–∞–º—è—Ç—å—é \
`atop -d` –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞–º–∏ \
`atop -n` –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ç—å—é \
`atop -v` –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö (PPID —Ä–æ–¥–∏—Ç–µ–ª—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–≥—Ä—É–ø–ø–∞, –¥–∞—Ç–∞/–≤—Ä–µ–º—è) \
`atop -c` –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`atop -A` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –Ω–∞–∏–±–æ–ª—å—à–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º) \
`atop -C` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`atop -M` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ \
`atop -D` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –¥–∏—Å–∫–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ \
`atop -N` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ \
`atop -E` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ GPU

### iftop

`apt install iftop` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç \
`iftop -ti ens33` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ ncurses \
`iftop -ts 1 -i ens33` –ø–µ—á–∞—Ç—å –æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ (-s) —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥, –∑–∞—Ç–µ–º –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã \
`iftop -tL 0 -s 1 -i ens33` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (-L) –¥–ª—è –ø–µ—á–∞—Ç–∏ \
`iftop -ni ens33` –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ —Ö–æ—Å—Ç–æ–≤ \
`iftop -Ni ens33` –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –Ω–æ–º–µ—Ä–∞ –ø–æ—Ä—Ç–æ–≤ –≤ —Å–µ—Ä–≤–∏—Å—ã \
`iftop -pi ens33` —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ promiscuous (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É –¥—Ä—É–≥–∏–º–∏ —Ö–æ—Å—Ç–∞–º–∏ –≤ –æ–¥–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ —Å–µ—Ç–∏) \
`iftop -bi ens33` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É —Ç—Ä–∞—Ñ–∏–∫–∞ \
`iftop -Bi ens33` –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤ –±–∞–π—Ç–∞—Ö \
`iftop -o 10si ens33` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ç–æ—Ä–æ–º—É —Å—Ç–æ–ª–±—Ü—É (—Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞ 10 —Å–µ–∫—É–Ω–¥, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### iotop

`apt install iotop` \
`iotop -o` –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–ª–∏ –ø–æ—Ç–æ–∫–∏, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ –≤–≤–æ–¥-–≤—ã–≤–æ–¥ \
`iotop -ou mysql` –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`iotop -P` –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å—ã, –±–µ–∑ –ø–æ—Ç–æ–∫–æ–≤ \
`iotop -p PID`

### top other

`pip install --user glances` –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ Python (https://github.com/nicolargo/glances) \
`glances`

`snap install bashtop` –º–æ–Ω–∏—Ç–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ Bash (https://github.com/aristocratos/bashtop) \
`bashtop`

`npm install gtop -g` –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–∞ JavaScript (https://github.com/aksakalli/gtop) \
`gtop`

`snap install bottom` –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ Rust (https://github.com/ClementTsang/bottom) \
`bottom`

`curl -sL https://raw.githubusercontent.com/wimpysworld/deb-get/main/deb-get | sudo -E bash -s install deb-get && deb-get install zenith` –∫–∞–∫ top, –Ω–æ —Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CPU, GPU, —Å–µ—Ç–∏ –∏ –¥–∏—Å–∫–æ–≤ –Ω–∞ Rust (https://github.com/bvaisvil/zenith) \
`zenith`

## ps

`apt-get install -y procps` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç procps \
`pstree -a` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ (-a) —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–¥–µ–º–æ–Ω—ã) –∏ –∏—Ö –¥–æ—á–µ—Ä–Ω–∏–µ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞ \
`ps -FA` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (-F, PPID - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å) –≤—Å–µ—Ö (-A) —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ \
`ps -LFC mysqld` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ—Ç–æ–∫–∏ (-L) –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö LWP –∏ NLWP –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ –∏–º–µ–Ω–∏ (-C) \
`ps -Fl` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è &) \
`ps f -F` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`ps f -u root` –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`ps -o pid -u lifailon` –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ pid –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º \
`ps -p 3618275` –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ –µ–≥–æ PID (-p/-s) \
`ps -aux --sort -rss` –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫—Ä–æ–º–µ —Ñ–æ–Ω–æ–≤—ã—Ö (-a), —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u), –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (-x) –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ RSS, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è %CPU –∏ %MEM \
`ps -lax` –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫ –≤—ã–≤–æ–¥—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è WCHAN - —Ä–µ—Å—É—Ä—Å, –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å \
`ps -FA --sort time` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`ps -Ao comm,user,rss,vsz,command` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –ø–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏, –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã/–ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –ø–æ–ª–Ω–æ–º—É –≤—ã–∑–æ–≤—É –∫–æ–º–∞–Ω–¥—ã —Å –∫–ª—é—á–∞–º–∏ \
`PRI` –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`NI` —É—Å—Ç—É–ø—á–∏–≤–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ (nice value –æ—Ç 19 –¥–æ -20) \
`(($PRI+$NI))=((39+-20))=19` \
`TTY` —Ç–µ—Ä–º–∏–Ω–∞–ª, –∏–∑ –ø–æ–¥ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å \
`TIME` –æ–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–æ—Ü–µ—Å—Å–∞ (bsdtime/cputime/time) –∏–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ + —Å–∏—Å—Ç–µ–º–Ω–æ–µ) \
`STIME` –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã (bsdstart), –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –∑–∞–ø—É—â–µ–Ω –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥, —Ç–æ —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –±—É–¥–µ—Ç HH:MM, –µ—Å–ª–∏ –±–æ–ª—å—à–µ, —Ç–æ Mmm:SS (Sep 18) \
`C` —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (%CPU) –∑–∞ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ \
`%CPU` –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ (pcpu) \
`%MEM` –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫ –æ–±—ä–µ–º—É —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ –º–∞—à–∏–Ω–µ (pmem) \
`SZ` —Ä–∞–∑–º–µ—Ä –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –æ–±—Ä–∞–∑–∞ —è–¥—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞.  –°—é–¥–∞ –≤—Ö–æ–¥—è—Ç —Ç–µ–∫—Å—Ç, –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å—Ç–µ–∫–∞ \
`RSS` –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ (Resident Set Size non-swapped), —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω—è–ª (—Ç–æ –µ—Å—Ç—å —á—Ç–æ-—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤ –ø–∞–º—è—Ç—å) \
`VSZ` –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å (Virtual Memory Size) –≤ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö (1024-–±–∞–π—Ç–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö), –∫–æ—Ç–æ—Ä—É—é –≤—ã–¥–µ–ª–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—É, –Ω–æ —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω —É—Å–ø–µ–ª –≤ —ç—Ç—É –ø–∞–º—è—Ç—å —á—Ç–æ-—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å \
`LWP` –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø–æ—Ç–æ–∫–∞ (Light-Weight Process), –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω —Ç–µ–∫—É—â–∏–π ID –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–ª–∏ –ø–µ—Ä–≤—ã–π –ø–æ—Ç–æ–∫ \
`NLWP` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (Number) –¥–æ—á–µ—Ä–Ω–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ (ps -LFC mysqld | sed 1d | wc -l) \
`PSR` —è–¥—Ä–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å \
`STAT` R - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, D - –æ–∂–∏–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫, S - –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω (<20 —Å), T - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, Z - –∑–æ–º–±–∏, —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ (W - –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–≥—Ä—É–∂–µ–Ω –Ω–∞ –¥–∏—Å–∫, < - –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, N - –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, L - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ —è–¥—Ä–µ, s - –ø—Ä–æ—Ü–µ—Å—Å —è–≤–ª—è–µ—Ç—Å—è –ª–∏–¥–µ—Ä–æ–º —Å–µ–∞–Ω—Å–∞) \
`maj_flt` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏—Ö —Å –¥–∞–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º \
`min_flt` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü \
`ps -Ao comm,user,cputime,pcpu,pmem,sz,rss,vsz,nlwp,psr,pri,ni --sort cputime`

### kill

`kill -INT (-2) PID` –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, bash –ø–æ—à–ª—ë—Ç —Å–∏–≥–Ω–∞–ª SIGINT –ø—Ä–æ—Ü–µ—Å—Å—É (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ CTRL+C) \
`kill -KILL (-9) PID` –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å \
`kill -STOP (-19) PID` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, bash –ø–æ—à–ª—ë—Ç —Å–∏–≥–Ω–∞–ª SIGSTOP –ø—Ä–æ—Ü–µ—Å—Å—É (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ CTRL+Z) \
`kill -CONT (-18) PID` –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### procs

`snap install procs` —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ ps, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ Rust (https://github.com/dalance/procs) \
`procs`

## jobs

`(ping google.com) &` –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤ —Ñ–æ–Ω–µ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è [job] - –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ –∏ PID –ø—Ä–æ—Ü–µ—Å—Å–∞) \
`jobs` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (+ –∑–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞) \
`jobs -l | wc -l` –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π \
`fg 1` –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É –ø–æ –Ω–æ–º–µ—Ä—É \
`disown` –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (—É–¥–∞–ª–∏—Ç—å/–æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞–Ω–∏–π) \
`disown %1` –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—é (–µ—Å–ª–∏ –æ–Ω–∞ –ø–µ—Ä–≤–∞—è) –∑–∞–ø—É—â–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É \
`kill %1` –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—é –∑–∞–ø—É—â–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É

### nohup

`nohup ping ya.ru > ping.log &` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–π–¥–µ—Ç –∏–∑ —Å–µ–∞–Ω—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞) \
`ps -ef | grep "ping ya.ru"` –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å \
`kill $(pgrep ping)` –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å

### task-spooler

`sudo apt install task-spooler` \
`tsp sleep 10 && echo ok` —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É \
`tsp -l` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á \
`tsp -s 0` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ \
`tsp -t 0` –≤—ã–≤–µ—Å—Ç–∏ –≤—ã–≤–æ–¥ —Ä–∞–±–æ—Ç—ã –∑–∞–¥–∞—á–∏ (–≤ —Ä–µ–∂–∏–º–µ `tail`) \
`tsp -C` –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ (—Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `finished`) –∑–∞–¥–∞—á–∏

## mem

`free -m` –æ–±—ä–µ–º –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏ SWAP –≤ –ú–ë–∞–π—Ç \
`swapon` —Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SWAP, type, size, used, priority (–±–µ—Ä–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ /proc/swaps) \
`ipcs -lm` –æ–±—ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–∑–¥–µ–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏ (shared memory) \
`cat /proc/meminfo | grep Dirty` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—ä–µ–º –≥—Ä—è–∑–Ω—ã—Ö (Dirty) —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫—ç—à–µ (–µ—â–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫) \
`sync` –∑–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –Ω–æ –µ—â–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ (–≤–º–µ—Å—Ç–æ –∫—ç—à–∞ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å—Å—è –∏–∑ –¥–∏—Å–∫–∞) \
`cat /proc/meminfo | grep -iE "^cache|^buff"` –æ–±—ä–µ–º –∫—ç—à–∞ –∏ –±—É—Ñ–µ—Ä–∞ \
`echo 1 > /proc/sys/vm/drop_caches` –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª –Ω–∞ –≤—Ö–æ–¥ drop_caches –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫—ç—à–∞ (free buff/cache) - PageCache (—Å–∏–≥–Ω–∞–ª 1) \
`echo 2 > /proc/sys/vm/drop_caches` –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã - inode, dentrie (—Å–∏–≥–Ω–∞–ª 2)

## lsof

`PID` –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–ª —Ñ–∞–π–ª \
`TID` –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏/–ø–æ—Ç–æ–∫–∞, –ø—É—Å—Ç–æ–π —Å—Ç–æ–ª–±–µ—Ü –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –Ω–µ –∑–∞–¥–∞—á–∞ –∞ –ø—Ä–æ—Ü–µ—Å—Å \
`FD` —Ñ–∞–π–ª–æ–≤—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ñ–∞–π–ª–∞ (r - –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è, w - –¥–æ—Å—Ç—É–ø –¥–ª—è –∑–∞–ø–∏—Å–∏, u - –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏, -r - —Ä–µ–∂–∏–º –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –∏ –µ—Å—Ç—å —Å–∏–º–≤–æ–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ —á–∞—Å—Ç—å —Ñ–∞–π–ª–∞, R - –Ω–∞ –≤–µ—Å—å —Ñ–∞–π–ª) \
`TYPE` —Ç–∏–ø —É–∑–ª–∞, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å —Ñ–∞–π–ª–æ–º (REG - –æ–±—ã—á–Ω—ã–π —Ñ–∞–π–ª —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, DIR - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, CHR - —Å–∏–º–≤–æ–ª—å–Ω—ã–π —Ñ–∞–π–ª, BLK - –±–ª–æ—á–Ω—ã–π —Ñ–∞–π–ª, INET - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–∫–µ—Ç, unix - –¥–æ–º–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç UNIX, IPv4 - IPv4 —Å–æ–∫–µ—Ç, sock - –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–æ–∫–µ—Ç, DEL - —É–∫–∞–∑–∞—Ç–µ–ª—å Linux –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, LINK - —Ñ–∞–π–ª —Å–∏–º–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏, PIPE: ‚Äî —Å–ø–æ—Å–æ–± –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏) \
`SIZE/OFF` —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –∏–ª–∏ —Å–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö \
`lsof | sed 1d | wc -l` –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤/–¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ \
`cat /proc/sys/fs/file-nr` –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è \
`lsof +D /var/log/` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ (+D dir) FD: r/w/u \
`dd if=/dev/zero of=~/dd-zero-file` –∑–∞–Ω—è—Ç—å —Ñ–∞–π–ª –ø—Ä–æ—Ü–µ—Å—Å–æ–º dd –∏ Ctrl+Z –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ jobs) \
`ls -lh ~/dd*` \
`lsof ~/dd-zero-file` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∑–∞–Ω—è—Ç —Ñ–∞–π–ª (List Open Files) \
`lsof -c dd` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø–æ –∏–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞/–∫–æ–º–∞–Ω–¥—ã (–≤ —Ñ–æ—Ä–º–∞—Ç–µ wildcard) \
`lsof -p 1832509` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –ø–æ –Ω–æ–º–µ—Ä—É PID-–ø—Ä–æ—Ü–µ—Å—Å–∞ (-p) \
`lsof -c mysql` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –¥–µ—Ä–∂–∏—Ç –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞ (-c) \
`lsof -c bash | grep "\.sh"` –Ω–∞–π—Ç–∏ –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã \
`kill -9 $(lsof -t ~/dd-zero-file)` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–≤–æ–¥–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ PID-–ø—Ä–æ—Ü–µ—Å—Å–∞ (-t) –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ñ–∞–π–ª, –¥–ª—è –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (kill) \
`kill -9 $(lsof -t +D /smb/backup)` —É–±–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ umount /smb/backup \
`lsof -u root` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º  \
`lsof -u^root | wc -l` –∏—Å–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (^) –∏–∑ –ø–æ–∏—Å–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ \
`lsof -i:8080` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç (-i:)

### descriptor

`lsof -a -p $$ -d 0,1,2` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä–∞ `ps $$` \
`0u` STDIN ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤–≤–æ–¥–∞ (—Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã) \
`1u` STDOUT ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞ (–Ω–∞ —ç–∫—Ä–∞–Ω/–≤ —Ñ–∞–π–ª) \
`2u` STDERR ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫ \
`cat test.txt 1> out.txt 2> error.txt` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å —É—Å–ø–µ—à–Ω—ã–π –≤—ã–≤–æ–¥ (–µ—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) –≤ out.txt, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ error.txt \
`cat test2.txt 2> /dev/null` –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏ \
`cat=$(cat test 2>&1)` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–æ–∫ (stderr - standard error) –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ (stdout - standard output) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤–æ–≥–æ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞ (&) –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–∞

## vmstat

`cat /proc/vmstat` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç nr_free_pages, inactive/active anon, file \
`cat /proc/zoneinfo` —Å —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –Ω–∞ –∑–æ–Ω—ã –ø–∞–º—è—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è \
`vmstat -V` procps-ng 3.3.17 (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ top) \
`vmstat -s` —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ memory/swap/io/system/cpu \
`vmstat -d | grep sda` —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞ \
`vmstat -D` —Å—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–æ–≤ \
`vmstat -t 1 2` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å 2 –æ—Ç—á–µ—Ç–∞ (—Å—É–º–º–∞—Ä–Ω—ã–π –∏ —Ç–µ–∫—É—â–∏–π) —Å —á–∞—Å—Ç–∞—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 1 —Å–µ–∫—É–Ω–¥–∞ –∏ timestamp (-t) \
`r` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∏–ª–∏ –æ–∂–∏–¥–∞—é—â–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è) \
`b` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—è—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ \
`swpd` –æ–±—ä–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ \
`free` –æ–±—ä–µ–º —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ \
`buff` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—É—Ñ–µ—Ä–æ–≤ \
`cache` –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–µ—à–∞ \
`inact` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (-a) \
`active` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (-a) \
`si` –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –≤—ã–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Å –¥–∏—Å–∫–∞ (/s) \
`so` –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –Ω–∞ –¥–∏—Å–∫ (/s) \
`bi` IOPS (Input/Output Operations Per Second) –±–ª–æ–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ç –±–ª–æ—á–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (block input/sec) \
`bo` IOPS –±–ª–æ–∫–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –±–ª–æ—á–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (block output/sec) \
`in` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É, –≤–∫–ª—é—á–∞—è —á–∞—Å—ã \
`cs` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥—É \
`us` –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ –∑–∞–ø—É—Å–∫ –∫–æ–¥–∞, –Ω–µ –æ—Ç–Ω–æ—Å—è—â–µ–≥–æ—Å—è –∫ —è–¥—Ä—É (–≤—Ä–µ–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) \
`sy` –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —è–¥—Ä–∞ (—Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è) \
`id` –≤—Ä–µ–º—è –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è \
`wa` –≤—Ä–µ–º—è, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ \
`st` –≤—Ä–µ–º—è, —É–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

## sysstat

`apt install sysstat`

### iostat

`iostat -h` –≤—ã–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ kb/mb/gb (avg-cpu: %user %system %idle, tps - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –≤ —Å–µ–∫—É–Ω–¥—É) \
`iostat -hp` –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∏ –≤—Å–µ—Ö –µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞–º (-p) \
`iostat -ky /dev/sd* 1 1 | grep -w sd.` –≤—ã–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ö–ë–∞–π—Ç (-k), –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –ø–µ—Ä–≤—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –æ–ø—É—Å–∫–∞–µ—Ç—Å—è (-y) \
`iostat -h /dev/sda3 -o JSON` –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

### mpstat 

`mpstat` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —è–¥—Ä—É, –∏ –∫—É–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã \
`mpstat -P ALL` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–¥—Ä–∞. \
`mpstat 2 10` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å 10 —Ä–∞–∑ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã \
`%user` –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏, –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`%nice` –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º \
`%system` –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —è–¥—Ä–æ–º \
`%iowait` –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ, –∑–Ω–∞—á–∏—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–∞—Ç–∏—Ç—Å—è –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ \
`%steal` –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –ø–æ–∫–∞ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä –æ—Ç–¥–∞—ë—Ç –º–æ—â–Ω–æ—Å—Ç—å –¥—Ä—É–≥–æ–º—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É \
`%idle` –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ –∑–∞–Ω—è—Ç –Ω–∏—á–µ–º

### pidstat

`pidstat` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ç–µ–∫—É—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ \
`pidstat -p ALL` –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

## stress

`stress --cpu 2 --timeout 10` –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä –≤ —Ç–µ—á–µ–Ω–∏–∏ 10 —Å–µ–∫—É–Ω–¥ \
`stress -v N` –Ω–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å \
`stress --io 100 &` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤–≤–æ–¥-–≤—ã–≤–æ–¥ \
`iostat -d /dev/sda 1` \
`stress --hdd 100 &` –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫ \
`vmstat 1 100`

### stress-ng

`apt-get install stress-ng` \
`stress-ng --sequential 0 --class io --timeout 60s --metrics-brie` —Ç–µ—Å—Ç –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞ \
`stress-ng --hdd 5 --hdd-ops 100000` –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ 5 —Å—Ç—Ä–µ—Å—Å–æ—Ä–æ–≤ –¥–ª—è –∂—ë—Å—Ç–∫–∏—Ö –¥–∏—Å–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ 100 —Ç—ã—Å. bogo-–æ–ø–µ—Ä–∞—Ü–∏–π \
`stress-ng --cpu 1 --cpu-method matrixprod --metrics --timeout 60` \
`stress-ng --sequential 0 --class memory --timeout 60s --metrics-brief` \
`stress-ng --cpu 2 --io 4 --vm 1 --vm-bytes 1G --timeout 60s --metrics-brief`

## smart

### smartmontools

`apt install smartmontools` \
`smartctl -a /dev/sda` —Ç–µ—Å—Ç –¥–∏—Å–∫–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ \
`smartctl -H /dev/sda` SMART Health Status

### sensors

`apt install lm-sensors` \
`sensors-detect` —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—á–∏–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã \
`sensors` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–∞—Ç—á–∏–∫–∏

### badblocks

`badblocks -s /dev/sda` —Ç–µ—Å—Ç –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–µ—á–∏—Ç–∞–µ–º—ã—Ö/–±–∏—Ç—ã—Ö –±–ª–æ–∫–æ–≤/—Å–µ–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ

### hdparm

`hdparm -I /dev/sda | grep -i model` –º–æ–¥–µ–ª—å –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (Model Number, Serial Number, Firmware Revision) \
`hdparm -v /dev/sda` –∫–æ–ª-–≤–æ —Å–µ–∫—Ç–æ—Ä–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ \
`hdparm -tT /dev/sda` —Ç–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∫—ç—à–∞ (-t) –∏ —Å –∫—ç—à–µ–º (-T) \
`hdparm -D /dev/sda` –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–∞–º–∏ –¥–∏—Å–∫–æ–≤ \
`hdparm -r /dev/sda` –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º read only –¥–ª—è –¥–∏—Å–∫–∞ \
`hdparm -A /dev/sda` –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º read-look-ahead, –∫–æ–≥–¥–∞ –¥–∏—Å–∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º, –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é \
`hdparm -a /dev/sda` –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º read-ahead, –∫–æ–≥–¥–∞ —á—Ç–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö \
`hdparm -b /dev/sda` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫ –Ω–µ–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è \
`hdparm -S 1 /dev/sda` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–∞—â–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞ –¥–∏—Å–∫–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫ –Ω–µ–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è \
`hdparm -B 120 /dev/sda` –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏–µ–º Advanced Power Management (APM), —á–µ–º –Ω–∏–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –ª—É—á—à–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ (255 - –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è) \
`hdparm -Z /dev/sda` –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è \
`hdparm -M 128 /dev/sda` —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–º —à—É–º–∞ (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç 128 - –±–æ–ª–µ–µ —Ç–∏—Ö—É—é —Ä–∞–±–æ—Ç—É, –¥–æ 254 - –≤—ã—Å–æ–∫—É—é)

## disk

`du -sh /home` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (-s) \
`du -Sh /home` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö (-S) –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ –ø—É—Ç–∏ \
`du -h /home` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–æ–≤ –≤–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ \
`du -ah /home` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ (-a) –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

`lsblk` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–ª–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (/dev), –∏—Ö SIZE, TYPE (disk/part/lvm) –∏ —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (MOUNTPOINTS) \
`lsblk -e7` –≤—ã–≤–æ–¥ –±–µ–∑ loop \
`lsblk -f` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é FSTYPE, UUID, FSAVAIL - —Å–∫–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω–æ –Ω–∞ –¥–∏—Å–∫–µ –∏ FSUSE - —Å–∫–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö \
`lsblk -o NAME,MODEL,SERIAL,SIZE,STATE --nodeps | grep running` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–æ–¥–µ–ª—å, —Ä–∞–∑–º–µ—Ä –∏ —Å—Ç–∞—Ç—É—Å –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–∞–∑–¥–µ–ª–æ–≤/lvm (--nodeps) \
`lsblk -E NAME` –∏—Å–∫–ª—é—á–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–µ \
`lsblk -S` –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ SCSI-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (--scsi) \
`lsblk -b` –≤—ã–≤–æ–¥–∏—Ç—å SIZE –≤ –±–∞–π—Ç–∞—Ö (--bytes) \
`lsblk -J` –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON (--json) \
`lsblk -P` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ key="value" \
`lsblk -m` –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞

`df -h` –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±—â–∏–π –æ–±—ä—ë–º (Size), –∑–∞–Ω—è—Ç–æ–≥–æ (Used) –∏ —Å–≤–æ–±–æ–¥–Ω–æ (Avail) –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ \
`df -h -T` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å Type —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (ext4/cifs)

`apt install duf` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å duf \
`duf` –∞–Ω–∞–ª–æ–≥ df

`mount | grep /dev/` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã \
`mount | grep -P "mapper|lv|vg"` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ lvm

`findmnt` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ \
`findmnt -l` –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–ø–∏—Å–∫–∞ \
`findmnt -t ext4`

`e2label /dev/sda3` —É–∑–Ω–∞—Ç—å –º–µ—Ç–∫—É –¥–∏—Å–∫–∞ \
`blkid` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –¥–∏—Å–∫–æ–≤, –∏—Ö UUID –∏ TYPE \
`lsscsi` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SCSI —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫ —Å–∏—Å—Ç–µ–º–µ

### parted

`parted -l` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫–∞—Ö \
`parted -l | grep -i model` \
`dd if=/dev/zero of=/tmp/disk.img count=1000 bs=1M` —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –¥–∏—Å–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º 1–ì–± \
`parted /tmp/disk.img` –ø–µ—Ä–µ–¥–∞—Ç—å parted —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª-–æ–±—Ä–∞–∑ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –§–° \
`parted /dev/sdc` –ø–µ—Ä–µ–¥–∞—Ç—å parted –¥–∏—Å–∫ \
`mktable gpt` —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ GPT \
`print` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∏–ø —Ç–∞–±–ª–∏—Ü—ã (Partition Table: GPT) –∏ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã \
`print free` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –∏ –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã \
`mkpart primary ext4 0 500M` —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π, –ø–µ—Ä–≤–∏—á–Ω—ã–π (primary) —Ä–∞–∑–¥–µ–ª —Å –§–° ext4 —Ä–∞–∑–º–µ—Ä–æ–º 500–ú–±. \
`mkpart primary ext4 500 1000M` —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π —Ä–∞–∑–¥–µ–ª (–Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü) \
`resizepart 2 600M` —É–º–µ–Ω—å—à–∏—Ç—å 2-–π —Ä–∞–∑–¥–µ–ª –¥–æ 100–ú–ë (—É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è end-–∫–æ–Ω–µ—Ü) \
`resizepart 2 100%` —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ –≤—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ \
`rm 2` —É–¥–∞–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª

### fdisk 

`fdisk -l` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ —Å —Ä–∞–∑–º–µ—Ä–æ–º —Å–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ \
`fdisk -x` –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (—É–∑–Ω–∞—Ç—å UUID —Ä–∞–∑–¥–µ–ª–æ–≤) \
`fdisk -l | grep /dev/sd` \
`fdisk -l | grep -E "/dev/sd.[1-9]"` \
`fdisk -l | grep -E "lv|vg"` \
`fdisk /dev/sdc` \
`m` —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ \
`p` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ –∏ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤ (/dev/sdc1) \
`n` —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª (p), —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Ä–∞–∑–¥–µ–ª–∞ - partition number (4-128, default 4), –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω—Ü–µ —Å–µ–∫—Ç–æ—Ä–∞ - enter (–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`i` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ —Ä–∞–∑–¥–µ–ª–µ (–Ω–∞—á–∞–ª–æ, –∫–æ–Ω–µ—Ü, –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Å–µ–∫—Ç–æ—Ä–∞ –∏ —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞) \
`t` –∑–∞–¥–∞—Ç—å —Ç–∏–ø —Ä–∞–∑–¥–µ–ª–∞ - 30/8E (Linux LVM) –∏–ª–∏ 20/83 (Linux filesystem) \
`l` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ \
`w` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å \
`q` –≤—ã—Ö–æ–¥ \
`partprobe /dev/sdc` –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —è–¥—Ä–æ –û–° –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤, –∑–∞–ø—Ä–∞—à–∏–≤–∞—è —É —Å–∏—Å—Ç–µ–º—ã, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–µ—Ä–µ—á–∏—Ç–∞–ª–∞ —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤

### sfdisk

`sfdisk -d /dev/sdc > sdc.partition.table.txt` backup (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ dump cfdisk) \
`sfdisk -f /dev/sdc < sdc.partition.table.txt` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

`sfdisk -d /dev/sda | sfdisk -f /dev/sdd` –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è MD RAID1 (sda –≤ sdd) \
`mdadm --manage /dev/md1 --add /dev/sdd1` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è \
`watch cat /proc/mdstat` –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

- –ù–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è LVM:

`ls /dev/sd*` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –¥–∏—Å–∫–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ \
`fdisk -l` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –¥–∏—Å–∫–∏ —á–µ—Ä–µ–∑ fdisk \
`cfdisk /dev/sda` —Ä–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã (–Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç) \
`cfdisk /dev/sdb` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫, –≤—ã–±—Ä–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ (gpt) \
`new - sda4` —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª sda4 –∏–ª–∏ sdb1 \
`Free space - Partition size: 100G` \
`write - yes` \
`pvcreate /dev/sda4` —Å–æ–∑–¥–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç–æ–º –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ \
`vgextend ubuntu-vg /dev/sda4` –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª –≤ –≥—Ä—É–ø–ø—É \
`lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv` –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –≤ –≥—Ä—É–ø–ø–µ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ ubuntu-lv \
`lsblk` \
`df -h` —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ä—ã–π –æ–±—ä–µ–º –¥–∏—Å–∫–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã \
`df -T -h` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∏–ø –§–° \
`resize2fs -f /dev/ubuntu-vg/ubuntu-lv` –¥–ª—è ext* \
`btrfs filesystem resize +100g /` –¥–ª—è btrfs

- –ù–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞:

`cfdisk /dev/sd—Å` —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª (cfdisk/fdisk/parted) \
`mkfs.ext4 /dev/sdc1` —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª \
`mkdir /mnt/sdc1 && mount /dev/sdc1 /mnt/sdc1` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª, -o -r - –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ (--options --read-only) \
`df -h && lsblk` —Ä–∞–∑–¥–µ–ª –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ Mounted on –∏–ª–∏ MOUNTPOINTS \
`chmod 0777 /mnt/sdc1` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É \
`df -h -T` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∏–ø —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ \
`nano /etc/fstab` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏—ã \
`/dev/sdc1 /mnt/sdc1 ext4 rw,relatime 0 0` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é –∏–ª–∏ UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ \
`umount /dev/sdc1` –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª

### swap

`fallocate -l 4G /swapfile.img` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è swap \
`dd if=/dev/zero of=/swapfile.img count=1024 bs=1M` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è swap \
`chmod 600 /swapfile.img` –¥–∞—Ç—å –ø—Ä–∞–≤–∞ \
`mkswap /swapfile.img` —Å–æ–∑–¥–∞—Ç—å swap-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ—Å—å –æ–±—ä—ë–º —Ä–∞–∑–¥–µ–ª–∞ (mkswap /dev/sda4) \
`swapon /swapfile.img` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å swap-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ \
`echo '/swapfile.img none swap sw 0 0' | sudo tee -a /etc/fstab` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å \
`free -m` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—ä—ë–º \
`swapoff -a` –æ—Ç–∫–ª—é—á–∏—Ç—å \
`rm /swapfile.img` —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª

## lvm

**Logical Volume Management** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ —Ç–æ–º–∞–º–∏, —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –æ—Ç –∂–µ–ª–µ–∑–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –≤ –æ–¥–∏–Ω, –∏ –∑–∞—Ç–µ–º —Ä–∞–∑–±–∏—Ç—å –µ–≥–æ –Ω–∞ –≥—Ä—É–ø–ø—ã –∏ —Ä–∞–∑–¥–µ–ª—ã. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π RAID 0 –∏ 1 (–∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ) —Å —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º, —Å–Ω–∞–ø—à–æ—Ç–∞–º–∏ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–º–æ–≤ –≤ –¥—Ä—É–≥—É—é —Å–∏—Å—Ç–µ–º—É.

- PV (Physical Volume) ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ç–æ–º–∞

`pvs` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Physical Volume \
`pvdisplay` –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è \
`pvcreate /dev/sdb` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–∫–∞ –≤ LVM –∫–∞–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–æ–º

- VG (Volume Group) ‚Äî –≥—Ä—É–ø–ø—ã —Ç–æ–º–æ–≤, –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ç–æ–º–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—â–µ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –¥–∏—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—Å—å—è –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã

`vgs` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Volume Group \
`vgdisplay` –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è \
`vgcreate vg21 /dev/sdb` —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É —Ç–æ–º–æ–≤ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞ –Ω–∞ –¥–∏—Å–∫–µ sdb

- LV (Logical Volume) ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã

`lvs` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Logic Volume –∏ –∏—Ö –æ–±—ä—ë–º \
`lvdisplay` –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è \
`lvcreate -n boot -L 1G vg21` —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º boot \
`lvcreate -n home -L 9G vg21` —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º home \
`lvcreate -n lv21 -l+100%FREE vg21` —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª lv21 –¥–ª—è –≥—Ä—É–ø–ø—ã —Ç–æ–º–æ–≤ vg21 –∏ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –µ–º—É –≤–µ—Å—å –æ–±—ä–µ–º –¥–∏—Å–∫–∞ \
`mkfs -t ext4 /dev/vg21/lv21` –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º ext4 \
`mkdir /mnt/lv21` —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è \
`mount /dev/vg21/lv21 /mnt/lv21` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ \
`echo "/dev/vg21/lv21 /mnt/lv21 ext4 defaults 0 0" >> /etc/fstab` –¥–æ–±–∞–≤–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∫—É

- –£–≤–µ–ª–∏—á–∏—Ç—å

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ —Å—á–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞ –ø—É—Ç—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É –∏–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –∏–º–µ—é—â–µ–≥–æ—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞. \
`pvcreate /dev/sdc` e—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –¥–∏—Å–∫, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º (–º–∏–Ω—É—Å: –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –¥–∏—Å–∫–æ–≤ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å—Ç—Ä–æ—è, –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–∞–±–æ—Ç–µ RAID 0) \
`pvresize /dev/sdb` –µ—Å–ª–∏ —É–≤–µ–ª–∏—á–∏–Ω –æ–±—ä–µ–º –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ (resize - –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞) \
`vgextend vg21 /dev/sdc` —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≥—Ä—É–ø–ø—É vg21 –∑–∞ —Å—á–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –¥–∏—Å–∫–∞ sdc (–∏–ª–∏ vgdisplay) \
`vgs` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —É –∫–∞–∫–æ–π –∏–∑ –≥—Ä—É–ø–ø –≤—Å–µ–≥–æ –ø–∞–º—è—Ç–∏ VSize –∏ —Å–∫–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–∞–º—è—Ç–∏ VFree –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–∏–ª–µ–Ω–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–¥–µ–ª–∞–º –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—É—é —Ä–∞—Å—à–∏—Ä–∏–ª–∏ \
`lvextend -l +100%FREE /dev/vg21/lv21` –¥–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞—Å—Ç–≤–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ä–∞–∑–¥–µ–ª—É \
`vgs` VFree –±—É–¥–µ—Ç=0 –∞ –≤ lsblk –æ–±—ä—ë–º —Ä–∞–∑–¥–µ–ª–∞ —É–≤–µ–ª–∏—á–∏—Ç—Å—è \
`lvextend -L+1G /dev/vg21/lv21` –¥–æ–±–∞–≤–∏—Ç—å 1–ì–± –æ—Ç –≥—Ä—É–ø–ø—ã —Ç–æ–º–æ–≤ vg21 —Ä–∞–∑–¥–µ–ª—É lv21 \
`lvextend -L500G /dev/vg21/lv21` –¥–æ–±–∞–≤–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–∏—Å–∫–∞ 500–ì–± \
`lvs` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å \
`df -T` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –§–° \
`resize2fs /dev/vg01/lv01` –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã ext4

- –£–º–µ–Ω—å—à–∏—Ç—å

`e2fsck -fy /dev/vg21/lv21` –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–∞ \
`resize2fs /dev/vg21/lv21 500M` —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –§–° –Ω–∞ 500–ú–±–∞–π—Ç \
`lvreduce -L-500 /dev/vg21/lv21` —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞ –Ω–∞ 500–ú–±–∞–π—Ç \
`vgs` –¥–æ–±–∞–≤–∏—Ç—Å—è VFree 500m –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–µ

`resize2fs /dev/ubuntu-vg/ubuntu-lv 1G` —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –§–° –Ω–∞ 500–ú–±–∞–π—Ç \
`lvreduce -L-1000 /dev/ubuntu-vg/ubuntu-lv` —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞ –Ω–∞ 1000–ú–±–∞–π—Ç (Logical volume ubuntu-vg/ubuntu-lv successfully resized) \
`vgs` VFree 1000.00m

- –£–¥–∞–ª–∏—Ç—å

`umount /dev/vg21/lv21` –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å \
`lvremove /dev/vg21/lv21` —É–¥–∞–ª–∏—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–æ–º \
`lvs` –Ω–µ—Ç –≥—Ä—É–ø–ø \
`vgs` VSize –∏ VFree –æ–±—ä—ë–º —Å–æ–≤–ø–∞–¥–∞–µ—Ç \
`vgremove vg21` —É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É —Ç–æ–º–æ–≤ \
`pvremove /dev/sdb` —É–¥–∞–ª–∏—Ç—å –¥–∏—Å–∫ sdb –∏–∑ LVM

- RAID 1

–ù–æ–≤—ã–π –¥–∏—Å–∫ sdc —Ä–∞–∑–±–∏—Ç—å –Ω–∞ 2 —Ä–∞–∑–¥–µ–ª–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π sdc1, –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ —á–µ–º —É —Ü–µ–ª–µ–≤–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ–º–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ lv21 –∏ sdc2 –æ—Å—Ç–∞–≤—à–∏–π—Å—è –æ–±—ä–µ–º –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞) \
`pvcreate /dev/sdc1 /dev/sdc2` –¥–æ–±–∞–≤–∏—Ç—å –æ–±–∞ —Ä–∞–∑–¥–µ–ª–∞ –≤ LVM \
`vgextend vg21 /dev/sdc1 /dev/sdc2` –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–º–µ—é—â–∏—é—Å—è –≥—Ä—É–ø–ø—É vg21 (—Ä–∞—Å—à–∏—Ä–∏—Ç—å –≥—Ä—É–ø–ø—É vg21) \
`vgs` —É –≥—Ä—É–ø–ø—ã vg21 VFree —É–≤–µ–ª–∏—á–∏—Ç—Å—è –æ–±—ä—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–æ–º–æ–≤-—Ä–∞–∑–¥–µ–ª–æ–≤ \
`lvconvert -m1 /dev/vg21/lv21 /dev/sdb /dev/sdc1 /dev/sdc2` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–æ–º lv21, –≤—Ö–æ–¥—è—â–∏–π –≤ —Å–æ—Å—Ç–∞–≤ –≥—Ä—É–ø–ø—ã vg21 –≤ –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ–º—ã–π —Ç–æ–º (-m1), –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ—Ç—Å—è /dev/sdb (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è lv21) –Ω–∞ sd—Å1, –∞ /dev/sd—Å2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞.

`lvs -a -o +devices` —Ä–∞–∑–¥–µ–ª lv21 –ø–∏—à–µ—Ç –Ω–∞ 2 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```
[lv21_rimage_0] /dev/sdb(0) # –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–º
[lv21_rimage_1] /dev/sdc1(1) # –∑–µ—Ä–∫–∞–ª–æ
```
`lsblk`
```
sdb                     8:16    0    4G  0 disk
+-vg21-lv21_rmeta_0    253:0    0    4M  0 lvm
¬¶ L-vg21-lv21          253:4    0    2G  0 lvm
L-vg21-lv21_rimage_0   253:1    0    2G  0 lvm
  L-vg21-lv21          253:4    0    2G  0 lvm
sdc                     8:32    0    4G  0 disk
+-sdc1                  8:33    0    3G  0 part
¬¶ +-vg21-lv21_rmeta_1  253:2    0    4M  0 lvm
¬¶ ¬¶ L-vg21-lv21        253:4    0    2G  0 lvm
¬¶ L-vg21-lv21_rimage_1 253:3    0    2G  0 lvm
¬¶   L-vg21-lv21        253:4    0    2G  0 lvm
```
–ò–∑–≤–ª–µ–∫–∞–µ–º (—É–¥–∞–ª—è–µ–º) `sdb` (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏—Å–∫) \
`lsblk` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ —Ä–∞–∑–¥–µ–ª–∞ (part) sdc1 –∏ sdc2 –∑–µ—Ä–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ –±–µ–∑ LVM, —Ç.–∫. –≥—Ä—É–ø–ø–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞ \
–ö–æ–º–∞–Ω–¥–æ–π `lvs` –≤–∏–¥–∏–º –≥—Ä—É–ø–ø—É `vg21` –∏ –æ—à–∏–±–∫–∏:
```
WARNING: Couldn't find device with uuid stBI99-6Qs3-B8lr-Ekaw-ahnD-oxPc-LsayLR.
WARNING: VG vg21 is missing PV stBI99-6Qs3-B8lr-Ekaw-ahnD-oxPc-LsayLR (last written to /dev/sdb).
```
`vgchange -ay vg21` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É \
`mount /dev/vg21/lv21 /mnt/lv21` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É lv21

- Snapshot

`lvs` \
`lvcreate -L 1G -s -n snap-1 /dev/ubuntu-vg/ubuntu-lv` –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å VFree –≤ Volume Group (Logical volume "snap-1" created) \
`lvcreate -L 1G -s -n snap-1 /dev/vg21/lv21` –ø–∞—Ä–∞–º–µ—Ç—Ä -s –ø–æ–º–µ—á–∞–µ—Ç, —á—Ç–æ 1–ì–± –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–∑ –≥—Ä—É–ø–ø—ã vg21 –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è snapshot lv21  \
`lvs` Origin - –∫ –∫–∞–∫–æ–º—É –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ç–æ–º—É (lv) –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è snapshot, Data% ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –æ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ. \
`lsblk` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–æ–º–∞—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ \
`mount /dev/vg21/snap-1 /mnt/snap` —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–Ω–∞–ø—à–æ—Ç–∞ –º–æ–∂–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ä–∞–∑–¥–µ–ª, –µ—Å–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏–≤–∞—Ä–æ—Ç—å —Å–Ω–∞–ø—à–æ—Ç –∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–µ–º—É, –º—ã –ø–æ–ª—É—á–∏–º —Ç–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ \
`lvconvert --merge /dev/vg21/snap-1` –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ —Å–Ω–∞–ø—à–æ—Ç—É snap-1, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –û–° (–¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Å–∫)

- Export/Import

`umount /dev/vg21/lv21` –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å \
`vgchange -an vg21` –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É —Ç–æ–º–æ–≤ (0 logical volume –≤ volume group "vg21") \
`vgexport vg21` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É (successfully exported) \
`pvdisplay` —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø (VG Name vg21 (exported)) \
–ü–µ—Ä–µ–Ω–æ—Å–∏–º –¥–∏—Å–∫ –Ω–∞ –Ω–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä: \
`pvscan` —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã –Ω–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (PV /dev/sdb is in exported VG vg21) \
`vgimport vg21` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É (successfully imported) \
`vgs –∏ lvs` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä—É–ø–ø—ã \
`vgchange -ay vg21` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É (1+ lg –≤ vg "vg21") \
`lsblk` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ LVM

## md

> SOFT RAID

`mdadm --zero-superblock --force /dev/sd{b,c}` –∑–∞–Ω—É–ª–∏—Ç—å –≤—Å–µ —Å—É–ø–µ—Ä–±–ª–æ–∫–∏ –Ω–∞ –¥–∏—Å–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ RAID-–º–∞—Å—Å–∏–≤, —Ç.–∫. –¥–∏—Å–∫–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª—É–∂–µ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—Ä—É–≥–∏—Ö RAID (–≤—ã–≤–æ–¥: unrecognised md component device - –Ω–∏ –æ–¥–∏–Ω –∏–∑ –¥–∏—Å–∫–æ–≤ —Ä–∞–Ω–µ–µ –Ω–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ –º–∞—Å—Å–∏–≤) \
`mdadm --create --verbose /dev/md0 -l 1 -n 2 /dev/sd{b,c}` —Å–æ–∑–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª—å–Ω—ã–π RAID1 (-l/--leve 1) –∏ —É–∫–∞–∑–∞—Ç—å –∫–æ–ª-–≤–æ –¥–∏—Å–∫–æ–≤ (-n/--raid-devices) \
`mkfs.ext4 /dev/md0` —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ fs ext4 \
`mkdir /md0-sdb-sdc-raid1` —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è \
`mount /dev/md0 /md0-sdb-sdc-raid1` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é \
`lsblk -o NAME,UUID | grep md*` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ \
`echo "UUID=20482c47-fa11-462d-b7b8-93a342a7edf8 /md0-sdb-sdc-raid1 ext4 defaults 1 2" >> /etc/fstab` –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –ø–æ UUID, —Ç.–∫. –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –û–° –Ω–æ–º–µ—Ä –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ md127 \
`mount -a` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ fstab \
`cat /proc/mdstat` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö RAID-–º–∞—Å—Å–∏–≤–æ–≤: md127 : active raid1 sdc[1] sdb[0] \
`mdadm -D /dev/md127` –ø–æ–¥—Ä–æ–±–Ω–æ–µ (--detail) —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞. State: cleane (–ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç)/degraded (–¥–∏—Å–∫ –Ω–µ–∏—Å–ø—Ä–∞–≤–µ–Ω/–ø–æ–≤—Ä–µ–∂–¥–µ–Ω). Active/Working/Failed/Spare Devices - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (–≤ —Ä–∞–±–æ—Ç–µ)/—Ä–∞–±–æ—á–∏—Ö/–Ω–µ—Ä–∞–±–æ—á–∏—Ö/–∑–∞–ø–∞—Å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ. Consistency Policy - —Ç–∏–ø —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–±–æ—è –≤ –º–∞—Å—Å–∏–≤–µ (resync - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞). \
`mdadm /dev/md127 --add /dev/sdd` –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∞—Å–Ω–æ–π –¥–∏—Å–∫ (–≤ Spare Device) –¥–ª—è –≥–æ—Ä—á–µ–π –∑–∞–º–µ–Ω—ã (Hot-Spare), –≤ —Å—Ç–∞—Ç—É—Å–µ —Å–ø–∏—Å–∫–∞ –¥–∏—Å–∫–æ–≤ –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∫–∞–∫–æ–π –¥–∏—Å–∫ (State - spare /dev/sdd) \
`mdadm -G /dev/md127 ‚Äîraid-devices=3` —Ä–∞—Å—à–∏—Ä–∏—Ç—å –º–∞—Å—Å–∏–≤ –¥–æ —Ç—Ä–µ—Ö –¥–∏—Å–∫–æ–≤ (–¥–æ–±–∞–≤–∏—Ç—Å—è –∏–∑ –∑–∞–ø–∞—Å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –≤ –∞–∫—Ç–∏–≤–Ω—ã–π –≤ –º–∞—Å—Å–∏–≤) \
`mdadm /dev/md127 --fail /dev/sdb` –ø–æ–º–µ—Ç–∏—Ç—å —Ä–∞–±–æ—á–∏–π –¥–∏—Å–∫ –∫–∞–∫ –Ω–µ—Ä–∞–±–æ—á–∏–π (–ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–∏—Å–∫ –≤ Failed Device) –¥–ª—è –∑–∞–º–µ–Ω—ã –Ω–∞ –∑–∞–ø–∞—Å–Ω–æ–π –∏–∑ Spare Device, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–ª—è –≤–≤–æ–¥–∞ –≤ –º–∞—Å—Å–∏–≤ (Rebuild Status : 50% complete) \
`mdadm /dev/md127 --remove /dev/sdb` —É–¥–∞–ª–∏—Ç—å –Ω–µ—Ä–∞–±–æ—á–∏–π –¥–∏—Å–∫ –∏–∑ –º–∞—Å—Å–∏–≤–∞ \
`mdadm --stop /dev/md127` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Ä–∞–∑–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ umount /md0-sdb-sdc-raid1). –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö –¥–∏—Å–∫–æ–≤ –±—ã–ª –∏–∑–≤–ª–µ—á–µ–Ω –∏ –Ω–µ –±—ã–ª–æ –∑–∞–ø–∞—Å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤, –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (State : inactive) \
`mdadm --assemble --scan --verbose` –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –¥–∏—Å–∫–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–≥–æ/—Ä–∞–∑–≤–∞–ª–∏–≤—à–µ–≥–æ—Å—è RAID-–º–∞—Å—Å–∏–≤–∞ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –Ω–∏—Ö –º–∞—Å—Å–∏–≤ —Å –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º (mdadm -D /dev/md0) \
`mdadm --stop /dev/md127 && mdadm --assemble --scan && mount -a && mdadm -D /dev/md0` –µ—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –¥–∏—Å–∫ (–≤—Ç–æ—Ä–æ–π –∏–∑–≤–ª–µ—á–µ–Ω), RAID-–º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –≤–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–∏—Å–∫–∞ —Å —Å—Ç–∞—Ç—É—Å–æ–º: clean, degraded, –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö \
`mdadm --assemble /dev/md127 /dev/sdb /dev/sdc` —É–∫–∞–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–∑ –∫–∞–∫–∏—Ö –¥–∏—Å–∫–æ–≤ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ \
`echo 'check' > /sys/block/md127/md/sync_action` –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –º–∞—Å—Å–∏–≤–µ (mdadm -D /dev/md0 - Check Status : 80% complete) \
`cat /sys/block/md127/md/mismatch_cnt` –≤—ã–≤–æ–¥ —Ñ–∞–π–ª–∞ (0 - –≤—Å–µ –≤–ø–æ—Ä—è–¥–∫–µ) \
`echo 'idle' > /sys/block/md127/md/sync_action` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É

## tgt

> iSCSI

`apt install tgt` —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Ä—Ç–∞–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ª–∏ (Target), –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É - –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É (Initiator) –¥–æ—Å—Ç—É–ø –∫ –±–ª–æ—á–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º. \
`dd if=/dev/zero of=/storage/disk1.img bs=1 count=0 seek=200G` —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –¥–∏—Å–∫–∞ (—Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª) —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º 200 –ì–ë, –≥–¥–µ –≤–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–ª–µ–π –Ω–∞ –¥–∏—Å–∫–µ —Ö—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ \
`dd if=/dev/zero of=/storage/disk1.img bs=1M count=2048` —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–∏—Å–∫ \
`cp --sparse=always filename newfilename` –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π \
`nano /etc/tgt/targets.conf` \
`nano /etc/tgt/conf.d/disk-1.conf`
```
<target iqn.2023-10.local.domain:ubuntu-target> 
   backing-store /storage/disk1.img 
   initiator-address 192.168.3.101
   incominguser user password1212
</target>
```
`systemctl restart tgt` \
`tgtadm --mode target --op show` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –∏–º–∏ –±–ª–æ—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

## dd

`dd if=/dev/sr0 of=/tmp/cd.iso bs=2048` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑ –¥–∏—Å–∫–∞ (if=–∏—Å—Ç–æ—á–Ω–∏–∫) –≤ —Ñ–∞–π–ª (of=–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª-–≤–∞ –±–∞–π—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑ (2–ú–ë–∞–π—Ç), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ - 512 –±–∞–π—Ç (2b –±–ª–æ–∫–∞ = 1024 –±–∞–π—Ç, 1k = 1 –ö–ë–∞–π—Ç/1024 –±–∞–π—Ç, 1kB = 1000 –±–∞–π—Ç, 1M = 1024 –ö–ë–∞–π—Ç/1 –ú–ë–∞–π—Ç) \
`dd if=/dev/mem bs=2048 count=100` –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª) \
`dd if=/dev/zero of=/tmp/md-01 bs=4M count=256` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏ (–∏–∑ /dev/zero) —Ä–∞–∑–º–µ—Ä–æ–º 1–ì–ë —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª-–≤–æ –∫–æ–ø–∏—Ä—É–µ–º—ã—Ö –±–ª–æ–∫–æ–≤ (bs*count) –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –¥–∏—Å–∫ \
`dd if=/dev/random of=/tmp/md-02 bs=4M count=256` —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º 1–ì–ë –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏ \
`dd if=/dev/sda of=/tmp/mbr.img bs=1b count=1` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª –ø–µ—Ä–≤—ã–µ 512 –±–∞–π—Ç –¥–∏—Å–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ MBR \
`dd if=/dev/sda of=/tmp/sda.img` —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–∞—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ backup —Å–∏—Å—Ç–µ–º—ã (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –Ω–∞ –¥–≤–æ–∏—á–Ω–æ–º —É—Ä–æ–≤–Ω–µ,–≤–∫–ª—é—á–∞—è —Ç–∞–±–ª–∏—Ü—É MBR –∏ –≤—Å—é –ø—É—Å—Ç—É—é –æ–±–ª–∞—Å—Ç—å –¥–∏—Å–∫–∞ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤)

### backup

- –°–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –Ω–æ—Å–∏—Ç–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞: `mount /dev/sdb1 /mnt/disk_b`
- `dd if=/dev/sda of=/mnt/disk_b/disk.img bs=5M` —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑–∞ –¥–∏—Å–∫–∞ (.img) # —Å–æ–∑–¥–∞–µ–º –æ–±—Ä–∞–∑ —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ–±—Ä–∞–∑–∞ –Ω–∞ –¥–∏—Å–∫ (`sdc`)
- `dd if=/mnt/disk_b/disk.img of=/dev/sdc bs=5M` –∑–∞–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –¥–∏—Å–∫ (—Å sdb1 –Ω–∞ sdc):
- –ò–∑–≤–ª–µ—á—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ñ–î –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –¥–∏—Å–∫ sda (—Å–∏—Å—Ç–µ–º–Ω—ã–π) –∏ `sdb` (—Å –∑–∞–ø–∏—Å—å—é –æ–±—Ä–∞–∑–∞). –î–∏—Å–∫ `sdc` —Å –∫–æ–ø–∏–µ–π —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –¥–∏—Å–∫ `sda` –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã.
- `gzip disk.img` —Å–∂–∞—Ç—å –æ–±—Ä–∞–∑ (–≤—Å–µ –Ω—É–ª–∏ —Å–æ–∂–º—É—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é - —É–¥–æ–±–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è backup, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ .img)
`dd if=/dev/sda conv=sync,noerror bs=5M | gzip -c  > /mnt/disk_b/disk.img.gz` —Å–æ–∑–¥–∞—Ç—å —Å–∂–∞—Ç—ã–π –æ–±—Ä–∞–∑ —Å–∏—Å—Ç–µ–º—ã \
`gunzip -c /mnt/disk_b/disk.img.gz | dd of=/dev/sd—Å` —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –¥–∏—Å–∫

`nc -lp 5000 | sudo dd of=/backup/sda.img.gz` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∂–∞—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –æ–±—Ä–∞–∑–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ sdb –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) \
`dd if=/dev/sda | gzip -c | nc 192.168.21.121 5000` –Ω–∞ —É–∑–ª–µ, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ (–ø–µ—Ä–µ–¥–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) \
`nc -lp 5000 | gunzip -c | sudo dd of=/dev/sdb` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏–∑ —Å–∂–∞—Ç–æ–≥–æ –æ–±—Ä–∞–∑–∞ (–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏—Å–∫), —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —É–∑–ª–µ (–ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) \
`cat /backup/sda.img.gz | nc my_local_host.com 5000` –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (–ø–µ—Ä–µ–¥–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)

### iso

`dd if=/dev/sda3 status=progress of=/mnt/disk_b/disk.iso bs=5M` —Å–æ–∑–¥–∞—Ç—å iso-–æ–±—Ä–∞–∑ (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑ —Ä–∞–∑–¥–µ–ª) \
`dd if=–ø—É—Ç—å/–∫/–æ–±—Ä–∞–∑—É.iso of=/dev/sdb1` –∑–∞–ø–∏—Å–∞—Ç—å ISO-–æ–±—Ä–∞–∑ –û–° –Ω–∞ –≤–Ω–µ—à–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ \
`sync` –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–ø–∏—Å—å —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–æ–π (—á—Ç–æ –±—ã –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö) \
`mount -o loop /mnt/disk_b/disk.iso /mnt/iso` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (iso - —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å), –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ /dev/loop6 \
`umount /mnt/iso` –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

### rdiff

`apt install rdiff-backup` –Ω–∞ –±–∞–∑–µ rsync —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é hard link, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –¥–µ–Ω—å \
`rdiff-backup /usr/lifailon/ /backup/test/` \
`rdiff-backup user@hostname::/remote-dir local-dir -v5 --print-statistics` –ø–æ ssh —Å —Å–µ—Ä–≤–µ—Ä–∞¬†–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø-—Å–µ—Ä–≤–µ—Ä, –≤ –Ω–µ–π –∂–µ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è rdiff-backup-data, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ª–æ–≥–∏ –æ –ø—Ä–æ–≤–æ–¥–∏–º—ã—Ö –±—ç–∫–∞–ø–∞—Ö, –∞ —Ç–∞–∫–∂–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –Ω–∞ –ª—é–±–æ–π –ø—Ä–æ—à–ª—ã–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –±—ç–∫–∞–ø \
`rdiff-backup list files --changed-since 5D local-dir` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –¥–Ω–µ–π \
`rdiff-backup list files --at 5D local-dir` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –∞—Ä—Ö–∏–≤–µ 5 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ \
`rdiff-backup restore local-dir/rdiff-backup-data/increments.2023-10-29T21:03:37+03:00.dir /tmp/restore` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∏–Ω–∫—Ä–∏–º–µ–Ω—Ç–∞

## users

`sudo -u www-data` –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`su root` –≤–æ–π—Ç–∏ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º root \
`sudo su` –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ root, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ—Ç–æ–º—É, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–∞—à .bashrc. –ê —Ç–∞–∫–∂–µ .profile –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root –ø–æ—ç—Ç–æ–º—É –≤—ã –æ–∫–∞–∂–µ—Ç–µ—Å—å –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ root \
`sudo -i` —É–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ç–∏–ª–∏—Ç–µ —á—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –æ—Ç –∏–º–µ–Ω–∏ root, –ø—Ä–∏ —ç—Ç–æ–º –ø–µ—Ä–µ–º–µ—â–∞—è—Å—å –≤ –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ root, –∏ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –µ–≥–æ .bashrc –∏ .profile \
`sudo /bin/bash` –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ—â–µ –æ–¥–Ω—É –æ–±–æ–ª–æ—á–∫—É bash –æ—Ç –∏–º–µ–Ω–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è, –Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ .bashrc –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í—ã –Ω–µ –æ–∫–∞–∂–µ—Ç–µ—Å—å –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ root, –∞ –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç–µ—Å—å –≤ —Å–≤–æ–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

`cat /etc/passwd` —Å–ø–∏—Å–æ–∫/–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ \
`cat /etc/group` —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø \
`cat /etc/shadow | grep -Ev "^.+:\*:"` –ø–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (–∑–∞–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é /usr/bin/passwd), –µ—Å–ª–∏ * –∏–ª–∏ ! –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ –ø–∞—Ä–æ–ª—é, –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –≤—Ö–æ–¥–∞, –∫–∞–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–π –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã. –°–∏–Ω—Ç–∞–∫—Å–∏—Å: –ª–æ–≥–∏–Ω:–ø–∞—Ä–æ–ª—å:–ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –∏—Å—á–∏—Å–ª—è–µ—Ç—Å—è —Å 1 —è–Ω–≤–∞—Ä—è 1970 –≥–æ–¥–∞):–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è:–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:–ø–µ—Ä–∏–æ–¥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:–ø–µ—Ä–∏–æ–¥ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è:—Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è

`cat /etc/login.defs | grep -Pv "^$|^#"` –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è —É—Ç–∏–ª–∏—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ id –¥–ª—è –≤—ã–¥–∞—á–∏ –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–≥—Ä—É–ø–ø–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞, —Ç–∞–π–º–∞—É, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏ —Ç.–ø.) \
`cat /etc/login.defs | grep "^PASS"` –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è (PASS_MAX_DAYS), –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –º–µ–∂–¥—É —Å–º–µ–Ω–∞–º–∏ –ø–∞—Ä–æ–ª—è (PASS_MIN_DAYS), –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏—Ö –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è (PASS_WARN_AGE), –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª–µ–π (PASS_MIN_LEN/PASS_MAX_LEN), –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è (LOGIN_RETRIES), –≤—Ä–µ–º—è –Ω–∞ –≤—Ö–æ–¥ (LOGIN_TIMEOUT), –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤ (LOG_OK_LOGINS), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∏–∑–≤–µ—Ç–Ω—ã—Ö –∏–º–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—Ö–æ–¥–∞ (LOG_UNKFAIL_ENAB)

### passwd

`passwd` –≤–∫–ª—é—á–∏—Ç—å —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å root –∏ –∑–∞–¥–∞—Ç—å –µ–π –ø–∞—Ä–æ–ª—å \
`passwd username` —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`passwd -l username` –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—á. –∑–∞–ø–∏—Å—å \
`passwd -u username` —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—á. –∑–∞–ø–∏—Å—å

### chage

`chage -l root` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ—Å–ª–µ–¥–Ω—è—è —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è, –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è, –ü–∞—Ä–æ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω, –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏, –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–µ–∂–¥—É —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è, –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–µ–∂–¥—É —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è) \
`chage -E lifailon` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ (-E) \
`chage lifailon -M 30` —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ (-m) –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ (-M) —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è

### id

`id lifailon` —É–∑–Ω–∞—Ç—å ID \
`uid=1000(lifailon) gid=1000(lifailon) groups=1000(lifailon),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lxd)` \
`usermod -u 1022 kup` –∏–∑–º–µ–Ω–∏—Ç—å UID \
`groupmod -g 1022 kup` –∏–∑–º–µ–Ω–∏—Ç—å GID

### usermod

`usermod -L lifailon` –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é (–ø–µ—Ä–µ–¥ –ø–∞—Ä–æ–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ñ–∞–π–ª–µ /etc/shadow –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫) \
`usermod --expiredate 1 -L lifailon` –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ su: Authentication failure) \
`usermod --expiredate 2023-10-25 lifailon` –∑–∞–¥–∞—Ç—å –¥–∞—Ç—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ \
`usermod --expiredate "" -U lifailon` —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`usermod -g root lifailon` –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –≥—Ä—É–ø–ø—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`usermod -a -G plugdev lifailon` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É (-G), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å -a, —á—Ç–æ–±—ã –Ω–µ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ \
`usermod -d /root lifailon` –∏–∑–º–µ–Ω–∏—Ç—å –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-d) \
`usermod -m -d /root lifailon` –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –¥–æ–º–∞—à–Ω—é—é –ø–∞–ø–∫—É —Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (-m) \
`usermod -s /usr/bin/dash lifailon` –∏–∑–º–µ–Ω–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (-s) \
`usermod -u 2002 lifailon` –∏–∑–º–µ–Ω–∏—Ç—å id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u) \
`usermod -l lifailon failon` –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-l) \
`usermod --password "NewPassword" lifailon` –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å

### profile

`nano /etc/bash.bashrc` –∑–∞–¥–∞—Ç—å timeout –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±–µ–∑–¥–µ–π—Å—Ç—É—é—â–∏—Ö (idle time) SSH –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π \
`nano /etc/profile` –∑–∞–¥–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ñ–∏–ª—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∏–∂–µ)
```
TMOUT=1440
readonly TMOUT
export TMOUT
```
### bashrc

`.bashrc` —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`.bash_profile` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–Ω–æ –ø–æ SSH. –ï—Å–ª–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å .bash_login –∏–ª–∏ .profile \
`/etc/environment` —Ñ–∞–π–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–∞–∂–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏. \
`/etc/bash.bashrc` —Ñ–∞–π–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—É—é —Å–µ—Å—Å–∏—é. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, —Ç–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã. \
`/etc/profile` —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª profile, –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞, –¥–æ—Å—Ç—É–ø–Ω—ã –ª—é–±–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ —Å–∏—Å—Ç–µ–º–µ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –≤–æ—à–µ–ª —É–¥–∞–ª–µ–Ω–Ω–æ. –ù–æ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏, —Ç–æ –µ—Å—Ç—å –µ—Å–ª–∏ –≤—ã –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª.

### useradd

`useradd -D` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é \
`useradd -o -u 0 -g 0 -s /bin/bash newroot` —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ root \
`useradd -G adm,wheel -p password -s /bin/bash test2` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–∏—Ç–∞—Ç—å –ª–æ–≥–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è sudo

`useradd username` \
`-s` —É–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥–Ω—É—é –æ–±–æ–ª–æ—á–∫—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /bin/sh - –±–µ–∑ –æ–±–æ–ª–æ—á–∫–∏, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å /bin/bash) \
`-b` —É–∫–∞–∑–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /home) \
`-d` –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`-m` —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç \
`-c` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ \
`-g` –æ—Å–Ω–æ–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`-G` —Å–ø–∏—Å–æ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø \
`-N` –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥—Ä—É–ø–ø—É —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`-p` –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`-l` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ö–æ–¥–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ lastlog –∏ faillog \
`-o` —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è linux —Å –Ω–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º UID \
`-u` –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### adduser

`adduser username` –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ (/home/username), –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏ –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å \
`deluser username` —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–∞—Ç–∞–ª–æ–≥ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è)

## chmod
```
    -                    ---                          ---         ---
    |                     |                            |           |
—Ç–∏–ø —Ñ–∞–π–ª–∞   –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–ª–∞–¥–µ–ª—å—Ü–∞)   –≥—Ä—É–ø–ø—ã   –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
```
`---` –Ω–µ—Ç –ø—Ä–∞–≤ \
`--x` —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞, –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–æ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ –Ω–µ —á—Ç–µ–Ω–∏–µ \
`-w-` —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ \
`-wx` —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –≤ —Å–ª—É—á–∞–µ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –Ω–µ–ª—å–∑—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ \
`r--` –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ \
`r-x` —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –±–µ–∑ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å \
`rw-` –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å, –Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è \
`rwx` –≤—Å–µ –ø—Ä–∞–≤–∞ \
`--s` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω SUID –∏–ª–∏ SGID –±–∏—Ç, –ø–µ—Ä–≤—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø–æ–ª–µ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞, –≤—Ç–æ—Ä–æ–π –¥–ª—è –≥—Ä—É–ø–ø—ã \
`--t` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω sticky-bit, –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª

`r` —á—Ç–µ–Ω–∏–µ \
`w` –∑–∞–ø–∏—Å—å \
`x` –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ \
`s` –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ  –æ—Ç –∏–º–µ–Ω–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π)

`u` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–≤–ª–∞–¥–µ–ª–µ—Ü —Ñ–∞–π–ª–∞ \
`g` –≥—Ä—É–ø–ø–∞-–≤–ª–∞–¥–µ–ª—å—Ü —Ñ–∞–π–ª–∞ \
`o` –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

`+` –≤–∫–ª—é—á–∏—Ç—å \
`-` –æ—Ç–∫–ª—é—á–∏—Ç—å

`-R` –ø–æ–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—Å–µ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏ –∏ —Ñ–∞–π–ª—ã —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ \
`-v` –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±–æ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

`chmod u+x filename` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (x) –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (u) \
`chmod ugo+x filename` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (x) –¥–ª—è –≤—Å–µ—Ö (ugo) \
`chmod ug+r filename` —Ä–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ (r) –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (u) –∏ –≥—Ä—É–ø–ø—ã (g) \
`chmod o-w filename` –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å (w) –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (o) \
`chmod -R g+rwx dir ` –¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (rwx) –≥—Ä—É–ø–ø–µ (g) –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –≤ –Ω–µ–π (-R)

–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –≤–æ—Å—å–º–µ—Ä–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é—Ç —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∞ –Ω–æ–≤—ã–º–∏ –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

`0` –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤ \
`1` —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ \
`2` —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å \
`3` –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å \
`4` —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ \
`5` —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ \
`6` —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å \
`7` —á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

`chmod 744 filename` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ \
`chmod 664 filename` —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—ã, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö

### chown

`chown lifailon tmp` –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è lifailon –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tmp \
`chown lifailon:lifailon tmp` –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É \
`chown -R lifailon:lifailon tmp` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ –≤—Å–µ–º –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∞–º (-R) \
`chown --from=root:root lifailon:lifailon -R ./` –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤–ª–∞–¥–µ–ª–µ—Ü –∏ –≥—Ä—É–ø–ø–∞ root –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ

### groups

`groups lifailon` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤ –∫–∞–∫–∏—Ö –≥—Ä—É–ø–ø–∞—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
`touch testdir` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ –µ–º—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ —Å–æ–∑–¥–∞–ª (ls -l testdir) \
`cat /etc/group` —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø \
`chgrp testdir tmp` –∏–∑–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É –Ω–∞ testdir –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tmp \
`groupadd testdir` —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É \
`delgroup testdir` —É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ 'testdir' still has `testdir' as their primary group!` –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –≥—Ä—É–ø–ø—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–û–ø—Ü–∏–∏: \
`-g` –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`-G` –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã, –≤ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞—Ç–∏—Ä–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ) \
`-a` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã c –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º -G, –∞ –Ω–µ –∑–∞–º–µ–Ω—è—Ç—å –∏–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ \
`-R` —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≥—Ä—É–ø–ø—ã

### usermod

`usermod -aG sudo lifailon` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É (-aG, –±–µ–∑ –∑–∞—Ç–∏—Ä–∞–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥—Ä—É–ø–ø) sudo (–¥–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É root) \
`usermod -aG disk lifailon` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –∏–º–µ—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ñ–î –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã sudo (–Ω–∞–ø—Ä–∏–º–µ—Ä –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å) \
`usermod -g root lifailon` –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –≥—Ä—É–ø–ø—É (-g) –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ root \
`usermod -R ssh lifailon` —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≥—Ä—É–ø–ø—ã

## domain

### realmd

`hostnamectl` \
`hostnamectl set-hostname srv-01.domain.local` –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ (/etc/hostname)

`nano /etc/resolv.conf` \
`nameserver 192.168.3.233` –∞–¥—Ä–µ—Å DC \
`search domain.local`

`apt -y install realmd libnss-sss libpam-sss sssd sssd-tools adcli samba-common-bin oddjob oddjob-mkhomedir packagekit` \
`nano /etc/realmd.conf` –∑–∞–¥–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã —Ö–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ AD (–∞—Ç—Ä–∏–±—É—Ç—ã operatingSystem –∏ operatingSystemVersion)
```
[active-directory]
os-name = Ubuntu Server
os-version = 20.04
```
`realm discover domain.local --verbose` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–æ–º–µ–Ω–∞ –∏ —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –≤ –¥–æ–º–µ–Ω–µ \
`realm join --help | grep pass` \
`realm join -U username domain.local` --one-time-password` –≤–≤–µ—Å—Ç–∏ –≤ –¥–æ–º–µ–Ω \
`realm list` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (server-software: active-directory) \
`id username@domain.local` –ø–æ–ª—É—á–∏—Ç—å —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –¥–æ–º–µ–Ω–∞

### sssd

–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Linux –∏–∑ –ø–æ–¥ –£–ó –¥–æ–º–µ–Ω–∞ (sssd –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Kerberos)

`realm permit -g 'ssh-connect-domain'` –¥–æ–±–∞–≤–∏—Ç –¥–æ–º–µ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É (echo "simple_allow_groups = ssh-connect-domain" >> /etc/sssd/sssd.conf) \
`realm permit username@domain.local` –¥–æ–±–∞–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (echo "simple_allow_users = username" >> /etc/sssd/sssd.conf) \
`realm deny --all` –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–æ—á–∏—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ simple_allow_* –≤ sssd.conf) \
`systemctl restart sssd`

–°–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```
bash -c "cat > /usr/share/pam-configs/mkhomedir" <<EOF
Name: activate mkhomedir
Default: yes
Priority: 900
Session-Type: Additional
Session:
required pam_mkhomedir.so umask=0022 skel=/etc/skel
EOF
```
`pam-auth-update` –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –≤—ã–±—Ä–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é: activate mkhomedir

–ü—Ä–∞–≤–∞ –Ω–∞ sudo:

`nano /etc/sudoers.d/domain_admins` nano /etc/sudoers.d/linux-admins
```
username@domain.local               ALL=(ALL)       ALL
%ssh-connect-domain@domain.local    ALL=(ALL)       ALL
```
`ssh username@domain.local@hostname`

## syslog

### server

`systemctl status rsyslog`

`nano /etc/rsyslog.conf`
```
# provides UDP syslog reception (input module udp)
module(load="imudp")
input(type="imudp" port="514")
# provides TCP syslog reception
#module(load="imtcp")
#input(type="imtcp" port="514")
# Filter duplicated messages
# –í–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
$RepeatedMsgReduction off
# –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ IP –∞–¥—Ä–µ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–±–æ—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª:
$template RemoteLogs,"/var/log/remote/%fromhost-ip%/syslog.log"
# –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (*) —Å –ª—é–±—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (*) –≤ —Ñ–∞–π–ª, –∑–∞–¥–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω–æ–º (RemoteLogs):
*.* ?RemoteLogs
# –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –ø–æ –∏–º–µ–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
# $template RemoteLogs,"/var/log/remote/%HOSTNAME%/%PROGRAMNAME%.log"
# *.* ?RemoteLogs
# Include all config files in /etc/rsyslog.d/
$IncludeConfig /etc/rsyslog.d/*.conf
```
`systemctl restart rsyslog`

### client

`nano /etc/rsyslog.d/all.conf`
```conf
# UDP:
*.* @192.168.3.105:514
# TCP:
# *.* @@192.168.3.105:514
# auth.* @@192.168.3.105:514
# *.err @@192.168.3.105:514
```
`systemctl restart rsyslog` \
`ls /var/log/remote` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å ip-–∞–¥—Ä–µ—Å–æ–º/–∏–º–µ–Ω–µ–º –∫–ª–∏–µ–Ω—Ç–∞ \
`ls -lh /var/log/remote/*` \
`cat /var/log/remote/192.168.3.104/syslog.log | grep influxd` \
`systemctl restart zabbix-agent` \
`cat /var/log/remote/192.168.3.104/syslog.log | grep zabbix_agentd`

### zabbix-agent

`nano /etc/zabbix/zabbix_agentd.conf`
```conf
# LogType=file
LogType=system
DebugLevel=1
```
`systemctl restart zabbix-agent`

### ommail

`nano /etc/rsyslog.conf`
```conf
# –í–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å:
module(load="ommail")
$ActionMailSMTPServer m.domain.ru
$ActionMailSMTPPort 25
$ActionMailFrom zabbix@domain.ru
$ActionMailTo lifailon@domain.ru
# –®–∞–±–ª–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –∫–∞–∫ —Ç–µ–º–∞ (Subject) –∏ —Ç–µ–ª–æ –ø–∏—Å—å–º–∞ (Body) - –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —à–∞–±–ª–æ–Ω–∞,"—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —à–∞–±–ª–æ–Ω–∞"
$template mailSubject,"rsyslog: disk problem on %hostname%"
$template mailBody,"RSYSLOG Alert\r\nmsg='%msg%'"
$ActionMailSubject mailSubject
$ActionMailBody mailBody
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É - –æ–¥–Ω–æ –ø–∏—Å—å–º–æ –≤ 5 –º–∏–Ω—É—Ç
$ActionExecOnlyOnceEveryInterval 300
```
## logrotate

`systemctl status logrotate.timer`

`nano /etc/logrotate.conf`
```conf
# –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
weekly
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥—Ä—É–ø–ø–∞ adm, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –≥—Ä—É–ø–ø—ã ls -ld /var/log/syslog
su root adm
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ (–Ω–µ–¥–µ–ª—å, –µ—Å–ª–∏ —Ä–æ—Ç–∞—Ü–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ) —Ö—Ä–∞–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤
rotate 4
# –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ (–ø—É—Å—Ç—ã–µ) —Ñ–∞–π–ª—ã –∂—É—Ä–Ω–∞–ª–æ–≤ –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö
create
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞—Ç—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—É—Ñ—Ñ–∏–∫—Å–∞ —Ä–æ—Ç–∏—Ä—É–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
dateext
# –°–∂–∏–º–∞—Ç—å –ª–æ–≥-—Ñ–∞–π–ª—ã
compress
# –ü–∞–∫–µ—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–æ—Ç–∞—Ü–∏–∏ –∂—É—Ä–Ω–∞–ª–∞ –≤ —ç—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥
include /etc/logrotate.d
```
`nano /etc/logrotate.d/logrotate_remote.conf`
```conf
/var/log/remote/*/*.log {
su root root
daily
copytruncate
size 10M
rotate 2
compress
dateext
}
```
–£—Å–ª–æ–≤–∏—è:

`hourly` –∫–∞–∂–¥—ã–π —á–∞—Å \
`daily` –∫–∞–∂–¥—ã–π –¥–µ–Ω—å \
`weekly` –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é \
`monthly` –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü \
`yearly` –∫–∞–∂–¥—ã–π –≥–æ–¥ \
`size` –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∞, –º–µ–Ω—å—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ—Ç–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç

–î–µ–π—Å—Ç–≤–∏—è:

`rotate 2` —É–∫–∞–∑–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–¥–∞–ª—è—Ç—å \
`maxage 30` —É–∫–∞–∑–∞—Ç—å, –∑–∞ —Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—å —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–¥–∞–ª—è—Ç—å \
`copytruncate` —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–ø–∏—è —Ñ–∞–π–ª–∞ –ª–æ–≥–∞, –ø–æ—Å–ª–µ —É–∂–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤—É—é—â–∏–π (–Ω—É–∂–Ω–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–∏—Å–∞—Ç—å –ª–æ–≥ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ –∑–∞–ø–∏—Å–µ–π, –µ—Å–ª–∏ –æ–Ω–∞ –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å —É—Å–µ—á–µ–Ω–∏—è) \
`extension` —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ª–æ–≥ —Ñ–∞–π–ª –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏ \
`compress` —Å–∂–∏–º–∞—Ç—å —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ (gzip) \
`delaycompress` –Ω–µ —Å–∂–∏–º–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π –∂—É—Ä–Ω–∞–ª (–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º—É —Ñ–∞–π–ª—É) \
`create # 0644 root root` —Å–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç–æ–π –ª–æ–≥ —Ñ–∞–π–ª –Ω–∞ –º–µ—Å—Ç–µ —Å—Ç–∞—Ä–æ–≥–æ \
`olddir /path` –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –ª–æ–≥–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è \
`dateext` –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∞—Ç—É —Ä–æ—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º —Å—Ç–∞—Ä–æ–≥–æ –ª–æ–≥–∞ \
`missingok` –Ω–µ –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –ª–æ–≥ —Ñ–∞–π–ª–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç \
`notifempty` –µ—Å–ª–∏ —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π, –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π \
`prerotate script.sh endscript` —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ —á–∏—Å—Ç–∫–æ–π –ª–æ–≥–∞ \
`postrotate script.sh endscript` —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—Å–ª–µ —á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞ \
`sharedscripts` –µ—Å–ª–∏ –±—ã–ª —É–∫–∞–∑–∞–Ω –ø—É—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ wildcard (*), –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–æ—Ç–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

`logrotate -d /etc/logrotate.d/logrotate_remote.conf` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é (--debug) \
`logrotate -fv /etc/logrotate.d/logrotate_remote.conf` –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é —Å–µ–π—á–∞—Å (--force) —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º (--verbose) \
`cat /etc/cron.daily/logrotate` –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Ä–æ—Ç–∞—Ü–∏–∏ /etc/logrotate.conf, –≤ –Ω–µ–º —É–∫–∞–∑–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç—Ä–∏—è: include /etc/logrotate.d –≤ –∫–æ—Ç–æ—Ä–æ–π –ª–µ–∂–∞—Ç —Ñ–∞–π–ª—ã —Ä–æ—Ç–∞—Ü–∏–∏ \
`which logrotate` —É–∑–Ω–∞—Ç—å –ø—É—Ç—å –¥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ \
`crontab -e` \
`00 3 * * * /usr/sbin/logrotate -f /etc/logrotate.d/logrotate_remote.conf` –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä—É—á–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–≤ –≤ 3:00

## log

- [lazyjournal](https://github.com/Lifailon/lazyjournal) - —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è journalctl, –∂—É—Ä–Ω–∞–ª–æ–≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, –∞ —Ç–∞–∫–∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Docker, Podman –∏ Kubernetes –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞, —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏ —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è –≤—ã–≤–æ–¥–∞:

`curl https://raw.githubusercontent.com/Lifailon/lazyjournal/main/install.sh | bash` \
`lazyjournal`

- [lnav](https://github.com/tstack/lnav) - —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ª–æ–≥–æ–≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Å —Ç–∞–π–º—Å—Ç–∞–º–ø–∞–º–∏, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–∏—Å–∫–∞ –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π:

`apt install lnav` \
`journalctl -f -a -xe -o json | lnav` \
`ssh playground@demo.lnav.org`

- [tailspin](https://github.com/bensadeh/tailspin) - —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –ª—é–±–æ–≥–æ –≤—ã–≤–æ–¥–∞:

`apt install tailspin` \
`cat /var/log/syslog | tailspin`

- [toolong](https://github.com/Textualize/toolong) - —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–∏—Å–∫–∞ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤ (–∑–∞–º–µ–Ω—è–µ—Ç tail, less –∏ grep):

`pipx install toolong` \
`tl /var/log/syslog*` –æ—Ç–∫—Ä–æ–µ—Ç –≤—Å–µ –∂—É—Ä–Ω–∞–ª—ã syslog (–≤–∫–ª—é—á–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫—É —á—Ç–µ–Ω–∏—è –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∂—É—Ä–Ω–∞–ª–æ–≤) \
`tl /var/log/syslog /var/log/syslog.1 --merge` –æ–±—ä–µ–¥–µ–Ω–∏—Ç –¥–≤–∞ –∂—É—Ä–Ω–∞–ª–∞ –≤ –æ–¥–∏–Ω \
`cat /var/log/syslog /var/log/syslog.1 | tailspin | tl` –≤–Ω–∞—á–∞–ª–µ –∫—Ä–∞—Å–∏–º –≤—ã–≤–æ–¥ –∏ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥–∞–µ–º –Ω–∞ –≤—Ö–æ–¥ toolong \

- [ttyd](https://github.com/tsl0922/ttyd) - –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –±–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

`sudo apt install ttyd` \
`ttyd -W -p 4444 tl /var/log/syslog*` \
`ttyd -W -p 4444 -c admin:admin tl /var/log/syslog*`

## smb

### cifs

`apt install cifs-utils` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SMB Client

`nano /root/.smbclient`
```
username=lifailon
password=password
#domain=domain.local
```
`mkdir /smb && mkdir /smb/backup` —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è \
`nano /etc/fstab` \
`//192.168.3.100/Backup /smb/backup cifs user,rw,credentials=/root/.smbclient 0 0` rw –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å \
`mount -a` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å (–æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: 137/UDP; 138/UDP; 139/TCP; 445/TCP) \
`df -h`

`//192.168.3.100/torrent-files /home/lifailon/torrent-files cifs user,rw,credentials=/root/.smbclient,perms=0666 0 0` \
`chmod 666 /home/lifailon/torrent-files` \
`chown -R lifailon:lifailon /home/lifailon/torrent-files` \
`smbclient $path_smb_qb --user=smb --password=kinozal`

### samba

`iptables -I INPUT -p tcp --dport 445 -j ACCEPT` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Samba \
`iptables -I INPUT -p tcp --dport 137 -j ACCEPT` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã NetBIOS (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞) \
`iptables -I INPUT -p tcp --dport 139 -j ACCEPT` \
`iptables -I INPUT -p udp --dport 137:138 -j ACCEPT` \
`iptables -L` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª \
`iptables -F` –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª \
`apt install iptables-persistent` \
`netfilter-persistent save` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

`apt install samba` \
`systemctl status smbd` \
`mkdir -p /public/share` —Å–æ–∑–¥–∞—Ç—å –æ–±—â—É—é –ø–∞–ø–∫—É \
`chmod 777 /public/share` –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞

`nano /etc/samba/smb.conf`
```conf
[global]
workgroup = WORKGROUP # —Ä–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞ (–¥–æ–ª–∂–Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–∞ –Ω–∞ –≤—Å–µ—Ö –º–∞—à–∏–Ω–∞—Ö)

[share1]
    comment = Public folder for all
    path = /public/share
    public = yes
    writable = yes
    read only = no
    guest ok = yes
    create mask = 0777
    directory mask = 0777
    force create mode = 0777
    force directory mode = 0777
```
`[–û–±—â–∞—è –ø–∞–ø–∫–∞]` –∏–º—è –æ–±—â–µ–π –ø–∞–ø–∫–∏, –∫–æ—Ç–æ—Ä–æ–µ —É–≤–∏–¥—è—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
`path` –ø—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –≥–¥–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ
`public` –¥–ª—è –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞, —á—Ç–æ–±—ã –≤—Å–µ –º–æ–≥–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ—Å—É—Ä—Å–æ–º
`writable` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Å–µ—Ç–µ–≤—É—é –ø–∞–ø–∫—É
`read only = yes` —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è. no - –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –§–°
`guest ok` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ –≥–æ—Å—Ç–µ–≤–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
`create mask, directory mask, force create mode, force directory mode` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –ø–∞–ø–∫–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞. –í –ø—Ä–∏–º–µ—Ä–µ —É–∫–∞–∑–∞–Ω—ã –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞.

`systemctl restart smbd` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

`useradd smb1` —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
`passwd smb1` –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é \
`smbpasswd -a smb1` —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è Samba
```
public = no
writable = no
read only = yes
guest ok = yes # —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ —á—Ç–µ–Ω–∏–µ (read only) –±–µ–∑ –ø–∞—Ä–æ–ª—è
; valid users = smb1 @smb-users # —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É –¥–ª—è —á—Ç–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –≤—Ö–æ–¥—â—è—Ö –≤ –≥—Ä—É–ø–ø—É smb-users
write list = smb1 # —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
hosts allow = comp1, 192.168.160.0/255.255.252.0 # —É–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ –∏–ª–∏ —Å–µ—Ç–µ–π, —Å –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ï—Å–ª–∏ –µ–≥–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ —Å–µ–∫—Ü–∏—é —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —à–∞—Ä—ã, —Ç–æ –æ–Ω –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–µ, –µ—Å–ª–∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ [global], —Ç–æ –¥–ª—è –≤—Å–µ—Ö –æ–±—â–∏—Ö –ø–∞–ø–æ–∫
hosts deny = comp2, 192.168.164.0/255.255.252.0 # –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø
```
### client cifs

`apt install cifs-utils` \
`mkdir /mnt/share1` \
`mount -t cifs "//192.168.3.103/share1" /mnt/share1 -o user=smb1` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ Linux —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π \
`df -handle` \
`//192.168.3.103/share1  24G  23G  1.2G  96%  /mnt/share1`

### client samba-client

`apt install samba-client` \
`smbclient -L 192.168.3.103 -U share1`

### recycle
```
[share1]
    path = /public/share
    public = yes
    browseable = yes
    writable = yes
    read only = no
    guest ok = yes
    vfs objects = recycle
    recycle:repository = .recycle/%U
    recycle:keeptree = Yes
    recycle:touch = Yes
    recycle:versions = Yes
    recycle:maxsize = 0
    recycle:exclude = *.tmp
    recycle:exclude_dir = /tmp
```
`recycle:repository` –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã. –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ø–∞–¥—É—Ç –≤ —Å–∫—Ä—ã—Ç—ã–π –∫–∞—Ç–∞–ª–æ–≥ .recycle –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–∑–¥–∞—Å—Ç—Å—è –∫–∞—Ç–∞–ª–æ–≥ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É–¥–∞–ª–∏–≤—à–µ–≥–æ —Ñ–∞–π–ª –∏–ª–∏ –ø–∞–ø–∫—É \
`recycle:keeptree` —É–¥–∞–ª—è—Ç—å –æ–±—ä–µ–∫—Ç—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ \
`recycle:touch` –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –ø—Ä–∏ –µ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É \
`recycle:versions` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º–∏ –∏–º–µ–Ω–∞–º–∏, –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ \
`recycle:maxsize` –Ω–µ –ø–æ–º–µ—â–∞—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É —Ñ–∞–π–ª—ã, —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–≤ –±–∞–π—Ç–∞—Ö). 0 - –ø–æ–º–µ—â–∞—Ç—å —Ñ–∞–π–ª—ã –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ \
`recycle:exclude` –∏—Å–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã \
`recycle:exclude_dir` –∏—Å–∫–ª—é—á–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥

## nfs

### server

`apt install nfs-kernel-server` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–∞—Ä—ã. –°–µ—Ä–≤–∏—Å NFS —Å–ª—É—à–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è TCP –∏ UDP –Ω–∞ –ø–æ—Ä—Ç—É 2049. \
`apt install rpcbind` \
`rpcinfo -p | grep nfs` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç nfs \
`cat /proc/filesystems | grep nfs` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ NFS –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞ (–≤—ã–≤–æ–¥: nodev nfsd) \
`modprobe nfs` –≤—Ä—É—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª—å —è–¥—Ä–∞ nfs \
`systemctl status nfs-server` —Å–ª—É–∂–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ \
`ufw allow 111,2049 && ufw reload` \
`mkdir nfs-folder` —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è —à–∞—Ä—ã \
`adduser nfs-user` —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è \
`chown nfs-user:nfs-user nfs-folder` –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ —à–∞—Ä—ã \
`chmod 775 nfs-folder` –¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤–ª–∞–¥—É–ª—å—Ü—É –∏ –≥—Ä—É–ø–ø–µ \
`nano /etc/exports` —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞—Ä—ã \
`/nfs-folder 192.168.3.0/24(rw,sync,no_subtree_check)` /–ø—É—Ç—å/–∫/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (—à–∞—Ä–∏–º), —É–¥–∞–ª–µ–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –ø–æ–¥—Å–µ—Ç—å (—á—Ç–æ –±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ –∞–¥—Ä–µ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0.0.0.0/24 –∏–ª–∏ —Å–∏–º–≤–æ–ª *) –∏ –æ–ø—Ü–∏–∏ –≤ —Å–∫–æ–±–∫–∞—Ö \
`exportfs -a` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —ç–∫—Å–ø–æ—Ä—Ç–∞ NFS)

Options:

`rw` —Ä–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ \
`ro` —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ \
`sync` –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ –¥–∏—Å–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`async` –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ \
`secure` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã –Ω–∏–∂–µ 1024 \
`insecure` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ –ø–æ—Ä—Ç—ã \
`nohide` –Ω–µ —Å–∫—Ä—ã–≤–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º \
`root_squash` –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç root –Ω–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \
`no_root_squash` –Ω–µ –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç root –Ω–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ (–≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏ nfsnobody, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–æ–π –æ–ø—Ü–∏–∏ –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–æ–π root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –Ω–∞ –∑–∞–ø–∏—Å—å –∫–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º) \
`all_squash` –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ \
`subtree_check` –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–π—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏ \
`no_subtree_check` –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ, —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª –¥–∏—Å–∫–∞ \
`anonuid –∏ anongid` —É–∫–∞–∑—ã–≤–∞–µ—Ç uid –∏ gid –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ UNIX, –ø–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∏–≤—à–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ, —Ç–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∂–µ UID (–∏–º–µ–Ω–µ–º –∏ ID), –∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Ç–∞–∫–æ–º—É –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –≥—Ä—É–ø–ø–µ –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç (GID). –ò–ª–∏ –¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (chmod 777 nfs-folder), —Ç–æ–≥–¥–∞ –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ—Ç –∏–º–µ–Ω–∏: nobody nogroup

`/nfs-folder 192.168.3.0/24(rw,sync,all_squash,anonuid=1020,anongid=1020)` –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–µ—Ç–∏ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å UID 1020 –∏ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—ã –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å—á–∏—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å–∞–º–∏ –æ—Ç –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –∞–Ω–æ–Ω–∏–º–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Å–≤–æ–∏—Ç—å UID 1020. –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å id 1020 –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –æ–Ω –±—É–¥–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ª—é–±—ã–º UID. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ–¥ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –≤–ª–∞–¥–µ–ª–µ—Ü —Å –Ω–æ–º–µ—Ä–æ–º UID –∏ GID 1020. \
`usermod -u 1020 nfs-user` –∏–∑–º–µ–Ω–∏—Ç—å UID \
`groupmod -g 1020 nfs-user` –∏–∑–º–µ–Ω–∏—Ç—å GID \
`id nfs-user` –ø—Ä–æ–≤–µ—Ä—è–µ–º ID

### client

`apt install nfs-common` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —á—Ç–æ –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å c —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π \
`mkdir /mnt/nfs-folder && mount 192.168.3.104:/nfs-folder/ /mnt/nfs-folder` –ø–æ–¥–∫–ª—é—á–∏—Ç—å —à–∞—Ä—É –∏ –ø—Ä–≤–æ–µ—Ä–∏—Ç—å df -h (192.168.3.104:/nfs-folder  48G  20G  27G  43%  /mnt/nfs-folder) \
`umount /mnt/nfs-folder` –æ—Ç–∫–ª—é—á–∏—Ç—å \
`showmount -e 192.168.3.104` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

## ftp

`apt install vsftpd` —É—Å—Ç–∞–Ω–æ–≤–∫–∞ vsFTPd Server (Very Secure File Transfer Protocol Daemon) \
`systemctl status vsftpd` \
`ufw allow 20:21/tcp` –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ Firewall \
`ufw allow 30000:31000/tcp` \
`cp /etc/vsftpd.conf /etc/vsftpd.conf.bak` —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

`nano /etc/vsftpd.conf`
```conf
listen=YES
listen_ipv6=NO
anonymous_enable=NO` –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–Ω–∏–º–Ω—ã–π –≤—Ö–æ–¥
local_enable=YES` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –≤—Ö–æ–¥–∞
write_enable=YES` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ). –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏, –∫—É–¥–∞ —É –Ω–µ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø
chroot_local_user=NO` –∫–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ YES, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Ö –¥–æ–º–∞—à–Ω–∏–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Å—Ç–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
chroot_list_enable=YES` –∑–∞–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–ª–∏ –Ω–µ –±—É–¥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Å–≤–æ–∏–º–∏ –¥–æ–º–∞—à–Ω–∏–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç chroot_local_user
chroot_list_file=/etc/vsftpd.chroot_list` –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è chroot-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
user_sub_token=$USER
local_root=/home/$USER/ftp` —É–∫–∞–∑–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º)
userlist_enable=YES` –≤–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç (–∏–ª–∏ –Ω–µ –º–æ–≥—É—Ç) –≤—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
userlist_file=/etc/vsftpd.user_list` —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∏–ª–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã
userlist_deny=NO` –ø–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ NO, —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ userlist_file –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç
connect_from_port_20` YES - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 20 –ø–æ—Ä—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ (–Ω—É–∂–Ω–æ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã firewall)
xferlog_enable = YES` –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –ª–æ–≥ —Ñ–∞–π–ª –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```
`systemctl restart vsftpd` \
`ss -ln | grep -w "21"` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ 21 –ø–æ—Ä—Ç —Å–ª—É—à–∞–µ—Ç (LISTEN) \
`ss -tn | grep -w "21"` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ 21 –ø–æ—Ä—Ç—É (ESTAB) \
`cat /var/log/vsftpd.log` –ª–æ–≥ —Ä–∞–±–æ—Ç—ã (CONNECT/LOGIN/UPLOAD/DOWNLOAD/RENAME/DELETE)

### ftp client

`ftp 192.168.3.104` –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSL \
`230 Login successful` –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —É—Å–ø–µ—à–µ–Ω \
`ls` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ \
`get test.json` —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä \
`put out.txt` –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä \
`bye` –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### ftps

`sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/vsftpd.key -out /etc/ssl/certs/vsftpd.crt` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º–æ–∑–∞–≤–µ—Ä—è—é—â–∏–π SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á

`nano /etc/vsftpd.conf`
```conf
ssl_enable=YES
rsa_cert_file=/etc/ssl/certs/vsftpd.crt
rsa_private_key_file=/etc/ssl/private/vsftpd.key
allow_anon_ssl=NO
force_local_data_ssl=YES
force_local_logins_ssl=YES
ssl_tlsv1=YES
ssl_sslv2=NO
ssl_sslv3=NO
require_ssl_reuse=NO
ssl_ciphers=HIGH
```
`useradd -m -s /bin/bash ftpuser` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –¥–æ–º–∞—à–Ω–∏–º –∏–º–µ–Ω–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º –∏ –æ–±–æ–ª–æ—á–∫–æ–π bash \
`passwd ftpuser` –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é \
`echo "ftpuser" | tee -a /etc/vsftpd.chroot_list` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –¥–æ–º–∞—à–Ω–∏–º –∫–∞—Ç–∞–ª–æ–≥–æ–º \
`echo "ftpuser" | tee -a /etc/vsftpd.user_list` –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è \
`mkdir /home/ftpuser/ftp` —Å–æ–∑–¥–∞—Ç—å –¥–æ–º–∞—à–Ω–∏—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é \
`chown ftpuser:ftpuser ftp` –Ω–∞–∑–Ω–∞—á–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ \
`chmod 555 ftp` –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ \
`mkdir /home/ftpuser/ftp/upload` —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∫–∏ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–ø–∏—Å–∏) \
`chown ftpuser:ftpuser upload` \
`chmod 775 upload` –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—ã

## rsync

`rsync -options SRC DST`

`-a` —Ä–µ–∂–∏–º –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Å–µ –∏—Å—Ö–æ–¥–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è) \
`-b` —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ \
`-c` –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º –¥–ª—è —Ñ–∞–π–ª–æ–≤ \
`-e` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä ssh) \
`-h` –≤—ã–≤–æ–¥–∏—Ç —Ü–∏—Ñ—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º –¥–ª—è —á—Ç–µ–Ω–∏—è \
`-l` –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ \
`-L` –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Å—ã–ª–æ–∫ \
`-p` —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤ \
`-q` –º–∏–Ω–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ \
`-u` –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã \
`-v` –≤—ã–≤–æ–¥–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è \
`-w` –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ \
`-z` —Å–∂–∏–º–∞—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π \
`--delete` —É–¥–∞–ª—è—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —É –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è \
`--progress` –≤—ã–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–∞ (–≤ %) \
`--stat` –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ–¥–∞—á–∏

`rsync -zvh /home/lifailon /backup` –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ (skipping directory) —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –Ω–æ—Å–∏—Ç–µ–ª—å). –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–∞–ø–∫–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏).

`nano /etc/rsyncd.conf`
```conf
pid file = /var/run/rsyncd.pid
lock file = /var/run/rsync.lock
log file = /var/log/rsync.log
[share]
path = /backup/
hosts allow = 192.168.3.103
hosts deny = *
list = true
uid = lifailon
gid = lifailon
read only = false
```
`chown kup:kup backup` —Å–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ \
`chmod ug+rwx backup` –≤—ã–¥–∞—Ç—å –∏–º –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ (–¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) \
`systemctl start rsync` –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω–µ (192.168.3.103) –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

`rsync -avzh /backup/ kup@192.168.3.103:/tmp/backup/` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ backup (–≤–∫–ª—é—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Rsync –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç SSH (—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π) —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–∞—Ä–æ–ª—è (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á). \
`rsync -avzhe "ssh -p 2121" /tmp/backup/ kup@192.168.21.121:/tmp/backup/` –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç \
`rsync -avzh /tmp/backup/ rsync://192.168.21.121:/share` —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ Rsync \
–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –∑–∞–º–µ–Ω–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–ª—å–∫–æ —Ç–µ—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã (sending incremental file list ./ test3) \
`rsync -avzh kup@192.168.3.103:/tmp/backup /tmp/backup/` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä \
`ssh-keygen -t rsa` –≤ —Å–ª—É—á–∞–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—é—á –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —á—Ç–æ–±—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏–ª–∞ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è \
`ssh-copy-id -i /home/sk/.ssh/id_rsa.pub kup@192.168.21.10` –ø–µ—Ä–µ–¥–∞—Ç—å –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è \
`00 03 * * * rsync -avzhe "ssh -p 2121" /tmp/backup/ kup@192.168.21.121:/tmp/backup/` –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3 —á–∞—Å–∞ –Ω–æ—á–∏

## apache

`apt install apache2` \
`cat /etc/apache2/apache2.conf` \
`cat /etc/apache2/ports.conf` \
`port=8443` \
`cat /etc/apache2/ports.conf | sed -r "s/^Listen.+/Listen $port/" > /etc/apache2/ports.conf` \
`systemctl restart apache2` \
`systemctl status apache2` \
`ss -lpn | grep apache` \
`echo "<H1>$(hostname)</H1>" > /var/www/html/index.html`

### api server

`mkdir /var/www/api && touch /var/www/api/api.sh && chmod +x /var/www/api/api.sh` \
`curl -s "https://raw.githubusercontent.com/Lifailon/bash-api-server/rsa/www/api/api.sh" > /var/www/api/api.sh` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä —Å —à–∞–±–ª–æ–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–∞ api

`nano /var/www/api/api.sh`
```bash
#!/bin/bash
if [ "$REQUEST_METHOD" == "GET" ]
    then
    echo "Content-type: application/json"
    echo
    echo '{"result": "ok"}'
else
    echo "Content-type: text/plain"
    echo
    echo "Request method not supported"
fi
```
`a2enmod auth_basic` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –±–∞–∑–æ–≤–æ–π HTTP –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ \
`htpasswd -b -c /etc/apache2/.htpasswd rest api` –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å htpasswd –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è rest —Å –ø–∞—Ä–æ–ª–µ–º api)

`nano /etc/apache2/sites-available/api.conf` —Å–æ–∑–¥–∞—Ç—å VirtualHost –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
```conf
<VirtualHost *:8443>
    DocumentRoot /var/www/html
    # –°–≤—è–∑–∞—Ç—å endpoint (–≤–∫–ª—é—á–∞—è –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–∏ –≤ –ø—É—Ç–∏) —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º
    ScriptAlias /api /var/www/api/api.sh
    # –í—Å–µ –æ–ø—Ü–∏–∏, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä—å —Å–µ–∫—Ü–∏–∏ Directory, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    <Directory "/var/www/api">
        # –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ CGI-—Å–∫—Ä–∏–ø—Ç–æ–≤
        Options +ExecCGI
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ sh –∫–∞–∫ CGI-—Å–∫—Ä–∏–ø—Ç
        AddHandler cgi-script .sh
        AllowOverride None
        Require all granted
    </Directory>
    # –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è endpoint
    <Location "/api">
        AuthType Basic
        AuthName "Restricted Area"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
        SetHandler cgi-script
        Options +ExecCGI
    </Location>
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
```
`a2enmod cgi` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å (en mod) Common Gateway Interface (CGI) \
`a2ensite api.conf` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å VirtualHost (en site) \
`systemctl restart apache2` \
`tail -f /var/log/apache2/error.log` \
`tail -f /var/log/apache2/access.log`

`curl -s -X GET http://127.0.0.1:8443/api -u rest:api | jq .result` \
`curl -s -X GET http://127.0.0.1:8443/api/info -u rest:api -H "Content-Type: application/json" | jq .content[]`

`REQUEST_METHOD` –º–µ—Ç–æ–¥ HTTP-–∑–∞–ø—Ä–æ—Å–∞ (GET, POST, HEAD –∏ —Ç.–¥.) \
`REQUEST_URI` –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URI –∑–∞–ø—Ä–æ—Å–∞ \
`QUERY_STRING` —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ URL \
`CONTENT_TYPE` —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, application/text) \
`CONTENT_LENGTH` –¥–ª–∏–Ω–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –±–∞–π—Ç–∞—Ö (—á–∞—â–µ, –¥–ª—è POST-–∑–∞–ø—Ä–æ—Å–æ–≤) \
`read -n $CONTENT_LENGTH POST_DATA` –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ Body –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞ (stdin). \
`HTTP_STATUS` —á–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Status: text"), –∫–æ—Ç–æ—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º \
`HTTP_USER_AGENT` –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, curl/8.4.0) \
`REMOTE_ADDR` –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ \
`REMOTE_PORT` –ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–∞ \
`SERVER_NAME` –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ \
`SERVER_PORT` –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ \
`SCRIPT_NAME` –ø—É—Ç—å –∏ –∏–º—è CGI-—Å–∫—Ä–∏–ø—Ç–∞ \
`SERVER_SOFTWARE` –∏–º—è –∏ –≤–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞ \
`SERVER_PROTOCOL` –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP/1.1) \
`HTTPS` –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç–æ –∑–∞–ø—Ä–æ—Å –±—ã–ª —Å–¥–µ–ª–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HTTPS \
`AUTH_TYPE` —Ç–∏–ø –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω \
`REMOTE_USER` –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è \
`DOCUMENT_ROOT` –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

### status

`apachectl -M | grep status_module` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: status_module (shared) \
`nano /etc/apache2/mods-available/status.conf` \
`Require ip 192.168.3.0/24` —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ \
http://127.0.0.1:8443/server-status \
`apachectl -t` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (Syntax OK) \
`a2enmod status` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å (Module status already enabled) \
`systemctl restart apache2` \
`netstat -tulpan | grep apache2` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç \
`curl http://127.0.0.1:8443/server-status?auto`

### webdav

`nano /etc/apache2/ports.conf`
```
Listen 8443
Listen 2024
```
`mkdir /var/www/webdav && chown www-data:www-data /var/www/webdav` —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –∫ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ WebDAV –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É –¥–ª—è www-data

`nano /etc/apache2/sites-available/webdav.conf`
```conf
<VirtualHost *:2024>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/webdav
    Alias /webdav /var/www/webdav
    <Directory /var/www/webdav>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
        Dav On
        AuthType Basic
        AuthName "WebDAV"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>
    ErrorLog ${APACHE_LOG_DIR}/webdav_error.log
    CustomLog ${APACHE_LOG_DIR}/webdav_access.log combined
</VirtualHost>
```
`a2enmod dav` \
`a2enmod dav_fs` \
`a2enmod auth_digest` \
`a2enmod authn_core` \
`a2enmod authn_file` \
`a2enmod authz_core` \
`a2enmod authz_user` \
`htpasswd /etc/apache2/.htpasswd admin` —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin (–∫–ª—é—á -—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞) \
`a2ensite webdav` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∞–π—Ç–∞ \
`systemctl restart apache2`
